window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({API:[function(t,e,o){"use strict";cc._RF.push(e,"519a1UFF4ZBy4cfQ0vO+vLe","API");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,r=function(){function t(){}var e;return e=t,t.Request=function(t,e,o){var n=window.userParams;return new Promise(function(i,r){var c=new XMLHttpRequest;c.open(t,n.api+e,!0),c.setRequestHeader("Content-type","application/json"),c.setRequestHeader("Authorization","Bearer "+n.authorization),c.setRequestHeader("TenantId",n.tenantId),c.setRequestHeader("CampaignId",n.campaignId),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?i(c.response):r(c.response))},c.send(o)})},t.StartGame=function(t){var o={turnType:t};return e.Request("post","/StartGame",JSON.stringify(o))},t.EndGame=function(t,o){var n={transactionCode:t,coin:o,hash:window.sha1(""+t+o+window.userParams.shareKey)};return e.Request("post","/EndGame",JSON.stringify(n))},t=e=n([i],t)}();o.default=r,cc._RF.pop()},{}],CollectibleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cc4e1VIjdNCQZWkEeLAggyG","CollectibleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./Collectible"),a=t("./core/Timer"),u=cc._decorator,p=u.ccclass,l=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectiblePrefab=[],e.collectibles=[],e.timerSpawn=new a.default,e}return n(e,t),e.prototype.start=function(){this.timerSpawn.SetDuration(.5)},e.prototype.update=function(t){if(!cc.game.isPaused())switch(this.state){case r.INIT:break;case r.PLAYING:this.timerSpawn.Update(t),this.timerSpawn.IsDone()&&(this.timerSpawn.Reset(),this.Spawn(c.CollectItem.COIN,cc.Camera.main.node.position.x+cc.winSize.width+200,c.RandomInt(300,900)));break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:if(0==this.collectibles.length)for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=null;(o=e<c.default.COLLECTIBLE_MAX/2?cc.instantiate(this.collectiblePrefab[c.CollectItem.COIN]):cc.instantiate(this.collectiblePrefab[c.CollectItem.PEPCOIN])).parent=this.node,o.active=!1,this.collectibles.push(o)}else for(e=0;e<c.default.COLLECTIBLE_MAX;e++)this.collectibles[e].active=!1;break;case r.PLAYING:case r.DEAD:}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Spawn=function(t,e,o){var n=this.GetInactiveCollectible(t);null!=n&&n.getComponent(s.default).Spawn(e,o)},e.prototype.Hide=function(){for(var t=0;t<c.default.COLLECTIBLE_MAX;t++)this.collectibles[t].getComponent(s.default).Hide()},e.prototype.GetInactiveCollectible=function(t){for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=this.collectibles[e].getComponent(s.default);if(o.type==t&&o.IsHidden())return this.collectibles[e]}return null},i([l({type:[cc.Prefab]})],e.prototype,"collectiblePrefab",void 0),e=i([p],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./core/Timer":"Timer"}],Collectible:[function(t,e,o){"use strict";cc._RF.push(e,"fa348NaP0ZPiLsfr/XupaJH","Collectible");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,u=s.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=c.CollectItem.COIN,e.animation=null,e.isCollected=!1,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=screen.width/2&&this.SetState(r.HIDE);break;case r.HIDE:}},e.prototype.onCollected=function(){this.node.active=!1},e.prototype.SetState=function(t){switch(this.state=t,t){case r.PLAYING:this.isCollected=!1,this.node.active=!0;break;case r.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e){this.node.setPosition(t,e),this.animation.play("coin_idle"),this.SetState(r.PLAYING)},e.prototype.Collect=function(){this.isCollected=!0,this.animation.play("coin_collect")},e.prototype.Hide=function(){this.isCollected||(this.node.active=!1)},e.prototype.IsHidden=function(){return!this.node.active},i([u({type:c.CollectItem})],e.prototype,"type",void 0),i([u({type:cc.Animation})],e.prototype,"animation",void 0),e=i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Defines":"Defines"}],Defines:[function(t,e,o){"use strict";cc._RF.push(e,"a49cbvPOuxAKauT+47PnPv4","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.CollectItem=o.THEME=o.CollisionTag=o.GameEvent=o.RandomInt=o.Clamp=void 0,o.default=new(function(){return function(){this.GAME_BASE_SPEED=60,this.GAME_SPEED_MIN=7,this.GAME_SPEED_MAX=12,this.COLLECTIBLE_MAX=50}}()),o.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},o.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.TOUCH="TouchEvent",t.COLLECT_ITEM="CollectItem",t.LOSE="GameLose"}(o.GameEvent||(o.GameEvent={})),function(t){t[t.OBSTACLE=0]="OBSTACLE",t[t.COIN=1]="COIN",t[t.PEPCOIN=2]="PEPCOIN"}(o.CollisionTag||(o.CollisionTag={})),function(t){t[t.FOREST=0]="FOREST",t[t.CITY=1]="CITY",t[t.BEACH=2]="BEACH"}(o.THEME||(o.THEME={})),o.CollectItem=cc.Enum({COIN:0,PEPCOIN:1}),cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.EventMgr=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=null,e}(cc.EventTarget);o.EventMgr=i,i.instance=new i,cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"15fb3AUZERDaaRXtnJ70/ub","GameMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},r=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function c(t){try{a(n.next(t))}catch(t){r(t)}}function s(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){t.done?o(t.value):i(t.value).then(c,s)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("./core/EventMgr"),u=t("./Defines"),p=t("./Player"),l=t("./core/Input"),f=t("./ui/MainMenu"),h=t("./ui/Ingame"),d=t("./ui/PopupCoin"),y=t("./ui/PopupError"),v=t("./Settings"),_=t("./ui/Loading"),g=t("./core/Timer"),S=t("./camera/VideoCamera"),m=t("./CollectibleMgr"),E=t("./SimpleFaceDetect"),b=cc._decorator,P=b.ccclass,I=b.property;(function(t){t[t.INIT=0]="INIT",t[t.TOUCH_TO_PLAY=1]="TOUCH_TO_PLAY",t[t.PLAYING=2]="PLAYING",t[t.PAUSE=3]="PAUSE",t[t.RESUME=4]="RESUME",t[t.WIN_DELAY=5]="WIN_DELAY",t[t.WIN=6]="WIN",t[t.LOSE_DELAY=7]="LOSE_DELAY",t[t.LOSE=8]="LOSE"})(s||(s={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectibleMgr=null,e.viewMainMenu=null,e.viewIngame=null,e.viewLoading=null,e.popupCoin=null,e.popupError=null,e.player=null,e.audioBgm=null,e.audioWin=null,e.audioLose=null,e.audioClick=null,e.confetti=null,e.videoCamera=new S.default,e.timerWinDelay=new g.default,e.speed=u.default.GAME_SPEED_MIN,e.speedTarget=u.default.GAME_SPEED_MIN,e.coin=0,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.timerWinDelay.SetDuration(5)},e.prototype.start=function(){a.EventMgr.instance.on(u.GameEvent.TOUCH,this.TouchHandler,this),a.EventMgr.instance.on(u.GameEvent.COLLECT_ITEM,this.OnScore,this),a.EventMgr.instance.on(u.GameEvent.LOSE,this.OnDead,this),cc.game.on(cc.game.EVENT_SHOW,this.GameResume,this),cc.game.on(cc.game.EVENT_HIDE,this.GamePause,this);try{var t=JSON.parse(cc.sys.localStorage.getItem("settings"));null!=t&&(v.default.useSound!=t.useSound&&(console.log(JSON.stringify(t)),this.viewMainMenu.SwitchSound()),v.default.useSound&&this.audioBgm.play())}catch(t){}this.SetState(s.INIT)},e.prototype.update=function(t){switch(this.state){case s.INIT:break;case s.TOUCH_TO_PLAY:this.UpdateSpeed(t);break;case s.PLAYING:this.UpdateSpeed(t),l.default.instance.isHold&&this.player.SetTarget(cc.v3(l.default.instance.position)),this.player.IsLanding()&&this.OnDead();break;case s.WIN_DELAY:this.UpdateSpeed(t),this.timerWinDelay.Update(t),this.timerWinDelay.JustFinished()&&this.SetState(s.WIN);break;case s.WIN:this.UpdateSpeed(t);break;case s.LOSE_DELAY:this.player.IsLanding()&&this.SetState(s.LOSE)}this.videoDom},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case s.INIT:cc.Camera.main.node.setPosition(0,cc.Camera.main.node.position.y),v.default.useSound&&this.audioBgm.play(),this.speed=u.default.GAME_SPEED_MIN,this.speedTarget=u.default.GAME_SPEED_MIN,this.coin=0,this.confetti.node.active=!1,this.collectibleMgr.Init(),this.player.Init(),this.viewMainMenu.Show(function(){e.SetState(s.TOUCH_TO_PLAY)}),this.viewIngame.Hide(),this.viewIngame.ResetCoin(),this.SetupCameraML5();break;case s.TOUCH_TO_PLAY:break;case s.PLAYING:this.player.Play(),this.collectibleMgr.Play(),this.viewMainMenu.Hide(),this.viewIngame.Show();break;case s.WIN_DELAY:this.timerWinDelay.Reset(),this.collectibleMgr.Hide(),this.player.Win(),this.confetti.node.active=!0;break;case s.WIN:this.audioBgm.stop(),this.audioWin.play(),this.EndGame();break;case s.LOSE_DELAY:this.player.Dead(),this.audioBgm.stop();break;case s.LOSE:v.default.useSound&&this.audioLose.play(),this.EndGame();break;case s.PAUSE:this.audioBgm.stop(),this.player.Pause();break;case s.RESUME:this.audioBgm.play(),this.player.Resume(),this.state=s.PLAYING}},e.prototype.UpdateSpeed=function(t){var e=cc.Camera.main.node.position;cc.Camera.main.node.setPosition(e.x+this.speed*u.default.GAME_BASE_SPEED*t,e.y),this.confetti.node.setPosition(e.x+cc.winSize.width/2,this.confetti.node.position.y),this.speed=cc.misc.lerp(this.speed,this.speedTarget,.1)},e.prototype.EndGame=function(){},e.prototype.Replay=function(){},e.prototype.ScoreRetry=function(){v.default.useSound&&this.audioClick.play(),this.Replay()},e.prototype.ScoreHome=function(){window.parent.location.href=window.userParams.homeUrl},e.prototype.ScoreStore=function(){window.location.href=window.userParams.storeUrl},e.prototype.ErrorClose=function(){},e.prototype.SwitchSound=function(){this.viewMainMenu.SwitchSound(),v.default.useSound?this.audioBgm.play():this.audioBgm.stop(),cc.sys.localStorage.setItem("settings",JSON.stringify(v.default))},e.prototype.OnScore=function(t){this.coin+=5,t==u.CollectItem.PEPCOIN&&(this.coin+=5)},e.prototype.OnDead=function(){this.SetState(s.LOSE_DELAY)},e.prototype.GameResume=function(){cc.game.resume()},e.prototype.GamePause=function(){this.state==s.PLAYING&&this.SetState(s.PAUSE),cc.game.pause()},e.prototype.TouchHandler=function(t){switch(this.state){case s.INIT:break;case s.TOUCH_TO_PLAY:l.default.instance.IsTouchDown(t)&&this.SetState(s.PLAYING);break;case s.PLAYING:break;case s.PAUSE:this.SetState(s.RESUME)}},e.prototype.SetupCameraML5=function(){return r(this,void 0,void 0,function(){var t,e,o,n=this;return c(this,function(i){switch(i.label){case 0:return t=this,[4,this.videoCamera.Init()];case 1:return t.videoDom=i.sent(),e=E.default.Init(),o=function(){e(n.videoDom),requestAnimationFrame(o)},requestAnimationFrame(o),[2]}})})},e.prototype.OnML5PoseNet=function(t){if(!l.default.instance.isHold&&t.length>0){var e=t[0].pose.nose;this.player.SetTarget(cc.v3(cc.winSize.width-e.x,cc.winSize.height-e.y,0))}},i([I({type:m.default})],e.prototype,"collectibleMgr",void 0),i([I({type:f.default})],e.prototype,"viewMainMenu",void 0),i([I({type:h.default})],e.prototype,"viewIngame",void 0),i([I({type:_.default})],e.prototype,"viewLoading",void 0),i([I({type:d.default})],e.prototype,"popupCoin",void 0),i([I({type:y.default})],e.prototype,"popupError",void 0),i([I({type:p.default})],e.prototype,"player",void 0),i([I({type:cc.AudioSource})],e.prototype,"audioBgm",void 0),i([I({type:cc.AudioSource})],e.prototype,"audioWin",void 0),i([I({type:cc.AudioSource})],e.prototype,"audioLose",void 0),i([I({type:cc.AudioSource})],e.prototype,"audioClick",void 0),i([I({type:cc.ParticleSystem3D})],e.prototype,"confetti",void 0),e=i([P],e)}(cc.Component);o.default=w,cc._RF.pop()},{"./CollectibleMgr":"CollectibleMgr","./Defines":"Defines","./Player":"Player","./Settings":"Settings","./SimpleFaceDetect":"SimpleFaceDetect","./camera/VideoCamera":"VideoCamera","./core/EventMgr":"EventMgr","./core/Input":"Input","./core/Timer":"Timer","./ui/Ingame":"Ingame","./ui/Loading":"Loading","./ui/MainMenu":"MainMenu","./ui/PopupCoin":"PopupCoin","./ui/PopupError":"PopupError"}],Ingame:[function(t,e,o){"use strict";cc._RF.push(e,"ce56bZ/jydEaJ9euUC2iteW","Ingame");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.life=null,e.coinCurrent=0,e.coinTarget=0,e}return n(e,t),e.prototype.update=function(t){this.coinCurrent<this.coinTarget&&(this.coinCurrent++,this.coin.string=""+this.coinCurrent)},e.prototype.SetCoin=function(t){this.coinTarget=t},e.prototype.ResetCoin=function(){this.coinCurrent=0,this.coinTarget=0,this.coin.string=""+this.coinCurrent},e.prototype.SetLife=function(t){this.life.string=""+t},e.prototype.Show=function(){this.node.active=!0},e.prototype.Hide=function(){this.node.active=!1},i([s(cc.Label)],e.prototype,"coin",void 0),i([s(cc.Label)],e.prototype,"life",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Init:[function(t,e,o){"use strict";cc._RF.push(e,"fb0e64rMu1It448CA4JE5/E","Init");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Defines"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingIcon=null,e.loadingError=null,e.progress=null,e}return n(e,t),e.prototype.start=function(){this.LoadScene()},e.prototype.update=function(t){this.loadingIcon.angle-=2*r.default.GAME_BASE_SPEED*t},e.prototype.LoadScene=function(){var t=this;this.loadingIcon.active=!0,this.progress.node.active=!0,this.loadingError.active=!1,cc.director.preloadScene("main",function(e,o,n){var i=e/o;t.progress.string=Math.floor(100*i)+"%"},function(e,o){if(e)return t.loadingIcon.active=!1,t.progress.node.active=!1,void(t.loadingError.active=!0);cc.director.loadScene("main")})},i([a({type:cc.Node})],e.prototype,"loadingIcon",void 0),i([a({type:cc.Node})],e.prototype,"loadingError",void 0),i([a({type:cc.Label})],e.prototype,"progress",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./EventMgr"),c=t("../Defines"),s=cc._decorator,a=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.prevPosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e.isHold=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(t){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchMove=function(t){this.position=t.touch.getLocation(),r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.instance=null,e=o=i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../Defines":"Defines","./EventMgr":"EventMgr"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"2d4afTuZMtEMrP5rpbFpmae","Loading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Defines"),c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return n(e,t),e.prototype.update=function(t){this.icon.angle-=2*r.default.GAME_BASE_SPEED*t},i([a(cc.Node)],e.prototype,"icon",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Defines":"Defines"}],ML5Wrapper:[function(t,e,o){"use strict";cc._RF.push(e,"20114E7oaRPHrR5hNQHODla","ML5Wrapper");var n=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function c(t){try{a(n.next(t))}catch(t){r(t)}}function s(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){t.done?o(t.value):i(t.value).then(c,s)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.Init=function(t){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,window.ml5.poseNet(t)];case 1:return[2,e.sent()]}})})},t}();o.default=r,cc._RF.pop()},{}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"351efv7WZBKH6uOJ8Wks8g4","MainMenu");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../core/Timer"),c=t("../Settings"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slogun=null,e.play=null,e.sound=null,e.soundSprites=[],e.timerBlink=new r.default,e}return n(e,t),e.prototype.start=function(){this.timerBlink.SetDuration(2)},e.prototype.update=function(t){},e.prototype.Show=function(t){this.slogun.setPosition(0,cc.winSize.height/2),cc.tween(this.slogun).to(1,{position:cc.v3(0,220,0)},{easing:"sineOut"}).start(),this.play.node.setPosition(0,-cc.winSize.height/2),cc.tween(this.play.node).to(1,{position:cc.v3(0,-250,0)},{easing:"sineOut"}).call(function(){return t()}).start()},e.prototype.Hide=function(){cc.tween(this.slogun).stop(),cc.tween(this.slogun).to(.5,{position:cc.v3(0,cc.winSize.height/2,0)},{easing:"sineIn"}).start(),cc.tween(this.play.node).stop(),cc.tween(this.play.node).to(.5,{position:cc.v3(0,-cc.winSize.height/2,0)},{easing:"sineIn"}).start()},e.prototype.SwitchSound=function(){c.default.useSound=!c.default.useSound,c.default.useSound?this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[0]:this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[1]},i([u(cc.Node)],e.prototype,"slogun",void 0),i([u(cc.Label)],e.prototype,"play",void 0),i([u(cc.Sprite)],e.prototype,"sound",void 0),i([u([cc.SpriteFrame])],e.prototype,"soundSprites",void 0),e=i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Settings":"Settings","../core/Timer":"Timer"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"d652cNzqgJBcZvh21QthUXO","Player");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./core/EventMgr"),a=t("./Collectible"),u=t("./Settings"),p=cc._decorator,l=p.ccclass,f=p.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.WIN=4]="WIN",t[t.DEAD=5]="DEAD",t[t.LANDING=6]="LANDING"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioHitObstacle=null,e.audioHitCoin=null,e.target=null,e.flyOffset={y:-1},e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:this.startX>cc.winSize.width/4&&(this.startX-=.5*c.default.GAME_BASE_SPEED*t,this.startX<cc.winSize.width/4&&(this.startX=cc.winSize.width/4)),null!=this.target&&this.node.setPosition(this.node.position.lerp(this.target,.2));break;case r.WIN:this.node.setPosition(this.node.position.lerp(cc.v3(cc.winSize.width/2,cc.winSize.height/2,0),t));break;case r.DEAD:this.node.angle=cc.misc.lerp(this.node.angle,0,.1);break;case r.LANDING:this.node.angle=cc.misc.lerp(this.node.angle,0,1)}this.state!=r.INIT&&this.state!=r.WIN&&(this.flyOffset.y=0),this.node.setPosition(cc.Camera.main.node.position.x+this.startX,this.node.position.y+this.flyOffset.y)},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:this.startX=cc.winSize.width/2,this.node.setPosition(this.startX,cc.winSize.height/2),this.node.angle=30,cc.tween(this.flyOffset).repeatForever(cc.tween(this.flyOffset).to(1,{y:1}).to(1,{y:-1})).start();break;case r.PLAYING:case r.PAUSE:break;case r.RESUME:this.state=r.PLAYING;break;case r.WIN:this.node.angle=30;break;case r.DEAD:u.default.useSound&&this.audioHitObstacle.play();break;case r.LANDING:}},e.prototype.SetTarget=function(t){this.target=t},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Pause=function(){this.SetState(r.PAUSE)},e.prototype.Resume=function(){this.SetState(r.RESUME)},e.prototype.Win=function(){this.SetState(r.WIN)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.IsLanding=function(){return this.state==r.LANDING},e.prototype.onCollisionEnter=function(t,e){if(this.state==r.PLAYING){var o=null;if(t.tag!=c.CollisionTag.OBSTACLE&&(o=t.node.parent.getComponent(a.default)),null!=o){if(o.isCollected)return;o.Collect()}switch(t.tag){case c.CollisionTag.OBSTACLE:this.Dead(),s.EventMgr.instance.emit(c.GameEvent.LOSE);break;case c.CollisionTag.COIN:u.default.useSound&&this.audioHitCoin.play(),s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.COIN);break;case c.CollisionTag.PEPCOIN:u.default.useSound&&this.audioHitCoin.play(),s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.PEPCOIN)}}},i([f({type:cc.AudioSource})],e.prototype,"audioHitObstacle",void 0),i([f({type:cc.AudioSource})],e.prototype,"audioHitCoin",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./Settings":"Settings","./core/EventMgr":"EventMgr"}],PopupCoin:[function(t,e,o){"use strict";cc._RF.push(e,"4b8dbx0F+1EK4gLUoDKA4c0","PopupCoin");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.highCoin=null,e.turn=null,e.retry=null,e.store=null,e.new=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetInfo=function(t,e,o){this.highCoin.string=t>e?""+t:""+e,this.coin.string=""+t,this.turn.string=o>0?"B\u1ea1n c\xf2n "+o+" l\u01b0\u1ee3t ch\u01a1i":"B\u1ea1n \u0111\xe3 h\u1ebft l\u01b0\u1ee3t ch\u01a1i",this.new.active=t>e,this.retry.active=o>0,this.store.active=!this.retry.active},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},i([s({type:cc.Label})],e.prototype,"coin",void 0),i([s({type:cc.Label})],e.prototype,"highCoin",void 0),i([s({type:cc.Label})],e.prototype,"turn",void 0),i([s({type:cc.Node})],e.prototype,"retry",void 0),i([s({type:cc.Node})],e.prototype,"store",void 0),i([s({type:cc.Node})],e.prototype,"new",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopupError:[function(t,e,o){"use strict";cc._RF.push(e,"d4675oSmoFCYbZsUn1UOBSA","PopupError");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.buttonSprite=null,e.message=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetMessage=function(t){this.message.string=t},e.prototype.Show=function(t){this.buttonSprite.spriteFrame=this.sprites[t-1],this.node.active=!0},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},i([s({type:[cc.SpriteFrame]})],e.prototype,"sprites",void 0),i([s({type:cc.Sprite})],e.prototype,"buttonSprite",void 0),i([s({type:cc.Label})],e.prototype,"message",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Scrollable:[function(t,e,o){"use strict";cc._RF.push(e,"57b7aKPTL1GaKtvIwp9ztlP","Scrollable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,u=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.DEAD=3]="DEAD"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e.overlapOffset=2,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:for(var e=cc.Camera.main.node.position,o=0;o<this.sprites.length;o++)e.x-this.sprites[o].position.x-this.node.position.x>=this.sprites[o].width-this.overlapOffset&&(this.sprites[o].setPosition(this.sprites[this.lastIndex].position.x+this.sprites[this.lastIndex].width-this.overlapOffset,this.sprites[o].position.y),this.lastIndex++,this.lastIndex==this.sprites.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x+this.speed*c.default.GAME_BASE_SPEED*t,this.node.position.y);break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:for(var e=0,o=0;o<this.sprites.length;o++)this.sprites[o].setPosition(e,this.sprites[o].position.y),e+=this.sprites[o].width-this.overlapOffset;this.lastIndex=this.sprites.length-1,this.node.setPosition(0,this.node.position.y);break;case r.PLAYING:case r.DEAD:}},e.prototype.SetTheme=function(t){for(var e=0;e<this.sprites.length;e++)this.sprites[e].getComponent(cc.Sprite).spriteFrame=t[e]},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.Pause=function(){this.SetState(r.PAUSE)},e.prototype.Resume=function(){this.state=r.PLAYING},i([u({type:[cc.Node]})],e.prototype,"sprites",void 0),i([u({type:cc.Float})],e.prototype,"speed",void 0),e=i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Defines":"Defines"}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"407108dGK9E7Zg4Zj6ToW2S","Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.useSound=!0}}()),cc._RF.pop()},{}],SimpleFaceDetect:[function(t,e,o){"use strict";cc._RF.push(e,"03f518hEaRAnaBCBt2xkN8Y","SimpleFaceDetect"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){function t(){}return t.prototype.Init=function(){var t=window.pico,e=t.instantiate_detection_memory(5),o=function(t,e,o,n,i){return-1};fetch("libs/picojs/models/facefinder").then(function(e){e.arrayBuffer().then(function(e){var n=new Int8Array(e);o=t.unpack_cascade(n),console.log("* facefinder loaded")})});var n=document.getElementById("VideoCanvas"),i=n.getContext("2d");function r(t,e,o){for(var n=new Uint8Array(e*o),i=0;i<e;++i)for(var r=0;r<o;++r)n[i*o+r]=(2*t[4*i*o+4*r+0]+7*t[4*i*o+4*r+1]+1*t[4*i*o+4*r+2])/10;return n}return function(c){var s={x:0,y:0,width:c.videoWidth,height:c.videoHeight},a=s.height/window.innerHeight;n.width=window.innerWidth*a,n.height=s.height;var u=(s.width-n.width)/2;console.log(c.videoWidth,c.videoHeight),i.drawImage(c,u,0,n.width,n.height,0,0,n.width,n.height);var p={pixels:r(i.getImageData(s.x,s.y,s.width,s.height).data,s.width,s.height),nrows:s.height,ncols:s.width,ldim:s.width},l=t.run_cascade(p,o,{shiftfactor:.1,minsize:100,maxsize:1e3,scalefactor:1.1});l=e(l),l=t.cluster_detections(l,.2);for(var f=0;f<l.length;++f)l[f][3]>50&&(i.beginPath(),i.arc(l[f][1],l[f][0],l[f][2]/2,0,2*Math.PI,!1),i.lineWidth=3,i.strokeStyle="red",i.stroke())}},t}()),cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();o.default=n,cc._RF.pop()},{}],VideoCamera:[function(t,e,o){"use strict";cc._RF.push(e,"5ee6ceeKBRDX7drvjupA0Ys","VideoCamera");var n=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function c(t){try{a(n.next(t))}catch(t){r(t)}}function s(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){t.done?o(t.value):i(t.value).then(c,s)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.Setup=function(){return n(this,void 0,void 0,function(){var t,e;return i(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");return t=document.getElementById("Video"),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})];case 1:return e=o.sent(),t.srcObject=e,t.style.display="none",[2,new Promise(function(e,o){t.onloadedmetadata=function(){e(t)}})]}})})},t.prototype.Init=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.Setup()];case 1:return(t=e.sent()).play(),[2,t]}})})},t}();o.default=r,cc._RF.pop()},{}]},{},["API","Collectible","CollectibleMgr","Defines","GameMgr","Init","Player","Scrollable","Settings","SimpleFaceDetect","VideoCamera","EventMgr","Input","Timer","ML5Wrapper","Ingame","Loading","MainMenu","PopupCoin","PopupError"]);