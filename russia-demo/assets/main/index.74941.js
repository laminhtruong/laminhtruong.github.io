System.register("chunks:///_virtual/QRScan.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(e){"use strict";var n,t,r,i,o,a,c,s,u,l,p,f,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.defineProperty,a=e.asyncToGenerator},function(e){c=e.cclegacy,s=e._decorator,u=e.Label,l=e.Component},function(e){p=e.default},function(e){f=e.EventName,d=e.ActionQrScan}],execute:function(){var h,v,S,m,y;c._RF.push({},"1a33efXlGJMr5EXS/ugZcP6","QRScan",void 0);var g=s.ccclass,R=s.property;e("QRScan",(h=g("QRScan"),v=R(u),h((y=n((m=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return n=e.call.apply(e,[this].concat(a))||this,r(i(n),"textScan",y,i(n)),o(i(n),"scanner",void 0),o(i(n),"videoDom",void 0),n}t(n,e);var c=n.prototype;return c.start=function(){},c.update=function(e){},c.DoScan=function(e){this.videoDom=e,null!=this.videoDom&&this.Scan(this.videoDom)},c.OnClose=function(){null!=this.scanner&&this.scanner.stop(),p.GetInstance().emit(f.QR_SCAN,{action:d.CLOSE,data:{}})},c.Scan=function(){var e=a(regeneratorRuntime.mark((function e(n){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new window.ZXingBrowser.BrowserQRCodeReader,e.next=3,t.decodeFromVideoElement(n,(function(e,n){e&&(r.textScan.string=e)}));case 3:this.scanner=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),n}(l)).prototype,"textScan",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=m))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts","./QRScan.ts","./ARExperience.ts","./ARMask.ts","./CameraAccess.ts","./Menu.ts","./Minigame.ts","./PopupAgeGate.ts","./VideoCamera.ts"],(function(e){"use strict";var t,i,a,n,c,s,o,r,A,u,h,l,v,E,p,S,M,f,C,d,R,m,w,N,g,I,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,c=e.defineProperty},function(e){s=e.cclegacy,o=e._decorator,r=e.sys,A=e.Component},function(e){u=e.default},function(e){h=e.Profiles,l=e.EventName,v=e.ActionCameraAccess,E=e.ActionAgeGate,p=e.ActionArExperience,S=e.ActionMinigame,M=e.ActionArMask,f=e.ActionMenu,C=e.ActionQrScan},function(e){d=e.QRScan},function(e){R=e.ARExperience},function(e){m=e.ARMask},function(e){w=e.CameraAccess},function(e){N=e.Menu},function(e){g=e.Minigame},function(e){I=e.PopupAgeGate},function(e){G=e.default}],execute:function(){var _,b,P,y,k,O,T,Q,U,x,z,X,K,L,D,F,H;s._RF.push({},"51fd1TmygNPvp0NdY1f8rw0","GameMgr",void 0);var J,Y=o.ccclass,j=o.property;!function(e){e[e.INIT=0]="INIT",e[e.CAMERA_ACCESS=1]="CAMERA_ACCESS",e[e.AR_EXPERIENCE=2]="AR_EXPERIENCE",e[e.AGE_INPUT=3]="AGE_INPUT",e[e.MINIGAME=4]="MINIGAME",e[e.AR_MASK=5]="AR_MASK",e[e.MENU=6]="MENU",e[e.QR_SCAN=7]="QR_SCAN"}(J||(J={}));e("GameMgr",(_=Y("GameMgr"),b=j(w),P=j(R),y=j(g),k=j(m),O=j(N),T=j(d),Q=j(I),_((z=t((x=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,a(n(t),"viewCameraAccess",z,n(t)),a(n(t),"viewARExperience",X,n(t)),a(n(t),"viewMinigame",K,n(t)),a(n(t),"viewARMask",L,n(t)),a(n(t),"viewMenu",D,n(t)),a(n(t),"viewQRScan",F,n(t)),a(n(t),"popupAgeGate",H,n(t)),c(n(t),"state",void 0),c(n(t),"videoCamera",new G),c(n(t),"profiles",new h),t}i(t,e);var s=t.prototype;return s.start=function(){u.GetInstance().on(l.CAMERA_ACCESS,this.OnCameraAccessAction,this),u.GetInstance().on(l.AGE_GATE,this.OnAgeGateAction,this),u.GetInstance().on(l.AR_EXPERIENCE,this.OnArExperienceAction,this),u.GetInstance().on(l.MINIGAME,this.OnMinigameAction,this),u.GetInstance().on(l.AR_MASK,this.OnArMaskAction,this),u.GetInstance().on(l.MENU,this.OnMenuAction,this),u.GetInstance().on(l.QR_SCAN,this.OnQrScanAction,this),this.SetState(J.INIT)},s.update=function(e){switch(this.state){case J.INIT:case J.MENU:case J.MINIGAME:case J.AGE_INPUT:case J.AR_EXPERIENCE:case J.AR_MASK:}},s.SetState=function(e){switch(this.state=e,this.state){case J.INIT:this.LoadProfile(),this.SetState(J.CAMERA_ACCESS);break;case J.CAMERA_ACCESS:this.viewCameraAccess.node.active=!0;break;case J.AR_EXPERIENCE:this.videoCamera.Play(),this.viewARExperience.node.active=!0;break;case J.AGE_INPUT:this.popupAgeGate.Show();break;case J.MINIGAME:this.videoCamera.Stop(),this.viewMinigame.node.active=!0;break;case J.AR_MASK:this.videoCamera.Play(),this.viewARMask.DoSetup(this.videoCamera.video),this.viewARMask.node.active=!0;break;case J.MENU:this.viewMenu.node.active=!0;break;case J.QR_SCAN:this.videoCamera.Play(),this.viewQRScan.DoScan(this.videoCamera.video),this.viewQRScan.node.active=!0}},s.LoadProfile=function(){try{var e=JSON.parse(r.localStorage.getItem("profiles"));null!=e&&(this.profiles=e)}catch(e){}},s.SaveProfiles=function(){r.localStorage.setItem("profiles",JSON.stringify(this.profiles))},s.OnCameraAccessAction=function(e){var t=this,i=e.action;e.data;switch(i){case v.ACCEPT:this.videoCamera.Setup().then((function(e){t.viewCameraAccess.node.active=!1,t.SetState(J.AR_EXPERIENCE)})).catch((function(e){}))}},s.OnAgeGateAction=function(e){var t=this,i=e.action,a=e.data;switch(i){case E.ACCEPT:this.profiles.userinfos.age=a.age,this.profiles.userinfos.gender=a.gender,this.SaveProfiles(),this.popupAgeGate.Hide((function(){t.SetState(J.MINIGAME)}))}},s.OnArExperienceAction=function(e){var t=e.action;e.data;switch(t){case p.NEXT:this.viewARExperience.node.active=!1,0==this.profiles.userinfos.age?this.SetState(J.AGE_INPUT):this.SetState(J.MINIGAME)}},s.OnMinigameAction=function(e){var t=this,i=e.action;e.data;switch(i){case S.UNLOCK:this.videoCamera.Setup("user").then((function(e){t.viewMinigame.node.active=!1,t.SetState(J.AR_MASK)})).catch((function(e){}));break;case S.MENU:this.viewMinigame.node.active=!1,this.SetState(J.MENU);break;case S.REPLAY:}},s.OnArMaskAction=function(e){var t=e.action;e.data;switch(t){case M.NEXT:this.videoCamera.Stop(),this.viewARMask.node.active=!1,this.SetState(J.MENU)}},s.OnMenuAction=function(e){var t=this,i=e.action;e.data;switch(i){case f.SCAN:this.videoCamera.Setup().then((function(e){t.viewMenu.node.active=!1,t.SetState(J.QR_SCAN)})).catch((function(e){}))}},s.OnQrScanAction=function(e){var t=e.action;e.data;switch(t){case C.CLOSE:this.viewQRScan.node.active=!1,this.SetState(J.MENU)}},t}(A)).prototype,"viewCameraAccess",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(x.prototype,"viewARExperience",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(x.prototype,"viewMinigame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(x.prototype,"viewARMask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(x.prototype,"viewMenu",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(x.prototype,"viewQRScan",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(x.prototype,"popupAgeGate",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=x))||U));s._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(t){"use strict";var n,e,o,r,c,u,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){c=t.default},function(t){u=t.EventName,i=t.ActionMenu}],execute:function(){var s;e._RF.push({},"5aba5DZbFBJrosr5qgJdzZh","Menu",void 0);var a=o.ccclass;o.property,t("Menu",a("Menu")(s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.OnScan=function(){c.GetInstance().emit(u.MENU,{action:i.SCAN,data:{}})},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ARMask.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(e){"use strict";var t,i,n,a,r,c,o,s,l,u,p,f,h,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.defineProperty},function(e){c=e.cclegacy,o=e._decorator,s=e.Camera,l=e.Node,u=e.view,p=e.Vec3,f=e.Component},function(e){h=e.default},function(e){d=e.EventName,v=e.ActionArMask}],execute:function(){var g,w,y,M,m,I,E;c._RF.push({},"6340cEMwIFKj6xOiw4bdfgd","ARMask",void 0);var b=o.ccclass,k=o.property;e("ARMask",(g=b("ARMask"),w=k(s),y=k(l),g((I=t((m=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return t=e.call.apply(e,[this].concat(c))||this,n(a(t),"camera",I,a(t)),n(a(t),"faceMask",E,a(t)),r(a(t),"isInit",!1),t}i(t,e);var c=t.prototype;return c.start=function(){},c.onDisable=function(){window.JEELIZFACEFILTER.toggle_pause(!0,!1)},c.update=function(e){},c.DoSetup=function(e){var t=this,i=window.JEELIZFACEFILTER;this.isInit?i.toggle_pause(!1,!1):i.init({videoSettings:{flip:!0},videoElement:e,canvasId:"ar-canvas",NNCPath:"./libs/jeeliz/nn/",callbackReady:function(e,n){if(!e){var a=u.getVisibleSize(),r=n.canvasElement;r.style.width=window.innerWidth+"px",r.style.height=window.innerHeight+"px",r.width=a.width,r.height=a.height,i.resize(),t.isInit=!0}},callbackTrack:function(e){i.render_video(),t.Sync(t.faceMask,e)}})},c.Sync=function(e,t){e.active=t.detected>.85;var i=Math.tan(this.camera.camera.aspect*this.camera.fov*Math.PI/360),n=1/(2*t.s*i),a=-n-.5,r=t.x*n*i,c=t.y*n*i/this.camera.camera.aspect;e.position=new p(r,c,a),e.eulerAngles=new p(180*t.rx/Math.PI,180*t.ry/Math.PI,180*t.rz/Math.PI)},c.OnNext=function(){h.GetInstance().emit(d.AR_MASK,{action:v.NEXT,data:{}})},t}(f)).prototype,"camera",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(m.prototype,"faceMask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=m))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,i;return{setters:[function(e){n=e.defineProperty},function(e){i=e.cclegacy}],execute:function(){var t,c,o,A,r,a,s,E;e({ActionAgeGate:void 0,ActionArExperience:void 0,ActionArMask:void 0,ActionCameraAccess:void 0,ActionMenu:void 0,ActionMinigame:void 0,ActionQrScan:void 0,EventName:void 0}),i._RF.push({},"71218fYhlJHzoDWjLv2DGMl","Defines",void 0),function(e){e.CAMERA_ACCESS="event_camera_access",e.AGE_GATE="event_age_gate",e.AR_EXPERIENCE="event_ar_experience",e.MINIGAME="event_minigame",e.AR_MASK="event_ar_mask",e.MENU="event_menu",e.QR_SCAN="event_ar_scan"}(t||(t=e("EventName",{}))),function(e){e[e.ACCEPT=0]="ACCEPT"}(c||(c=e("ActionCameraAccess",{}))),function(e){e[e.ACCEPT=0]="ACCEPT"}(o||(o=e("ActionAgeGate",{}))),function(e){e[e.NEXT=0]="NEXT"}(A||(A=e("ActionArExperience",{}))),function(e){e[e.UNLOCK=0]="UNLOCK",e[e.MENU=1]="MENU",e[e.REPLAY=2]="REPLAY"}(r||(r=e("ActionMinigame",{}))),function(e){e[e.NEXT=0]="NEXT"}(a||(a=e("ActionArMask",{}))),function(e){e[e.SCAN=0]="SCAN"}(s||(s=e("ActionMenu",{}))),function(e){e[e.CLOSE=0]="CLOSE"}(E||(E=e("ActionQrScan",{})));var u=e("UserInfos",(function(){n(this,"age",0),n(this,"gender","")}));e("Profiles",(function(){n(this,"userinfos",new u)}));i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraAccess.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(t){"use strict";var e,c,n,s,r,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,n=t._decorator,s=t.Component},function(t){r=t.default},function(t){a=t.EventName,o=t.ActionCameraAccess}],execute:function(){var i;c._RF.push({},"760c8nm/YRFbreTY7hz9+VO","CameraAccess",void 0);var u=n.ccclass;n.property,t("CameraAccess",u("CameraAccess")(i=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var n=c.prototype;return n.start=function(){},n.OnAccept=function(){r.GetInstance().emit(a.CAMERA_ACCESS,{action:o.ACCEPT,data:{}})},c}(s))||i);c._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.director,r=e.Director}],execute:function(){e("SaveScreenShoot",(function(e,t){n.on(r.EVENT_AFTER_DRAW,(function a(){var c=document.getElementById("GameCanvas"),i=c.getContext("experimental-webgl",{preserveDrawingBuffer:!0}),o=c.width,s=c.height,u=document.getElementById("CaptureCanvas");null==u&&((u=document.createElement("canvas")).id="CaptureCanvas",u.width=o,u.height=s);var l=function(e){return 2*parseFloat(e.replace("px",""))},d=u.getContext("2d");d.drawImage(e,l(e.style.marginLeft),0,l(e.style.width),l(e.style.height)),d.drawImage(i.canvas,0,0,o,s),u.toBlob((function(e){t(URL.createObjectURL(e))})),n.off(r.EVENT_AFTER_DRAW,a)}))})),t._RF.push({},"7eed77biFxGRo9DjUNAqrY1","Utils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ARExperience.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(e){"use strict";var t,n,r,c,i,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,c=e.Component},function(e){i=e.default},function(e){o=e.EventName,s=e.ActionArExperience}],execute:function(){var u;n._RF.push({},"82044MShsVP+aWlVWp1qKm0","ARExperience",void 0);var a=r.ccclass;r.property,e("ARExperience",a("ARExperience")(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.OnNext=function(){i.GetInstance().emit(o.AR_EXPERIENCE,{action:s.NEXT,data:{}})},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Minigame.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(n){"use strict";var t,e,i,c,a,o,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,c=n.Component},function(n){a=n.default},function(n){o=n.EventName,u=n.ActionMinigame}],execute:function(){var r;e._RF.push({},"82f801uYvhLjJGu+OmdfkFW","Minigame",void 0);var s=i.ccclass;i.property,n("Minigame",s("Minigame")(r=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var i=e.prototype;return i.start=function(){},i.OnUnlock=function(){a.GetInstance().emit(o.MINIGAME,{action:u.UNLOCK,data:{}})},i.OnMenu=function(){a.GetInstance().emit(o.MINIGAME,{action:u.MENU,data:{}})},i.OnReplay=function(){a.GetInstance().emit(o.MINIGAME,{action:u.REPLAY,data:{}})},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.defineProperty},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"83182rhGv5E5o+cQT5d7b3o","Timer",void 0);t("default",function(){function t(){i(this,"timer",0),i(this,"duration",0),i(this,"overhead",0),i(this,"isDone",!0)}var e=t.prototype;return e.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},e.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},e.GetTimePercent=function(){return this.timer/this.duration},e.IsDone=function(){return 0==this.timer},e.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},e.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},e.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupAgeGate.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(e){"use strict";var t,n,i,o,a,l,r,s,c,g,u,p,h,d,f,C,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Node,s=e.EditBox,c=e.Toggle,g=e.Vec3,u=e.tween,p=e.UITransform,h=e.view,d=e.Component},function(e){f=e.default},function(e){C=e.EventName,b=e.ActionAgeGate}],execute:function(){var m,A,v,y,E,w,T,G,M,O,k;a._RF.push({},"8cff2rohshCOZeZrmZHXJEp","PopupAgeGate",void 0);var z=l.ccclass,F=l.property;e("PopupAgeGate",(m=z("PopupAgeGate"),A=F(r),v=F(s),y=F(c),E=F(c),m((G=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(o(t),"nodeContainer",G,o(t)),i(o(t),"editboxAge",M,o(t)),i(o(t),"toggleMale",O,o(t)),i(o(t),"toggleFemale",k,o(t)),t}n(t,e);var a=t.prototype;return a.onEnable=function(){this.nodeContainer.setScale(new g(0,0,1)),u(this.nodeContainer).to(.5,{scale:new g(1,1,1)},{easing:"elasticOut"}).start()},a.start=function(){this.editboxAge.node.on(s.EventType.TEXT_CHANGED,this.OnAge,this),this.toggleMale.node.on(c.EventType.CLICK,this.OnMaleCheck,this),this.toggleFemale.node.on(c.EventType.CLICK,this.OnFemaleCheck,this)},a.Show=function(){this.node.active=!0,this.node.getComponent(p).contentSize=h.getVisibleSize()},a.Hide=function(e){var t=this;u(this.nodeContainer).to(.5,{scale:new g(0,0,1)},{easing:"elasticIn"}).call((function(){t.node.active=!1,e()})).start()},a.OnAge=function(e){console.log(e.string)},a.OnMaleCheck=function(e){this.toggleFemale.isChecked=!1},a.OnFemaleCheck=function(e){this.toggleMale.isChecked=!1},a.OnAccept=function(){var e=this.editboxAge.string,t="";t=this.toggleMale.isChecked?"male":"female",f.GetInstance().emit(C.AGE_GATE,{action:b.ACCEPT,data:{age:e,gender:t}})},t}(d)).prototype,"nodeContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(T.prototype,"editboxAge",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(T.prototype,"toggleMale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(T.prototype,"toggleFemale",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=T))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/VideoCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n;return{setters:[function(e){t=e.defineProperty,i=e.asyncToGenerator},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"9578axkwt9GiKmMk2GWznXK","VideoCamera",void 0);e("default",function(){function e(){t(this,"video",void 0),t(this,"faceMode",void 0)}var n=e.prototype;return n.Setup=function(){var e=i(regeneratorRuntime.mark((function e(t){var i,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="environment"),this.faceMode!=t){e.next=3;break}return e.abrupt("return",Promise.resolve(this.video));case 3:if(this.faceMode=t,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=6;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 6:return i=document.getElementById("video"),n={audio:!1,video:{facingMode:t,width:{ideal:640},height:{ideal:480}}},e.next=10,navigator.mediaDevices.getUserMedia(n);case 10:return r=e.sent,i.srcObject=r,i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","playsinline"),i.setAttribute("muted",""),i.style.width="640px",i.style.height="480px",i.style.display="none",e.abrupt("return",new Promise((function(e,t){a.video=i,i.onloadedmetadata=function(){a.Resize(i),e(i)}})));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.Play=function(){null!=this.video&&(this.video.play(),this.video.style.display="block")},n.Stop=function(){null!=this.video&&(this.video.pause(),this.video.style.display="none")},n.Resize=function(e){var t=window.innerWidth,i=window.innerHeight,n=e.videoWidth/e.videoHeight;if(t/i<n){var r=n*i;e.style.width=r+"px",e.style.marginLeft=-(r-t)/2+"px",e.style.height=i+"px",e.style.marginTop="0px"}else{var a=1/(n/t);e.style.height=a+"px",e.style.marginTop=-(a-i)/2+"px",e.style.width=t+"px",e.style.marginLeft="0px"}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonAnimation.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,s,r,a,c,u,h;return{setters:[function(t){n=t.inheritsLoose,e=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.Button,a=t.SystemEventType,c=t.tween,u=t.Vec3,h=t.Component}],execute:function(){var l;i._RF.push({},"b6c86ctuXRPcLzn3oKgTYSy","ButtonAnimation",void 0);var p=s.ccclass;s.property,t("ButtonAnimation",p("ButtonAnimation")(l=function(t){function i(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(o(n),"tweenAnimation",void 0),n}n(i,t);var s=i.prototype;return s.start=function(){this.getComponent(r);this.node.on(a.TOUCH_START,this.OnTouchMove,this)},s.OnTouchMove=function(t){var n=t.touch;n&&(this.node._uiProps.uiTransformComp.isHit(n.getUILocation())&&(null!=this.tweenAnimation&&this.tweenAnimation.stop(),this.tweenAnimation=c(this.node).to(.25,{scale:new u(1.2,.8,1)},{easing:"elasticIn"}).to(.25,{scale:new u(1,1,1)},{easing:"elasticOut"}).start()))},i}(h))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/Utils2.ts",["cc"],(function(e){"use strict";var t,n,r,a;return{setters:[function(e){t=e.cclegacy,n=e.assetManager,r=e.SpriteFrame,a=e.Texture2D}],execute:function(){e({GetSpriteFrameFromUrl:function(e){return new Promise((function(t,i){n.loadRemote(e,{ext:".png",xhrMimeType:"image/png"},(function(e,n){if(e)i(null);else{var o=new r,u=new a;u.image=n,o.texture=u,t(o)}}))}))},Random:function(e,t){return Math.random()*(t-e)+e},RandomInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}),t._RF.push({},"ceaaasKiCFOKJzHWmAeEI8E","Utils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,i,s;return{setters:[function(n){t=n.inheritsLoose,e=n.defineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,s=n.EventTarget}],execute:function(){i._RF.push({},"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr",void 0);n("default",new(function(n){function i(){for(var t,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return t=n.call.apply(n,[this].concat(s))||this,e(r(t),"instance",null),t}return t(i,n),i.prototype.GetInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i}(s)));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./EventMgr.ts","./Defines.ts","./QRScan.ts","./ARExperience.ts","./ARMask.ts","./CameraAccess.ts","./Menu.ts","./Minigame.ts","./PopupAgeGate.ts","./VideoCamera.ts","./GameMgr.ts","./Utils.ts","./Timer.ts","./ButtonAnimation.ts","./Utils2.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});