window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({API:[function(t,e,o){"use strict";cc._RF.push(e,"519a1UFF4ZBy4cfQ0vO+vLe","API");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,r=function(){function t(){}var e;return e=t,t.Request=function(t,e,o){var n=window.userParams;return new Promise(function(i,r){var c=new XMLHttpRequest;c.open(t,n.api+e,!0),c.setRequestHeader("Content-type","application/json"),c.setRequestHeader("Authorization",n.authorization),c.setRequestHeader("TenantId",n.tenantId),c.setRequestHeader("CampaignId",n.campaignId),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?i(c.response):r(c.response))},c.send(o)})},t.StartGame=function(t){var o={turnType:t};return e.Request("post","/StartGame",JSON.stringify(o))},t.EndGame=function(t,o){var n={transactionCode:t,coin:o,hash:window.sha1(""+t+o+window.userParams.shareKey)};return e.Request("post","/EndGame",JSON.stringify(n))},t=e=n([i],t)}();o.default=r,cc._RF.pop()},{}],Background:[function(t,e,o){"use strict";cc._RF.push(e,"6e764ZUFgBH8ZpqG+AVELqN","Background");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c,s,a=t("./Scrollable"),p=t("./Defines"),u=cc._decorator,l=u.ccclass,h=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.DEAD=4]="DEAD"})(r||(r={})),function(t){t[t.CLOUD_BIG=0]="CLOUD_BIG",t[t.CLOUND_SMALL=1]="CLOUND_SMALL",t[t.BACKGROUND=2]="BACKGROUND",t[t.FOREGROUND=3]="FOREGROUND",t[t.DECORATION=4]="DECORATION",t[t.GROUND=5]="GROUND"}(c||(c={})),function(t){t[t.GROUND=0]="GROUND",t[t.DECORATION_01=1]="DECORATION_01",t[t.DECORATION_02=2]="DECORATION_02",t[t.BACKGROUND=3]="BACKGROUND",t[t.FOREGROUND=4]="FOREGROUND",t[t.TUBE=5]="TUBE"}(s||(s={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sky=null,e.forest=[],e.city=[],e.beach=[],e.scrollables=[],e}return n(e,t),e.prototype.update=function(t){var e=cc.Camera.main.node.position;this.sky.setPosition(e)},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:for(var e=0;e<this.scrollables.length;e++)this.scrollables[e].Init();break;case r.PLAYING:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Play();break;case r.PAUSE:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Pause();break;case r.RESUME:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Resume();break;case r.DEAD:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Dead()}},e.prototype.SetTheme=function(t){var e=null;switch(t){case p.THEME.FOREST:e=this.forest;break;case p.THEME.CITY:e=this.city;break;case p.THEME.BEACH:e=this.beach}this.scrollables[c.BACKGROUND].SetTheme([e[s.BACKGROUND],e[s.BACKGROUND],e[s.BACKGROUND]]),this.scrollables[c.FOREGROUND].SetTheme([e[s.FOREGROUND],e[s.FOREGROUND],e[s.FOREGROUND]]),this.scrollables[c.DECORATION].SetTheme([e[s.DECORATION_01],e[s.DECORATION_02],e[s.DECORATION_01]]),this.scrollables[c.GROUND].SetTheme([e[s.GROUND],e[s.GROUND],e[s.GROUND]])},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.Pause=function(){this.SetState(r.PAUSE)},e.prototype.Resume=function(){this.SetState(r.RESUME)},i([h({type:cc.Node})],e.prototype,"sky",void 0),i([h({type:[cc.SpriteFrame]})],e.prototype,"forest",void 0),i([h({type:[cc.SpriteFrame]})],e.prototype,"city",void 0),i([h({type:[cc.SpriteFrame]})],e.prototype,"beach",void 0),i([h({type:[a.default]})],e.prototype,"scrollables",void 0),e=i([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Defines":"Defines","./Scrollable":"Scrollable"}],CollectibleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cc4e1VIjdNCQZWkEeLAggyG","CollectibleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./Collectible"),a=cc._decorator,p=a.ccclass,u=a.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectiblePrefab=[],e.collectibles=[],e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:case r.PLAYING:case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:if(0==this.collectibles.length)for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=null;(o=e<c.default.COLLECTIBLE_MAX/2?cc.instantiate(this.collectiblePrefab[c.CollectItem.COIN]):cc.instantiate(this.collectiblePrefab[c.CollectItem.PEPCOIN])).parent=this.node,o.active=!1,this.collectibles.push(o)}else for(e=0;e<c.default.COLLECTIBLE_MAX;e++)this.collectibles[e].active=!1;this.SetState(r.PLAYING);break;case r.PLAYING:case r.DEAD:}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Spawn=function(t,e,o){var n=this.GetInactiveCollectible(t);null!=n&&n.getComponent(s.default).Spawn(e,o)},e.prototype.Hide=function(){for(var t=0;t<c.default.COLLECTIBLE_MAX;t++)this.collectibles[t].getComponent(s.default).Hide()},e.prototype.GetInactiveCollectible=function(t){for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=this.collectibles[e].getComponent(s.default);if(o.type==t&&o.IsHidden())return this.collectibles[e]}return null},i([u({type:[cc.Prefab]})],e.prototype,"collectiblePrefab",void 0),e=i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines"}],Collectible:[function(t,e,o){"use strict";cc._RF.push(e,"fa348NaP0ZPiLsfr/XupaJH","Collectible");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(r||(r={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=c.CollectItem.COIN,e.animation=null,e.isCollected=!1,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=screen.width/2&&this.SetState(r.HIDE);break;case r.HIDE:}},e.prototype.onCollected=function(){this.node.active=!1},e.prototype.SetState=function(t){switch(this.state=t,t){case r.PLAYING:this.isCollected=!1,this.node.active=!0;break;case r.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e){this.node.setPosition(t,e),this.animation.play("coin_idle"),this.SetState(r.PLAYING)},e.prototype.Collect=function(){this.isCollected=!0,this.animation.play("coin_collect")},e.prototype.Hide=function(){this.isCollected||(this.node.active=!1)},e.prototype.IsHidden=function(){return!this.node.active},i([p({type:c.CollectItem})],e.prototype,"type",void 0),i([p({type:cc.Animation})],e.prototype,"animation",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Defines:[function(t,e,o){"use strict";cc._RF.push(e,"a49cbvPOuxAKauT+47PnPv4","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.GAME_BASE_SPEED=60,this.GAME_SPEED_MIN=7,this.GAME_SPEED_MAX=12,this.GAME_SPEED_INCREASE_RATE=.25,this.OBSTACLE_DISTANCE_X=500,this.OBSTACLE_DISTANCE_X_INCREASE_RATE=25,this.OBSTACLE_DISTANCE_Y=150,this.OBSTACLE_DISTANCE_Y_INCREASE_RATE=25,this.OBSTACLE_SPACING_MIN=250,this.OBSTACLE_SPACING_MAX=400,this.OBSTACLE_SPACING_DECREASE_RATE=15,this.OBSTACLE_MAX=4,this.GROUND_Y=210,this.COLLECTIBLE_MAX=10}}()),o.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},o.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.TOUCH="TouchEvent",t.COLLECT_ITEM="CollectItem",t.LOSE="GameLose"}(o.GameEvent||(o.GameEvent={})),function(t){t[t.OBSTACLE=0]="OBSTACLE",t[t.COIN=1]="COIN",t[t.PEPCOIN=2]="PEPCOIN"}(o.CollisionTag||(o.CollisionTag={})),function(t){t[t.FOREST=0]="FOREST",t[t.CITY=1]="CITY",t[t.BEACH=2]="BEACH"}(o.THEME||(o.THEME={})),o.CollectItem=cc.Enum({COIN:0,PEPCOIN:1}),cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=null,e}(cc.EventTarget);o.EventMgr=i,i.instance=new i,cc._RF.pop()},{}],Flappy:[function(t,e,o){"use strict";cc._RF.push(e,"d652cNzqgJBcZvh21QthUXO","Flappy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./core/EventMgr"),a=t("./Collectible"),p=t("./Settings"),u=cc._decorator,l=u.ccclass,h=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.DEAD=4]="DEAD",t[t.LANDING=5]="LANDING"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidbody=null,e.audioFly=null,e.audioHitObstacle=null,e.audioHitPepcoin=null,e.flyOffset={y:-1},e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:this.startX>cc.winSize.width/4&&(this.startX-=.5*c.default.GAME_BASE_SPEED*t,this.startX<cc.winSize.width/4&&(this.startX=cc.winSize.width/4)),this.node.position.y<=c.default.GROUND_Y&&this.SetState(r.DEAD),this.UpdateAngle();break;case r.DEAD:this.node.angle=cc.misc.lerp(this.node.angle,0,.1),this.node.position.y<=c.default.GROUND_Y&&this.SetState(r.LANDING);break;case r.LANDING:this.node.angle=cc.misc.lerp(this.node.angle,0,1)}this.state!=r.INIT&&(this.flyOffset.y=0),this.node.setPosition(cc.Camera.main.node.position.x+this.startX,c.Clamp(this.node.position.y,c.default.GROUND_Y,cc.winSize.height)+this.flyOffset.y)},e.prototype.onCollisionEnter=function(t,e){if(this.state==r.PLAYING){var o=null;if(t.tag!=c.CollisionTag.OBSTACLE&&(o=t.node.parent.getComponent(a.default)),null!=o){if(o.isCollected)return;o.Collect()}switch(t.tag){case c.CollisionTag.OBSTACLE:this.Dead(),s.EventMgr.instance.emit(c.GameEvent.LOSE);break;case c.CollisionTag.COIN:p.default.useSound&&this.audioHitPepcoin.play(),s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.COIN);break;case c.CollisionTag.PEPCOIN:p.default.useSound,s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.PEPCOIN)}}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:this.startX=cc.winSize.width/2,this.node.setPosition(this.startX,cc.winSize.height/2),this.node.angle=30,this.rigidbody.type=cc.RigidBodyType.Static,this.rigidbody.active=!0,cc.tween(this.flyOffset).repeatForever(cc.tween(this.flyOffset).to(1,{y:1}).to(1,{y:-1})).start();break;case r.PLAYING:this.rigidbody.type=cc.RigidBodyType.Dynamic;break;case r.PAUSE:this.rigidbody.active=!1,this.rigidbody.type,cc.RigidBodyType.Static;break;case r.RESUME:this.rigidbody.active=!0,this.rigidbody.type,cc.RigidBodyType.Dynamic,this.state=r.PLAYING;break;case r.DEAD:p.default.useSound&&this.audioHitObstacle.play();break;case r.LANDING:this.rigidbody.type,cc.RigidBodyType.Static,this.rigidbody.active=!1}},e.prototype.UpdateAngle=function(){var t=new cc.Vec2(this.node.position.x,this.node.position.y),e=new cc.Vec2(t.x,t.y).subtract(this.rigidbody.linearVelocity),o=180*Math.atan2(t.y-e.y,c.default.GAME_SPEED_MIN)/Math.PI;o=c.Clamp(o,-10,30),this.node.angle=cc.misc.lerp(this.node.angle,o,.1)},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Pause=function(){this.SetState(r.PAUSE)},e.prototype.Resume=function(){this.SetState(r.RESUME)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.Jump=function(t){void 0===t&&(t=500),this.rigidbody.linearVelocity=new cc.Vec2(0,t),p.default.useSound&&this.audioFly.play()},e.prototype.IsLanding=function(){return this.state==r.LANDING},i([h({type:cc.RigidBody})],e.prototype,"rigidbody",void 0),i([h({type:cc.AudioSource})],e.prototype,"audioFly",void 0),i([h({type:cc.AudioSource})],e.prototype,"audioHitObstacle",void 0),i([h({type:cc.AudioSource})],e.prototype,"audioHitPepcoin",void 0),e=i([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./Settings":"Settings","./core/EventMgr":"EventMgr"}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"15fb3AUZERDaaRXtnJ70/ub","GameMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./core/EventMgr"),s=t("./Defines"),a=t("./Flappy"),p=t("./core/Input"),u=t("./Background"),l=t("./ObstacleMgr"),h=t("./ui/MainMenu"),f=t("./ui/Ingame"),d=t("./ui/PopupCoin"),y=t("./ui/PopupError"),_=t("./Settings"),v=t("./Transition"),S=t("./API"),E=t("./ui/Loading"),g=cc._decorator,O=g.ccclass,b=g.property;(function(t){t[t.INIT=0]="INIT",t[t.TOUCH_TO_PLAY=1]="TOUCH_TO_PLAY",t[t.PLAYING=2]="PLAYING",t[t.PAUSE=3]="PAUSE",t[t.RESUME=4]="RESUME",t[t.WIN=5]="WIN",t[t.LOSE_DELAY=6]="LOSE_DELAY",t[t.LOSE=7]="LOSE"})(r||(r={}));var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewMainMenu=null,e.viewIngame=null,e.viewLoading=null,e.popupCoin=null,e.popupError=null,e.transition=null,e.background=null,e.flappy=null,e.obstacleMgr=null,e.audioBgm=null,e.audioWin=null,e.audioLose=null,e.audioClick=null,e.confetti=null,e.speed=s.default.GAME_SPEED_MIN,e.speedTarget=s.default.GAME_SPEED_MIN,e.coin=0,e.highCoin=0,e.remainingTurn=0,e.turnType="",e.transactionCode="",e.theme=s.THEME.FOREST,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.transition.getComponent(v.default).fadeCallback=this.OnThemeChange.bind(this);var t=window.userParams;this.highCoin=t.highCoin,this.remainingTurn=t.remainingTurn,this.transactionCode=t.transactionCode,this.turnType=t.turnType,this.viewIngame.SetLife(this.remainingTurn)},e.prototype.start=function(){var t=this;c.EventMgr.instance.on(s.GameEvent.TOUCH,this.TouchHandler,this),c.EventMgr.instance.on(s.GameEvent.COLLECT_ITEM,this.OnScore,this),c.EventMgr.instance.on(s.GameEvent.LOSE,this.OnDead,this),cc.game.on(cc.game.EVENT_SHOW,this.GameResume,this),cc.game.on(cc.game.EVENT_HIDE,this.GamePause,this);var e=JSON.parse(cc.sys.localStorage.getItem("settings"));null!=e&&(_.default.useSound!=e.useSound&&(console.log(JSON.stringify(e)),this.viewMainMenu.SwitchSound()),_.default.useSound&&this.audioBgm.play()),this.SetState(r.INIT),S.default.StartGame(this.turnType).then(function(e){var o=JSON.parse(e);t.highCoin=o.highCoin,t.transactionCode=o.transactionCode,t.remainingTurn=o.remainingTurn,t.viewIngame.SetLife(t.remainingTurn)})},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.TOUCH_TO_PLAY:this.UpdateSpeed(t);break;case r.PLAYING:this.UpdateSpeed(t),this.flappy.IsLanding()&&this.OnDead();break;case r.LOSE_DELAY:this.flappy.IsLanding()&&this.SetState(r.LOSE)}},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case r.INIT:cc.Camera.main.node.setPosition(0,cc.Camera.main.node.position.y),_.default.useSound&&this.audioBgm.play(),this.speed=s.default.GAME_SPEED_MIN,this.speedTarget=s.default.GAME_SPEED_MIN,this.coin=0,this.background.Init(),this.obstacleMgr.Init(),this.flappy.Init(),this.viewMainMenu.Show(function(){e.SetState(r.TOUCH_TO_PLAY)}),this.viewIngame.Hide(),this.viewIngame.ResetCoin(),this.transition.setPosition(cc.Camera.main.node.position.x+cc.winSize.width/2,this.transition.position.y);break;case r.TOUCH_TO_PLAY:this.background.Play();break;case r.PLAYING:this.flappy.Play(),this.flappy.Jump(800),this.obstacleMgr.Play(),this.viewMainMenu.Hide(),this.viewIngame.Show();break;case r.LOSE_DELAY:this.flappy.Dead(),this.background.Dead(),this.obstacleMgr.Dead(),this.audioBgm.stop();break;case r.WIN:break;case r.LOSE:_.default.useSound&&this.audioLose.play(),this.viewLoading.node.active=!0,S.default.EndGame(this.transactionCode,this.coin).then(function(t){var o=JSON.parse(t);e.highCoin=o.highCoin,e.remainingTurn=o.remainingTurn,e.popupCoin.SetInfo(e.coin,e.highCoin,e.remainingTurn),e.popupCoin.node.active=!0,e.viewLoading.node.active=!1}).catch(function(t){var o=JSON.parse(t);e.popupError.SetMessage(o.message),e.popupError.node.active=!0,e.viewLoading.node.active=!1});break;case r.PAUSE:this.audioBgm.stop(),this.flappy.Pause(),this.background.Pause();break;case r.RESUME:this.audioBgm.play(),this.flappy.Resume(),this.background.Resume(),this.state=r.PLAYING}},e.prototype.UpdateSpeed=function(t){var e=cc.Camera.main.node.position;cc.Camera.main.node.setPosition(e.x+this.speed*s.default.GAME_BASE_SPEED*t,e.y),this.confetti.node.setPosition(e.x+cc.winSize.width/2,this.confetti.node.position.y),this.transition.setPosition(e.x+cc.winSize.width/2,this.transition.position.y),this.speed=cc.misc.lerp(this.speed,this.speedTarget,.1)},e.prototype.ScoreRetry=function(){var t=this;_.default.useSound&&this.audioClick.play(),this.viewLoading.node.active=!0,S.default.StartGame(this.turnType).then(function(e){var o=JSON.parse(e);t.highCoin=o.highCoin,t.transactionCode=o.transactionCode,t.remainingTurn=o.remainingTurn,t.viewIngame.SetLife(t.remainingTurn),t.viewLoading.node.active=!1,t.popupCoin.Hide(function(){t.popupCoin.node.active=!1,t.SetState(r.INIT)})}).catch(function(e){var o=JSON.parse(e);t.popupError.SetMessage(o.message),t.popupError.node.active=!0,t.viewLoading.node.active=!1})},e.prototype.ScoreHome=function(){window.parent.location.href=window.userParams.homeUrl},e.prototype.ScoreStore=function(){window.location.href=window.userParams.storeUrl},e.prototype.ErrorClose=function(){var t=this;this.popupError.Hide(function(){t.popupError.node.active=!1})},e.prototype.NextTheme=function(){this.transition.active=!0,this.obstacleMgr.Hide(),this.transition.getComponent(cc.Animation).play()},e.prototype.OnThemeChange=function(){this.theme++,this.theme>s.THEME.BEACH&&(this.theme=s.THEME.FOREST),this.background.SetTheme(this.theme),this.obstacleMgr.SetTheme(this.theme)},e.prototype.SwitchSound=function(){this.viewMainMenu.SwitchSound(),_.default.useSound?this.audioBgm.play():this.audioBgm.stop(),cc.sys.localStorage.setItem("settings",JSON.stringify(_.default))},e.prototype.OnScore=function(t){this.coin+=5,this.coin%10==0&&this.speed<s.default.GAME_SPEED_MAX&&(this.obstacleMgr.currentDistanceY+=s.default.OBSTACLE_DISTANCE_Y_INCREASE_RATE,this.obstacleMgr.currentSpacing-=s.default.OBSTACLE_SPACING_DECREASE_RATE),this.coin%30==0&&this.NextTheme(),t==s.CollectItem.PEPCOIN&&(this.coin+=5),this.viewIngame.SetCoin(this.coin)},e.prototype.OnDead=function(){this.SetState(r.LOSE_DELAY)},e.prototype.GameResume=function(){cc.game.resume()},e.prototype.GamePause=function(){this.state==r.PLAYING&&this.SetState(r.PAUSE),cc.game.pause()},e.prototype.TouchHandler=function(t){switch(this.state){case r.INIT:break;case r.TOUCH_TO_PLAY:p.default.instance.IsTouchDown(t)&&this.SetState(r.PLAYING);break;case r.PLAYING:p.default.instance.IsTouchDown(t)&&this.flappy.Jump();break;case r.PAUSE:this.SetState(r.RESUME)}},i([b({type:h.default})],e.prototype,"viewMainMenu",void 0),i([b({type:f.default})],e.prototype,"viewIngame",void 0),i([b({type:E.default})],e.prototype,"viewLoading",void 0),i([b({type:d.default})],e.prototype,"popupCoin",void 0),i([b({type:y.default})],e.prototype,"popupError",void 0),i([b({type:cc.Node})],e.prototype,"transition",void 0),i([b({type:u.default})],e.prototype,"background",void 0),i([b({type:a.default})],e.prototype,"flappy",void 0),i([b({type:l.default})],e.prototype,"obstacleMgr",void 0),i([b({type:cc.AudioSource})],e.prototype,"audioBgm",void 0),i([b({type:cc.AudioSource})],e.prototype,"audioWin",void 0),i([b({type:cc.AudioSource})],e.prototype,"audioLose",void 0),i([b({type:cc.AudioSource})],e.prototype,"audioClick",void 0),i([b({type:cc.ParticleSystem3D})],e.prototype,"confetti",void 0),e=i([O],e)}(cc.Component);o.default=I,cc._RF.pop()},{"./API":"API","./Background":"Background","./Defines":"Defines","./Flappy":"Flappy","./ObstacleMgr":"ObstacleMgr","./Settings":"Settings","./Transition":"Transition","./core/EventMgr":"EventMgr","./core/Input":"Input","./ui/Ingame":"Ingame","./ui/Loading":"Loading","./ui/MainMenu":"MainMenu","./ui/PopupCoin":"PopupCoin","./ui/PopupError":"PopupError"}],Ingame:[function(t,e,o){"use strict";cc._RF.push(e,"ce56bZ/jydEaJ9euUC2iteW","Ingame");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.life=null,e.coinCurrent=0,e.coinTarget=0,e}return n(e,t),e.prototype.update=function(t){this.coinCurrent<this.coinTarget&&(this.coinCurrent++,this.coin.string=""+this.coinCurrent)},e.prototype.SetCoin=function(t){this.coinTarget=t},e.prototype.ResetCoin=function(){this.coinCurrent=0,this.coinTarget=0,this.coin.string=""+this.coinCurrent},e.prototype.SetLife=function(t){this.life.string=""+t},e.prototype.Show=function(){this.node.active=!0},e.prototype.Hide=function(){this.node.active=!1},i([s(cc.Label)],e.prototype,"coin",void 0),i([s(cc.Label)],e.prototype,"life",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./EventMgr"),c=t("../Defines"),s=cc._decorator,a=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.prevPosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e.isHold=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(t){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchMove=function(t){this.position=t.touch.getLocation(),r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.instance=null,e=o=i([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Defines":"Defines","./EventMgr":"EventMgr"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"2d4afTuZMtEMrP5rpbFpmae","Loading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Defines"),c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return n(e,t),e.prototype.update=function(t){this.icon.angle-=2*r.default.GAME_BASE_SPEED*t},i([a(cc.Node)],e.prototype,"icon",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Defines":"Defines"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"351efv7WZBKH6uOJ8Wks8g4","MainMenu");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../core/Timer"),c=t("../Settings"),s=cc._decorator,a=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slogun=null,e.play=null,e.sound=null,e.soundSprites=[],e.timerBlink=new r.default,e}return n(e,t),e.prototype.start=function(){this.timerBlink.SetDuration(2)},e.prototype.update=function(t){},e.prototype.Show=function(t){this.slogun.setPosition(0,cc.winSize.height/2),cc.tween(this.slogun).to(1,{position:cc.v3(0,220,0)},{easing:"sineOut"}).start(),this.play.node.setPosition(0,-cc.winSize.height/2),cc.tween(this.play.node).to(1,{position:cc.v3(0,-250,0)},{easing:"sineOut"}).call(function(){return t()}).start()},e.prototype.Hide=function(){cc.tween(this.slogun).stop(),cc.tween(this.slogun).to(.5,{position:cc.v3(0,cc.winSize.height/2,0)},{easing:"sineIn"}).start(),cc.tween(this.play.node).stop(),cc.tween(this.play.node).to(.5,{position:cc.v3(0,-cc.winSize.height/2,0)},{easing:"sineIn"}).start()},e.prototype.SwitchSound=function(){c.default.useSound=!c.default.useSound,c.default.useSound?this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[0]:this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[1]},i([p(cc.Node)],e.prototype,"slogun",void 0),i([p(cc.Label)],e.prototype,"play",void 0),i([p(cc.Sprite)],e.prototype,"sound",void 0),i([p([cc.SpriteFrame])],e.prototype,"soundSprites",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Settings":"Settings","../core/Timer":"Timer"}],ObstacleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5a109teWuRAaqJ6PNqCUGCq","ObstacleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c,s=t("./Defines"),a=t("./Obstacle"),p=t("./CollectibleMgr"),u=cc._decorator,l=u.ccclass,h=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.DEAD=4]="DEAD"})(r||(r={})),function(t){t[t.TUBE=0]="TUBE",t[t.COIN=1]="COIN"}(c||(c={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstaclePrefab=null,e.collectibleMgr=null,e.obstacles=[],e.currentIndex=0,e.currentX=0,e.currentY=0,e.nextY=0,e.currentDistanceX=0,e.currentDistanceY=0,e.currentSpacing=0,e.currentObstacle=c.TUBE,e.coin=0,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:var e=this.obstacles[this.currentIndex].getComponent(a.default);e.IsHidden()&&this.Spawn(e);break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:if(this.currentDistanceX=s.default.OBSTACLE_DISTANCE_X,this.currentDistanceY=s.default.OBSTACLE_DISTANCE_Y,this.currentSpacing=s.default.OBSTACLE_SPACING_MAX,0==this.obstacles.length)for(var e=0;e<s.default.OBSTACLE_MAX;e++){(o=cc.instantiate(this.obstaclePrefab)).parent=this.node,o.active=!1,this.obstacles.push(o)}else for(e=0;e<s.default.OBSTACLE_MAX;e++)this.obstacles[e].active=!1;this.collectibleMgr.Init();break;case r.PLAYING:this.currentIndex=0,this.coin=0,this.currentX=cc.Camera.main.node.position.x+2*cc.winSize.width,this.nextY=0;for(e=0;e<s.default.OBSTACLE_MAX;e++){var o=this.obstacles[e].getComponent(a.default);if(0==e)this.Spawn(o,!0);else for(;!this.Spawn(o););}}},e.prototype.Spawn=function(t,e){void 0===e&&(e=!1);var o=s.RandomInt(0,100),n=e||o<50;if(this.currentObstacle==c.COIN&&(n=!0),n)return this.currentY=this.nextY,this.nextY=this.GetObstacleY(this.currentY),t.Spawn(this.currentX,this.currentY,this.currentSpacing),this.currentX+=this.currentDistanceX,this.currentObstacle=c.TUBE,this.currentIndex++,this.currentIndex==s.default.OBSTACLE_MAX&&(this.currentIndex=0),!0;var i=cc.winSize.height/2+this.currentY+(this.nextY-this.currentY)/2,r=s.RandomInt(100,150),a=!1;this.coin++,10==this.coin&&(a=!0,this.coin=0),a&&(r=s.RandomInt(200,250)),i+=s.RandomInt(0,100)<50?r:-r,this.currentObstacle==c.TUBE&&(this.currentX-=this.currentDistanceX/2),this.collectibleMgr.Spawn(a?s.CollectItem.PEPCOIN:s.CollectItem.COIN,this.currentX,i),this.currentX+=this.currentDistanceX/2,this.currentObstacle=c.COIN},e.prototype.SetTheme=function(t){for(var e=0;e<s.default.OBSTACLE_MAX;e++){this.obstacles[e].getComponent(a.default).SetTheme(t)}},e.prototype.GetObstacleY=function(t){var e=s.RandomInt(this.currentDistanceY,this.currentDistanceY+50);return s.RandomInt(0,100)<50?t+e>400?t-=e:t+=e:t-e<-200?t+=e:t-=e,cc.misc.clampf(t,-200,400)},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Hide=function(){for(var t=0;t<s.default.OBSTACLE_MAX;t++){this.obstacles[t].getComponent(a.default).Hide()}},e.prototype.Dead=function(){this.SetState(r.DEAD)},i([h({type:cc.Prefab})],e.prototype,"obstaclePrefab",void 0),i([h({type:p.default})],e.prototype,"collectibleMgr",void 0),e=i([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./CollectibleMgr":"CollectibleMgr","./Defines":"Defines","./Obstacle":"Obstacle"}],Obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"f985auzOcBFAYUlYmhjhVPr","Obstacle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=cc._decorator,s=c.ccclass,a=c.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.top=null,e.bottom=null,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=this.node.width&&this.SetState(r.HIDE);break;case r.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.PLAYING:this.node.active=!0;break;case r.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e,o){var n=cc.winSize.height-o;this.top.setPosition(0,cc.winSize.height-n/2),this.bottom.setPosition(0,n/2),this.node.setPosition(t,e),this.SetState(r.PLAYING)},e.prototype.SetTheme=function(t){this.top.getComponent(cc.Sprite).spriteFrame=this.sprites[t],this.bottom.getComponent(cc.Sprite).spriteFrame=this.sprites[t]},e.prototype.Hide=function(){cc.tween(this.top).to(1,{position:cc.v3(0,cc.winSize.height+400,0)}).start(),cc.tween(this.bottom).to(1,{position:cc.v3(0,-400,0)}).start()},e.prototype.IsHidden=function(){return this.state==r.HIDE},i([a({type:[cc.SpriteFrame]})],e.prototype,"sprites",void 0),i([a({type:cc.Node})],e.prototype,"top",void 0),i([a({type:cc.Node})],e.prototype,"bottom",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PopupCoin:[function(t,e,o){"use strict";cc._RF.push(e,"4b8dbx0F+1EK4gLUoDKA4c0","PopupCoin");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.highCoin=null,e.turn=null,e.retry=null,e.store=null,e.new=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetInfo=function(t,e,o){this.highCoin.string=t>e?""+t:""+e,this.coin.string=""+t,this.turn.string=o>0?"B\u1ea1n c\xf2n "+o+" l\u01b0\u1ee3t ch\u01a1i":"B\u1ea1n \u0111\xe3 h\u1ebft l\u01b0\u1ee3t ch\u01a1i",this.new.active=t>e,this.retry.active=o>0,this.store.active=!this.retry.active},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},i([s({type:cc.Label})],e.prototype,"coin",void 0),i([s({type:cc.Label})],e.prototype,"highCoin",void 0),i([s({type:cc.Label})],e.prototype,"turn",void 0),i([s({type:cc.Node})],e.prototype,"retry",void 0),i([s({type:cc.Node})],e.prototype,"store",void 0),i([s({type:cc.Node})],e.prototype,"new",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopupError:[function(t,e,o){"use strict";cc._RF.push(e,"d4675oSmoFCYbZsUn1UOBSA","PopupError");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.message=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetMessage=function(t){this.message.string=t},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},i([s({type:cc.Label})],e.prototype,"message",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Scrollable:[function(t,e,o){"use strict";cc._RF.push(e,"57b7aKPTL1GaKtvIwp9ztlP","Scrollable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.DEAD=3]="DEAD"})(r||(r={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e.overlapOffset=2,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:for(var e=cc.Camera.main.node.position,o=0;o<this.sprites.length;o++)e.x-this.sprites[o].position.x-this.node.position.x>=this.sprites[o].width-this.overlapOffset&&(this.sprites[o].setPosition(this.sprites[this.lastIndex].position.x+this.sprites[this.lastIndex].width-this.overlapOffset,this.sprites[o].position.y),this.lastIndex++,this.lastIndex==this.sprites.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x+this.speed*c.default.GAME_BASE_SPEED*t,this.node.position.y);break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:for(var e=0,o=0;o<this.sprites.length;o++)this.sprites[o].setPosition(e,this.sprites[o].position.y),e+=this.sprites[o].width-this.overlapOffset;this.lastIndex=this.sprites.length-1,this.node.setPosition(0,this.node.position.y);break;case r.PLAYING:case r.DEAD:}},e.prototype.SetTheme=function(t){for(var e=0;e<this.sprites.length;e++)this.sprites[e].getComponent(cc.Sprite).spriteFrame=t[e]},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.Pause=function(){this.SetState(r.PAUSE)},e.prototype.Resume=function(){this.state=r.PLAYING},i([p({type:[cc.Node]})],e.prototype,"sprites",void 0),i([p({type:cc.Float})],e.prototype,"speed",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"407108dGK9E7Zg4Zj6ToW2S","Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.useSound=!0}}()),cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();o.default=n,cc._RF.pop()},{}],Transition:[function(t,e,o){"use strict";cc._RF.push(e,"213b7EWgRtB2bldftJLKuwd","Transition");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fadeCallback=null,e}return n(e,t),e.prototype.onFade=function(){this.fadeCallback()},e=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["API","Background","Collectible","CollectibleMgr","Defines","Flappy","GameMgr","Obstacle","ObstacleMgr","Scrollable","Settings","Transition","EventMgr","Input","Timer","Ingame","Loading","MainMenu","PopupCoin","PopupError"]);