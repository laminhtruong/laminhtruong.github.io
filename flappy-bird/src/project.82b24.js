window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({Background:[function(t,e,o){"use strict";cc._RF.push(e,"6e764ZUFgBH8ZpqG+AVELqN","Background");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Scrollable"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sky=null,e.scrollables=[],e}return n(e,t),e.prototype.update=function(t){var e=cc.Camera.main.node.position;this.sky.setPosition(e)},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:for(var e=0;e<this.scrollables.length;e++)this.scrollables[e].Init();break;case r.PLAYING:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Play();break;case r.DEAD:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Dead()}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},i([p({type:cc.Node})],e.prototype,"sky",void 0),i([p({type:[c.default]})],e.prototype,"scrollables",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Scrollable":"Scrollable"}],CollectibleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cc4e1VIjdNCQZWkEeLAggyG","CollectibleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./Collectible"),a=cc._decorator,p=a.ccclass,l=a.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectiblePrefab=[],e.collectibles=[],e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:case r.PLAYING:case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:if(0==this.collectibles.length)for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=null;(o=e<c.default.COLLECTIBLE_MAX/2?cc.instantiate(this.collectiblePrefab[c.CollectItem.COIN]):cc.instantiate(this.collectiblePrefab[c.CollectItem.SKULL])).parent=this.node,o.active=!1,this.collectibles.push(o)}else for(e=0;e<c.default.COLLECTIBLE_MAX;e++)this.collectibles[e].active=!1;this.SetState(r.PLAYING);break;case r.PLAYING:case r.DEAD:}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Spawn=function(t,e,o){var n=this.GetInactiveCollectible(t);null!=n&&n.getComponent(s.default).Spawn(e,o)},e.prototype.GetInactiveCollectible=function(t){for(var e=0;e<c.default.COLLECTIBLE_MAX;e++){var o=this.collectibles[e].getComponent(s.default);if(o.type==t&&o.IsHidden())return this.collectibles[e]}return null},i([l({type:[cc.Prefab]})],e.prototype,"collectiblePrefab",void 0),e=i([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines"}],Collectible:[function(t,e,o){"use strict";cc._RF.push(e,"fa348NaP0ZPiLsfr/XupaJH","Collectible");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(r||(r={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=c.CollectItem.COIN,e.isCollected=!1,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=this.node.width&&this.SetState(r.HIDE);break;case r.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.PLAYING:this.isCollected=!1,this.node.active=!0;break;case r.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e){this.node.setPosition(t,e),this.SetState(r.PLAYING)},e.prototype.Collect=function(){this.isCollected=!0,this.node.active=!1},e.prototype.IsHidden=function(){return!this.node.active},i([p({type:c.CollectItem})],e.prototype,"type",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Defines":"Defines"}],Defines:[function(t,e,o){"use strict";cc._RF.push(e,"a49cbvPOuxAKauT+47PnPv4","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.GAME_BASE_SPEED=60,this.GAME_SPEED_MIN=5,this.OBSTACLE_DISTANCE=400,this.OBSTACLE_MAX=5,this.GROUND_Y=260,this.COLLECTIBLE_MAX=20}}()),o.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},o.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.TOUCH="TouchEvent",t.COLLECT_ITEM="CollectItem",t.LOSE="GameLose"}(o.GameEvent||(o.GameEvent={})),function(t){t[t.OBSTACLE=0]="OBSTACLE",t[t.COIN=1]="COIN",t[t.SKULL=2]="SKULL"}(o.CollisionTag||(o.CollisionTag={})),o.CollectItem=cc.Enum({COIN:0,SKULL:1}),cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=null,e}(cc.EventTarget);o.EventMgr=i,i.instance=new i,cc._RF.pop()},{}],Flappy:[function(t,e,o){"use strict";cc._RF.push(e,"d652cNzqgJBcZvh21QthUXO","Flappy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./core/EventMgr"),a=t("./Collectible"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD",t[t.LANDING=3]="LANDING"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidbody=null,e.audioFly=null,e.audioHitObstacle=null,e.audioHitPepcoin=null,e.audioHitSkull=null,e}return n(e,t),e.prototype.onLoad=function(){this.startX=cc.winSize.width/4},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:this.node.position.y<=c.default.GROUND_Y&&this.SetState(r.DEAD);break;case r.DEAD:this.node.position.y<=c.default.GROUND_Y&&this.SetState(r.LANDING)}this.UpdateAngle()},e.prototype.onCollisionEnter=function(t,e){if(this.state==r.PLAYING){var o=null;if(t.tag!=c.CollisionTag.OBSTACLE&&(o=t.node.parent.getComponent(a.default)),null!=o){if(o.isCollected)return;o.Collect()}switch(t.tag){case c.CollisionTag.OBSTACLE:this.Dead(),s.EventMgr.instance.emit(c.GameEvent.LOSE);break;case c.CollisionTag.COIN:this.audioHitPepcoin.play(),s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.COIN);break;case c.CollisionTag.SKULL:this.Dead(),this.audioHitSkull.play(),s.EventMgr.instance.emit(c.GameEvent.COLLECT_ITEM,c.CollectItem.SKULL)}}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:this.node.setPosition(this.startX,cc.winSize.height/2),this.rigidbody.type=cc.RigidBodyType.Static,this.rigidbody.active=!0;break;case r.PLAYING:this.rigidbody.type=cc.RigidBodyType.Dynamic;break;case r.DEAD:this.audioHitObstacle.play();break;case r.LANDING:this.rigidbody.type,cc.RigidBodyType.Static,this.rigidbody.active=!1}},e.prototype.UpdateAngle=function(){var t=new cc.Vec2(this.node.position.x,this.node.position.y),e=new cc.Vec2(t.x,t.y).subtract(this.rigidbody.linearVelocity),o=180*Math.atan2(t.y-e.y,c.default.GAME_SPEED_MIN)/Math.PI;o=c.Clamp(o,-10,10),this.node.angle=o,this.node.setPosition(cc.Camera.main.node.position.x+this.startX,c.Clamp(this.node.position.y,c.default.GROUND_Y,cc.winSize.height))},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},e.prototype.Jump=function(){this.rigidbody.linearVelocity=new cc.Vec2(0,500),this.audioFly.play()},e.prototype.IsLanding=function(){return this.state==r.LANDING},i([u({type:cc.RigidBody})],e.prototype,"rigidbody",void 0),i([u({type:cc.AudioSource})],e.prototype,"audioFly",void 0),i([u({type:cc.AudioSource})],e.prototype,"audioHitObstacle",void 0),i([u({type:cc.AudioSource})],e.prototype,"audioHitPepcoin",void 0),i([u({type:cc.AudioSource})],e.prototype,"audioHitSkull",void 0),e=i([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./core/EventMgr":"EventMgr"}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"15fb3AUZERDaaRXtnJ70/ub","GameMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./core/EventMgr"),s=t("./Defines"),a=t("./Flappy"),p=t("./core/Input"),l=t("./ui/Score"),u=t("./Background"),f=t("./ObstacleMgr"),h=cc._decorator,d=h.ccclass,y=h.property;(function(t){t[t.INIT=0]="INIT",t[t.TOUCH_TO_PLAY=1]="TOUCH_TO_PLAY",t[t.PLAYING=2]="PLAYING",t[t.WIN=3]="WIN",t[t.LOSE_DELAY=4]="LOSE_DELAY",t[t.LOSE=5]="LOSE"})(r||(r={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewScore=null,e.background=null,e.flappy=null,e.obstacleMgr=null,e.audioWin=null,e.audioLose=null,e.speed=s.default.GAME_SPEED_MIN,e.score=0,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){this.SetState(r.INIT),c.EventMgr.instance.on(s.GameEvent.TOUCH,this.TouchHandler,this),c.EventMgr.instance.on(s.GameEvent.COLLECT_ITEM,this.OnScore,this),c.EventMgr.instance.on(s.GameEvent.LOSE,this.OnDead,this)},e.prototype.update=function(t){switch(this.state){case r.INIT:this.speed=s.default.GAME_SPEED_MIN,this.score=0;break;case r.TOUCH_TO_PLAY:this.UpdateSpeed(t);break;case r.PLAYING:this.UpdateSpeed(t),this.flappy.IsLanding()&&this.OnDead();break;case r.LOSE_DELAY:this.flappy.IsLanding()&&this.SetState(r.LOSE)}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:this.viewScore.node.active=!1,cc.Camera.main.node.setPosition(0,cc.Camera.main.node.position.y),this.background.Init(),this.flappy.Init(),this.obstacleMgr.Init(),this.SetState(r.TOUCH_TO_PLAY);break;case r.TOUCH_TO_PLAY:this.background.Play();break;case r.PLAYING:this.flappy.Play(),this.obstacleMgr.Play();break;case r.LOSE_DELAY:this.flappy.Dead(),this.background.Dead(),this.obstacleMgr.Dead();break;case r.LOSE:this.audioLose.play(),this.viewScore.node.active=!0}},e.prototype.UpdateSpeed=function(t){var e=cc.Camera.main.node.position;cc.Camera.main.node.setPosition(e.x+this.speed*s.default.GAME_BASE_SPEED*t,e.y)},e.prototype.OnScore=function(t){t==s.CollectItem.COIN?this.score+=1:this.OnDead()},e.prototype.OnDead=function(){this.SetState(r.LOSE_DELAY)},e.prototype.ScoreClose=function(){var t=this;this.viewScore.Hide(function(){t.viewScore.node.active=!1,t.SetState(r.INIT)})},e.prototype.TouchHandler=function(t){switch(this.state){case r.INIT:break;case r.TOUCH_TO_PLAY:p.default.instance.IsTouchDown(t)&&this.SetState(r.PLAYING);break;case r.PLAYING:p.default.instance.IsTouchDown(t)&&this.flappy.Jump()}},i([y({type:l.default})],e.prototype,"viewScore",void 0),i([y({type:u.default})],e.prototype,"background",void 0),i([y({type:a.default})],e.prototype,"flappy",void 0),i([y({type:f.default})],e.prototype,"obstacleMgr",void 0),i([y({type:cc.AudioSource})],e.prototype,"audioWin",void 0),i([y({type:cc.AudioSource})],e.prototype,"audioLose",void 0),e=i([d],e)}(cc.Component);o.default=_,cc._RF.pop()},{"./Background":"Background","./Defines":"Defines","./Flappy":"Flappy","./ObstacleMgr":"ObstacleMgr","./core/EventMgr":"EventMgr","./core/Input":"Input","./ui/Score":"Score"}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./EventMgr"),c=t("../Defines"),s=cc._decorator,a=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.prevPosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e.isHold=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(t){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1,r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.onTouchMove=function(t){this.position=t.touch.getLocation(),r.EventMgr.instance.emit(c.GameEvent.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.instance=null,e=o=i([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Defines":"Defines","./EventMgr":"EventMgr"}],ObstacleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5a109teWuRAaqJ6PNqCUGCq","ObstacleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=t("./Obstacle"),a=t("./CollectibleMgr"),p=cc._decorator,l=p.ccclass,u=p.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstaclePrefab=null,e.collectibleMgr=null,e.obstacles=[],e.currentIndex=0,e.currentX=0,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:var e=this.obstacles[this.currentIndex].getComponent(s.default);e.IsHidden()&&(c.RandomInt(0,100)<50?(e.Spawn(this.currentX,c.RandomInt(0,300),c.RandomInt(300,400)),this.currentIndex++,this.currentIndex==c.default.OBSTACLE_MAX&&(this.currentIndex=0)):this.collectibleMgr.Spawn(c.RandomInt(0,100)<50?c.CollectItem.COIN:c.CollectItem.SKULL,this.currentX,c.RandomInt(500,1e3)),this.currentX+=c.default.OBSTACLE_DISTANCE);break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:if(0==this.obstacles.length)for(var e=0;e<c.default.OBSTACLE_MAX;e++){(o=cc.instantiate(this.obstaclePrefab)).parent=this.node,o.active=!1,this.obstacles.push(o)}this.currentX=cc.Camera.main.node.position.x+cc.winSize.width+100;for(e=0;e<c.default.OBSTACLE_MAX;e++){var o;(o=this.obstacles[e].getComponent(s.default)).Spawn(this.currentX,c.RandomInt(0,300),c.RandomInt(300,400)),this.currentX+=c.default.OBSTACLE_DISTANCE}this.collectibleMgr.Init();break;case r.PLAYING:this.currentIndex=0;break;case r.DEAD:}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},i([u({type:cc.Prefab})],e.prototype,"obstaclePrefab",void 0),i([u({type:a.default})],e.prototype,"collectibleMgr",void 0),e=i([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./CollectibleMgr":"CollectibleMgr","./Defines":"Defines","./Obstacle":"Obstacle"}],Obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"f985auzOcBFAYUlYmhjhVPr","Obstacle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=cc._decorator,s=c.ccclass,a=c.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.top=null,e.bottom=null,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case r.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=this.node.width&&this.SetState(r.HIDE);break;case r.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.PLAYING:this.node.active=!0;break;case r.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e,o){var n=cc.winSize.height-o;this.top.setPosition(0,cc.winSize.height-n/2),this.bottom.setPosition(0,n/2),this.node.setPosition(t,e),this.SetState(r.PLAYING)},e.prototype.IsHidden=function(){return this.state==r.HIDE},i([a({type:cc.Node})],e.prototype,"top",void 0),i([a({type:cc.Node})],e.prototype,"bottom",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Score:[function(t,e,o){"use strict";cc._RF.push(e,"4b8dbx0F+1EK4gLUoDKA4c0","Score");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.update=function(t){},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t()}).start()},e=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Scrollable:[function(t,e,o){"use strict";cc._RF.push(e,"57b7aKPTL1GaKtvIwp9ztlP","Scrollable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e.overlapOffset=2,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:for(var e=cc.Camera.main.node.position,o=0;o<this.sprites.length;o++)e.x-this.sprites[o].position.x-this.node.position.x>=this.sprites[o].width-this.overlapOffset&&(this.sprites[o].setPosition(this.sprites[this.lastIndex].position.x+this.sprites[this.lastIndex].width-this.overlapOffset,this.sprites[o].position.y),this.lastIndex++,this.lastIndex==this.sprites.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x+this.speed*c.default.GAME_BASE_SPEED*t,this.node.position.y);break;case r.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case r.INIT:for(var e=0,o=0;o<this.sprites.length;o++)this.sprites[o].setPosition(e,this.sprites[o].position.y),e+=this.sprites[o].width-this.overlapOffset;this.lastIndex=this.sprites.length-1,this.node.setPosition(0,this.node.position.y);break;case r.PLAYING:case r.DEAD:}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Play=function(){this.SetState(r.PLAYING)},e.prototype.Dead=function(){this.SetState(r.DEAD)},i([p({type:[cc.Node]})],e.prototype,"sprites",void 0),i([p({type:cc.Float})],e.prototype,"speed",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Defines":"Defines"}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();o.default=n,cc._RF.pop()},{}]},{},["Background","Collectible","CollectibleMgr","Defines","Flappy","GameMgr","Obstacle","ObstacleMgr","Scrollable","EventMgr","Input","Timer","Score"]);