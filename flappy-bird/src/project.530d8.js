window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return i(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({Background:[function(t,e,o){"use strict";cc._RF.push(e,"6e764ZUFgBH8ZpqG+AVELqN","Background");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Scrollable"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(c||(c={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sky=null,e.scrollables=[],e}return n(e,t),e.prototype.update=function(t){var e=cc.Camera.main.node.position;this.sky.setPosition(e)},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:for(var e=0;e<this.scrollables.length;e++)this.scrollables[e].Init();break;case c.PLAYING:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Play();break;case c.DEAD:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Dead()}},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Dead=function(){this.SetState(c.DEAD)},i([p({type:cc.Node})],e.prototype,"sky",void 0),i([p({type:[r.default]})],e.prototype,"scrollables",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Scrollable":"Scrollable"}],CollectibleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cc4e1VIjdNCQZWkEeLAggyG","CollectibleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Defines"),s=t("./Collectible"),a=cc._decorator,p=a.ccclass,u=a.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(c||(c={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectiblePrefab=[],e.collectibles=[],e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.INIT:case c.PLAYING:case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:if(0==this.collectibles.length)for(var e=0;e<r.default.COLLECTIBLE_MAX;e++){var o=cc.instantiate(this.collectiblePrefab[r.CollectItem.COIN]);o.parent=this.node,o.active=!1,this.collectibles.push(o)}else for(e=0;e<r.default.COLLECTIBLE_MAX;e++)this.collectibles[e].active=!1;this.SetState(c.PLAYING);break;case c.PLAYING:case c.DEAD:}},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Spawn=function(t,e,o){var n=this.GetInactiveCollectible(t);null!=n&&n.getComponent(s.default).Spawn(e,o)},e.prototype.GetInactiveCollectible=function(t){for(var e=0;e<r.default.COLLECTIBLE_MAX;e++){var o=this.collectibles[e].getComponent(s.default);if(o.type==t&&o.IsHidden())return this.collectibles[e]}return null},i([u({type:[cc.Prefab]})],e.prototype,"collectiblePrefab",void 0),e=i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines"}],Collectible:[function(t,e,o){"use strict";cc._RF.push(e,"fa348NaP0ZPiLsfr/XupaJH","Collectible");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(c||(c={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.CollectItem.COIN,e.isCollected=!1,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=screen.width/2&&this.SetState(c.HIDE);break;case c.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.PLAYING:this.isCollected=!1,this.node.active=!0;break;case c.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e){this.node.setPosition(t,e),this.SetState(c.PLAYING)},e.prototype.Collect=function(){this.isCollected=!0,this.node.active=!1},e.prototype.IsHidden=function(){return!this.node.active},i([p({type:r.CollectItem})],e.prototype,"type",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Defines:[function(t,e,o){"use strict";cc._RF.push(e,"a49cbvPOuxAKauT+47PnPv4","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.GAME_BASE_SPEED=60,this.GAME_SPEED_MIN=5,this.OBSTACLE_DISTANCE=400,this.OBSTACLE_MAX=5,this.GROUND_Y=260,this.COLLECTIBLE_MAX=20}}()),o.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},o.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.TOUCH="TouchEvent",t.COLLECT_ITEM="CollectItem",t.LOSE="GameLose"}(o.GameEvent||(o.GameEvent={})),function(t){t[t.OBSTACLE=0]="OBSTACLE",t[t.COIN=1]="COIN",t[t.SKULL=2]="SKULL"}(o.CollisionTag||(o.CollisionTag={})),o.CollectItem=cc.Enum({COIN:0,SKULL:1}),cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=null,e}(cc.EventTarget);o.EventMgr=i,i.instance=new i,cc._RF.pop()},{}],Flappy:[function(t,e,o){"use strict";cc._RF.push(e,"d652cNzqgJBcZvh21QthUXO","Flappy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Defines"),s=t("./core/EventMgr"),a=t("./Collectible"),p=t("./Settings"),u=cc._decorator,l=u.ccclass,f=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD",t[t.LANDING=3]="LANDING"})(c||(c={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidbody=null,e.audioFly=null,e.audioHitObstacle=null,e.audioHitPepcoin=null,e.audioHitSkull=null,e.flyOffset={y:-1},e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.PLAYING:this.startX>cc.winSize.width/4&&(this.startX-=.5*r.default.GAME_BASE_SPEED*t,this.startX<cc.winSize.width/4&&(this.startX=cc.winSize.width/4)),this.node.position.y<=r.default.GROUND_Y&&this.SetState(c.DEAD);break;case c.DEAD:this.node.position.y<=r.default.GROUND_Y&&this.SetState(c.LANDING)}this.UpdateAngle()},e.prototype.onCollisionEnter=function(t,e){if(this.state==c.PLAYING){var o=null;if(t.tag!=r.CollisionTag.OBSTACLE&&(o=t.node.parent.getComponent(a.default)),null!=o){if(o.isCollected)return;o.Collect()}switch(t.tag){case r.CollisionTag.OBSTACLE:this.Dead(),s.EventMgr.instance.emit(r.GameEvent.LOSE);break;case r.CollisionTag.COIN:p.default.useSound&&this.audioHitPepcoin.play(),s.EventMgr.instance.emit(r.GameEvent.COLLECT_ITEM,r.CollectItem.COIN);break;case r.CollisionTag.SKULL:this.Dead(),p.default.useSound&&this.audioHitSkull.play(),s.EventMgr.instance.emit(r.GameEvent.COLLECT_ITEM,r.CollectItem.SKULL)}}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:this.startX=cc.winSize.width/2,this.node.setPosition(this.startX,cc.winSize.height/2),this.rigidbody.type=cc.RigidBodyType.Static,this.rigidbody.active=!0,cc.tween(this.flyOffset).repeatForever(cc.tween(this.flyOffset).to(1,{y:1}).to(1,{y:-1})).start();break;case c.PLAYING:this.rigidbody.type=cc.RigidBodyType.Dynamic;break;case c.DEAD:p.default.useSound&&this.audioHitObstacle.play();break;case c.LANDING:this.rigidbody.type,cc.RigidBodyType.Static,this.rigidbody.active=!1}},e.prototype.UpdateAngle=function(){var t=new cc.Vec2(this.node.position.x,this.node.position.y),e=new cc.Vec2(t.x,t.y).subtract(this.rigidbody.linearVelocity),o=180*Math.atan2(t.y-e.y,r.default.GAME_SPEED_MIN)/Math.PI;o=r.Clamp(o,-10,10),this.node.angle=o,this.state!=c.INIT&&(this.flyOffset.y=0),this.node.setPosition(cc.Camera.main.node.position.x+this.startX,r.Clamp(this.node.position.y,r.default.GROUND_Y,cc.winSize.height)+this.flyOffset.y)},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Dead=function(){this.SetState(c.DEAD)},e.prototype.Jump=function(t){void 0===t&&(t=500),this.rigidbody.linearVelocity=new cc.Vec2(0,t),p.default.useSound&&this.audioFly.play()},e.prototype.IsLanding=function(){return this.state==c.LANDING},i([f({type:cc.RigidBody})],e.prototype,"rigidbody",void 0),i([f({type:cc.AudioSource})],e.prototype,"audioFly",void 0),i([f({type:cc.AudioSource})],e.prototype,"audioHitObstacle",void 0),i([f({type:cc.AudioSource})],e.prototype,"audioHitPepcoin",void 0),i([f({type:cc.AudioSource})],e.prototype,"audioHitSkull",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./Settings":"Settings","./core/EventMgr":"EventMgr"}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"15fb3AUZERDaaRXtnJ70/ub","GameMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./core/EventMgr"),s=t("./Defines"),a=t("./Flappy"),p=t("./core/Input"),u=t("./Background"),l=t("./ObstacleMgr"),f=t("./ui/PopupScore"),h=t("./ui/MainMenu"),d=t("./Settings"),y=cc._decorator,_=y.ccclass,v=y.property;(function(t){t[t.INIT=0]="INIT",t[t.TOUCH_TO_PLAY=1]="TOUCH_TO_PLAY",t[t.PLAYING=2]="PLAYING",t[t.WIN=3]="WIN",t[t.LOSE_DELAY=4]="LOSE_DELAY",t[t.LOSE=5]="LOSE"})(c||(c={}));var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewMainMenu=null,e.popupScore=null,e.background=null,e.flappy=null,e.obstacleMgr=null,e.audioBgm=null,e.audioWin=null,e.audioLose=null,e.confetti=null,e.speed=s.default.GAME_SPEED_MIN,e.score=0,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){this.SetState(c.INIT),r.EventMgr.instance.on(s.GameEvent.TOUCH,this.TouchHandler,this),r.EventMgr.instance.on(s.GameEvent.COLLECT_ITEM,this.OnScore,this),r.EventMgr.instance.on(s.GameEvent.LOSE,this.OnDead,this)},e.prototype.update=function(t){switch(this.state){case c.INIT:this.speed=s.default.GAME_SPEED_MIN,this.score=0;break;case c.TOUCH_TO_PLAY:this.UpdateSpeed(t);break;case c.PLAYING:this.UpdateSpeed(t),this.flappy.IsLanding()&&this.OnDead();break;case c.LOSE_DELAY:this.flappy.IsLanding()&&this.SetState(c.LOSE)}},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case c.INIT:cc.Camera.main.node.setPosition(0,cc.Camera.main.node.position.y),d.default.useSound&&this.audioBgm.play(),this.background.Init(),this.flappy.Init(),this.obstacleMgr.Init(),this.viewMainMenu.Show(function(){e.SetState(c.TOUCH_TO_PLAY)});break;case c.TOUCH_TO_PLAY:this.background.Play();break;case c.PLAYING:this.flappy.Play(),this.flappy.Jump(800),this.obstacleMgr.Play(),this.viewMainMenu.Hide();break;case c.LOSE_DELAY:this.flappy.Dead(),this.background.Dead(),this.obstacleMgr.Dead(),this.audioBgm.stop();break;case c.LOSE:d.default.useSound&&this.audioLose.play(),this.popupScore.node.active=!0}},e.prototype.UpdateSpeed=function(t){var e=cc.Camera.main.node.position;cc.Camera.main.node.setPosition(e.x+this.speed*s.default.GAME_BASE_SPEED*t,e.y),this.confetti.node.setPosition(e.x+cc.winSize.width/2,this.confetti.node.position.y)},e.prototype.OnScore=function(t){t==s.CollectItem.COIN?this.score+=1:this.OnDead()},e.prototype.OnDead=function(){this.SetState(c.LOSE_DELAY)},e.prototype.ScoreClose=function(){var t=this;this.popupScore.Hide(function(){t.popupScore.node.active=!1,t.SetState(c.INIT)})},e.prototype.TouchHandler=function(t){switch(this.state){case c.INIT:break;case c.TOUCH_TO_PLAY:p.default.instance.IsTouchDown(t)&&this.SetState(c.PLAYING);break;case c.PLAYING:p.default.instance.IsTouchDown(t)&&this.flappy.Jump()}},i([v({type:h.default})],e.prototype,"viewMainMenu",void 0),i([v({type:f.default})],e.prototype,"popupScore",void 0),i([v({type:u.default})],e.prototype,"background",void 0),i([v({type:a.default})],e.prototype,"flappy",void 0),i([v({type:l.default})],e.prototype,"obstacleMgr",void 0),i([v({type:cc.AudioSource})],e.prototype,"audioBgm",void 0),i([v({type:cc.AudioSource})],e.prototype,"audioWin",void 0),i([v({type:cc.AudioSource})],e.prototype,"audioLose",void 0),i([v({type:cc.ParticleSystem3D})],e.prototype,"confetti",void 0),e=i([_],e)}(cc.Component);o.default=b,cc._RF.pop()},{"./Background":"Background","./Defines":"Defines","./Flappy":"Flappy","./ObstacleMgr":"ObstacleMgr","./Settings":"Settings","./core/EventMgr":"EventMgr","./core/Input":"Input","./ui/MainMenu":"MainMenu","./ui/PopupScore":"PopupScore"}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./EventMgr"),r=t("../Defines"),s=cc._decorator,a=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.prevPosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e.isHold=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(t){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0,c.EventMgr.instance.emit(r.GameEvent.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1,c.EventMgr.instance.emit(r.GameEvent.TOUCH,t)},e.prototype.onTouchMove=function(t){this.position=t.touch.getLocation(),c.EventMgr.instance.emit(r.GameEvent.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.instance=null,e=o=i([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Defines":"Defines","./EventMgr":"EventMgr"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"351efv7WZBKH6uOJ8Wks8g4","MainMenu");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../core/Timer"),r=cc._decorator,s=r.ccclass,a=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.logo=null,e.play=null,e.timerBlink=new c.default,e}return n(e,t),e.prototype.start=function(){this.timerBlink.SetDuration(2)},e.prototype.update=function(t){},e.prototype.Show=function(t){this.logo.setPosition(0,cc.winSize.height/2),cc.tween(this.logo).to(1,{position:cc.v3(0,300,0)},{easing:"sineOut"}).start(),this.play.node.setPosition(0,-cc.winSize.height/2),cc.tween(this.play.node).to(1,{position:cc.v3(0,-350,0)},{easing:"sineOut"}).call(function(){return t()}).start()},e.prototype.Hide=function(){cc.tween(this.logo).stop(),cc.tween(this.logo).to(.5,{position:cc.v3(0,cc.winSize.height/2,0)},{easing:"sineIn"}).start(),cc.tween(this.play.node).stop(),cc.tween(this.play.node).to(.5,{position:cc.v3(0,-cc.winSize.height/2,0)},{easing:"sineIn"}).start()},i([a(cc.Node)],e.prototype,"logo",void 0),i([a(cc.Label)],e.prototype,"play",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../core/Timer":"Timer"}],ObstacleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5a109teWuRAaqJ6PNqCUGCq","ObstacleMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Defines"),s=t("./Obstacle"),a=t("./CollectibleMgr"),p=cc._decorator,u=p.ccclass,l=p.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(c||(c={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstaclePrefab=null,e.collectibleMgr=null,e.obstacles=[],e.currentIndex=0,e.currentX=0,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.PLAYING:var e=this.obstacles[this.currentIndex].getComponent(s.default);e.IsHidden()&&(r.RandomInt(0,100)<50?(e.Spawn(this.currentX,r.RandomInt(0,300),r.RandomInt(300,400)),this.currentIndex++,this.currentIndex==r.default.OBSTACLE_MAX&&(this.currentIndex=0)):this.collectibleMgr.Spawn(r.CollectItem.COIN,this.currentX,r.RandomInt(500,1e3)),this.currentX+=r.default.OBSTACLE_DISTANCE);break;case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:if(0==this.obstacles.length)for(var e=0;e<r.default.OBSTACLE_MAX;e++){(o=cc.instantiate(this.obstaclePrefab)).parent=this.node,o.active=!1,this.obstacles.push(o)}else for(e=0;e<r.default.OBSTACLE_MAX;e++)this.obstacles[e].active=!1;this.collectibleMgr.Init();break;case c.PLAYING:this.currentIndex=0,this.currentX=cc.Camera.main.node.position.x+2*cc.winSize.width;for(e=0;e<r.default.OBSTACLE_MAX;e++){var o;(o=this.obstacles[e].getComponent(s.default)).Spawn(this.currentX,r.RandomInt(0,300),r.RandomInt(300,400)),this.currentX+=r.default.OBSTACLE_DISTANCE}break;case c.DEAD:}},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Hide=function(){for(var t=0;t<r.default.OBSTACLE_MAX;t++){this.obstacles[t].getComponent(s.default).Hide()}},e.prototype.Dead=function(){this.SetState(c.DEAD)},i([l({type:cc.Prefab})],e.prototype,"obstaclePrefab",void 0),i([l({type:a.default})],e.prototype,"collectibleMgr",void 0),e=i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./CollectibleMgr":"CollectibleMgr","./Defines":"Defines","./Obstacle":"Obstacle"}],Obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"f985auzOcBFAYUlYmhjhVPr","Obstacle");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=cc._decorator,s=r.ccclass,a=r.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(c||(c={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.top=null,e.bottom=null,e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=this.node.width&&this.SetState(c.HIDE);break;case c.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.PLAYING:this.node.active=!0;break;case c.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e,o){var n=cc.winSize.height-o;this.top.setPosition(0,cc.winSize.height-n/2),this.bottom.setPosition(0,n/2),this.node.setPosition(t,e),this.SetState(c.PLAYING)},e.prototype.Hide=function(){cc.tween(this.top).to(.5,{position:cc.v3(0,cc.winSize.height,0)}).start(),cc.tween(this.bottom).to(.5,{position:cc.v3(0,0,0)}).start()},e.prototype.IsHidden=function(){return this.state==c.HIDE},i([a({type:cc.Node})],e.prototype,"top",void 0),i([a({type:cc.Node})],e.prototype,"bottom",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PopupScore:[function(t,e,o){"use strict";cc._RF.push(e,"4b8dbx0F+1EK4gLUoDKA4c0","PopupScore");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.update=function(t){},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t()}).start()},e=i([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Scrollable:[function(t,e,o){"use strict";cc._RF.push(e,"57b7aKPTL1GaKtvIwp9ztlP","Scrollable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c,r=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(c||(c={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e.overlapOffset=2,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.PLAYING:for(var e=cc.Camera.main.node.position,o=0;o<this.sprites.length;o++)e.x-this.sprites[o].position.x-this.node.position.x>=this.sprites[o].width-this.overlapOffset&&(this.sprites[o].setPosition(this.sprites[this.lastIndex].position.x+this.sprites[this.lastIndex].width-this.overlapOffset,this.sprites[o].position.y),this.lastIndex++,this.lastIndex==this.sprites.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x+this.speed*r.default.GAME_BASE_SPEED*t,this.node.position.y);break;case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:for(var e=0,o=0;o<this.sprites.length;o++)this.sprites[o].setPosition(e,this.sprites[o].position.y),e+=this.sprites[o].width-this.overlapOffset;this.lastIndex=this.sprites.length-1,this.node.setPosition(0,this.node.position.y);break;case c.PLAYING:case c.DEAD:}},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Dead=function(){this.SetState(c.DEAD)},i([p({type:[cc.Node]})],e.prototype,"sprites",void 0),i([p({type:cc.Float})],e.prototype,"speed",void 0),e=i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"407108dGK9E7Zg4Zj6ToW2S","Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new(function(){return function(){this.useSound=!0}}()),cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();o.default=n,cc._RF.pop()},{}]},{},["Background","Collectible","CollectibleMgr","Defines","Flappy","GameMgr","Obstacle","ObstacleMgr","Scrollable","Settings","EventMgr","Input","Timer","MainMenu","PopupScore"]);