window.__require=function t(e,o,i){function n(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return n(e[c][1][t]||t)},u,u.exports,t,e,o,i)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({API:[function(t,e,o){"use strict";cc._RF.push(e,"519a1UFF4ZBy4cfQ0vO+vLe","API");var i=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator.ccclass,r=function(){function t(){}var e;return e=t,t.Request=function(t,e,o){var i=window.userParams;return new Promise(function(n,r){var c=new XMLHttpRequest;c.open(t,i.api+e,!0),c.setRequestHeader("Content-type","application/json"),c.setRequestHeader("Authorization","Bearer "+i.authorization),c.setRequestHeader("TenantId",i.tenantId),c.setRequestHeader("CampaignId",i.campaignId),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?n(c.response):r(c.response))},c.send(o)})},t.StartGame=function(t){var o={turnType:t};return e.Request("post","/StartGame",JSON.stringify(o))},t.EndGame=function(t,o){var i={transactionCode:t,coin:o,hash:window.sha1(""+t+o+window.userParams.shareKey)};return e.Request("post","/EndGame",JSON.stringify(i))},e=i([n],t)}();o.default=r,cc._RF.pop()},{}],Background:[function(t,e,o){"use strict";cc._RF.push(e,"6e764ZUFgBH8ZpqG+AVELqN","Background");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s,a,p=t("./Scrollable"),u=t("./Defines"),l=cc._decorator,h=l.ccclass,f=l.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.DEAD=4]="DEAD"})(c||(c={})),function(t){t[t.CLOUD_BIG=0]="CLOUD_BIG",t[t.CLOUND_SMALL=1]="CLOUND_SMALL",t[t.BACKGROUND=2]="BACKGROUND",t[t.FOREGROUND=3]="FOREGROUND",t[t.DECORATION=4]="DECORATION",t[t.GROUND=5]="GROUND"}(s||(s={})),function(t){t[t.GROUND=0]="GROUND",t[t.DECORATION_01=1]="DECORATION_01",t[t.DECORATION_02=2]="DECORATION_02",t[t.BACKGROUND=3]="BACKGROUND",t[t.FOREGROUND=4]="FOREGROUND",t[t.TUBE=5]="TUBE"}(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sky=null,e.forest=[],e.city=[],e.beach=[],e.scrollables=[],e}return n(e,t),e.prototype.update=function(){var t=cc.Camera.main.node.position;this.sky.setPosition(t)},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:for(var e=0;e<this.scrollables.length;e++)this.scrollables[e].Init();break;case c.PLAYING:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Play();break;case c.PAUSE:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Pause();break;case c.RESUME:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Resume();break;case c.DEAD:for(e=0;e<this.scrollables.length;e++)this.scrollables[e].Dead()}},e.prototype.SetTheme=function(t){var e=null;switch(t){case u.THEME.FOREST:e=this.forest;break;case u.THEME.CITY:e=this.city;break;case u.THEME.BEACH:e=this.beach}this.scrollables[s.BACKGROUND].SetTheme([e[a.BACKGROUND],e[a.BACKGROUND],e[a.BACKGROUND]]),this.scrollables[s.FOREGROUND].SetTheme([e[a.FOREGROUND],e[a.FOREGROUND],e[a.FOREGROUND]]),this.scrollables[s.DECORATION].SetTheme([e[a.DECORATION_01],e[a.DECORATION_02],e[a.DECORATION_01]]),this.scrollables[s.GROUND].SetTheme([e[a.GROUND],e[a.GROUND],e[a.GROUND]])},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Dead=function(){this.SetState(c.DEAD)},e.prototype.Pause=function(){this.SetState(c.PAUSE)},e.prototype.Resume=function(){this.SetState(c.RESUME)},r([f({type:cc.Node})],e.prototype,"sky",void 0),r([f({type:[cc.SpriteFrame]})],e.prototype,"forest",void 0),r([f({type:[cc.SpriteFrame]})],e.prototype,"city",void 0),r([f({type:[cc.SpriteFrame]})],e.prototype,"beach",void 0),r([f({type:[p.default]})],e.prototype,"scrollables",void 0),r([h],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Defines":"Defines","./Scrollable":"Scrollable"}],CollectibleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cc4e1VIjdNCQZWkEeLAggyG","CollectibleMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("./Defines"),a=t("./Collectible"),p=cc._decorator,u=p.ccclass,l=p.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(c||(c={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectiblePrefab=[],e.collectibles=[],e}return n(e,t),e.prototype.update=function(){switch(this.state){case c.INIT:case c.PLAYING:case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:if(0==this.collectibles.length)for(var e=0;e<s.default.COLLECTIBLE_MAX;e++){var o=null;(o=e<s.default.COLLECTIBLE_MAX/2?cc.instantiate(this.collectiblePrefab[s.CollectItem.COIN]):cc.instantiate(this.collectiblePrefab[s.CollectItem.PEPCOIN])).parent=this.node,o.active=!1,this.collectibles.push(o)}else for(e=0;e<s.default.COLLECTIBLE_MAX;e++)this.collectibles[e].active=!1;this.SetState(c.PLAYING);break;case c.PLAYING:case c.DEAD:}},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Spawn=function(t,e,o){var i=this.GetInactiveCollectible(t);null!=i&&i.getComponent(a.default).Spawn(e,o)},e.prototype.Hide=function(){for(var t=0;t<s.default.COLLECTIBLE_MAX;t++)this.collectibles[t].getComponent(a.default).Hide()},e.prototype.GetInactiveCollectible=function(t){for(var e=0;e<s.default.COLLECTIBLE_MAX;e++){var o=this.collectibles[e].getComponent(a.default);if(o.type==t&&o.IsHidden())return this.collectibles[e]}return null},r([l({type:[cc.Prefab]})],e.prototype,"collectiblePrefab",void 0),r([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines"}],Collectible:[function(t,e,o){"use strict";cc._RF.push(e,"fa348NaP0ZPiLsfr/XupaJH","Collectible");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("./Defines"),a=cc._decorator,p=a.ccclass,u=a.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(c||(c={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=s.CollectItem.COIN,e.animation=null,e.isCollected=!1,e}return n(e,t),e.prototype.update=function(){switch(this.state){case c.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=screen.width/2&&this.SetState(c.HIDE);break;case c.HIDE:}},e.prototype.onCollected=function(){this.node.active=!1},e.prototype.SetState=function(t){switch(this.state=t,t){case c.PLAYING:this.isCollected=!1,this.node.active=!0;break;case c.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e){this.node.setPosition(t,e),this.animation.play("coin_idle"),this.SetState(c.PLAYING)},e.prototype.Collect=function(){this.isCollected=!0,this.animation.play("coin_collect")},e.prototype.Hide=function(){this.isCollected||(this.node.active=!1)},e.prototype.IsHidden=function(){return!this.node.active},r([u({type:s.CollectItem})],e.prototype,"type",void 0),r([u({type:cc.Animation})],e.prototype,"animation",void 0),r([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Defines":"Defines"}],Defines:[function(t,e,o){"use strict";cc._RF.push(e,"a49cbvPOuxAKauT+47PnPv4","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.CollectItem=o.THEME=o.CollisionTag=o.GameEvent=o.RandomInt=o.Clamp=void 0,o.default=new function(){this.GAME_BASE_SPEED=60,this.GAME_SPEED_MIN=7,this.GAME_SPEED_MAX=12,this.GAME_SPEED_INCREASE_RATE=.25,this.OBSTACLE_DISTANCE_X=500,this.OBSTACLE_DISTANCE_X_INCREASE_RATE=12,this.OBSTACLE_DISTANCE_Y=150,this.OBSTACLE_DISTANCE_Y_INCREASE_RATE=12,this.OBSTACLE_SPACING_MIN=250,this.OBSTACLE_SPACING_MAX=400,this.OBSTACLE_SPACING_DECREASE_RATE=15,this.OBSTACLE_MAX=4,this.GROUND_Y=210,this.COLLECTIBLE_MAX=10},o.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},o.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.TOUCH="TouchEvent",t.COLLECT_ITEM="CollectItem",t.LOSE="GameLose"}(o.GameEvent||(o.GameEvent={})),function(t){t[t.OBSTACLE=0]="OBSTACLE",t[t.COIN=1]="COIN",t[t.PEPCOIN=2]="PEPCOIN"}(o.CollisionTag||(o.CollisionTag={})),function(t){t[t.FOREST=0]="FOREST",t[t.CITY=1]="CITY",t[t.BEACH=2]="BEACH"}(o.THEME||(o.THEME={})),o.CollectItem=cc.Enum({COIN:0,PEPCOIN:1}),cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EventMgr=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.instance=null,e}(cc.EventTarget);o.EventMgr=r,r.instance=new r,cc._RF.pop()},{}],Flappy:[function(t,e,o){"use strict";cc._RF.push(e,"d652cNzqgJBcZvh21QthUXO","Flappy");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("./Defines"),a=t("./core/EventMgr"),p=t("./Collectible"),u=t("./Settings"),l=cc._decorator,h=l.ccclass,f=l.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.WIN=4]="WIN",t[t.DEAD=5]="DEAD",t[t.LANDING=6]="LANDING"})(c||(c={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidbody=null,e.audioFly=null,e.audioHitObstacle=null,e.audioHitCoin=null,e.flyOffset={y:-1},e}return n(e,t),e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.PLAYING:this.startX>cc.winSize.width/4&&(this.startX-=.5*s.default.GAME_BASE_SPEED*t,this.startX<cc.winSize.width/4&&(this.startX=cc.winSize.width/4)),this.node.position.y<=s.default.GROUND_Y&&this.SetState(c.DEAD),this.UpdateAngle();break;case c.WIN:this.rigidbody.active=!1,this.node.setPosition(this.node.position.lerp(cc.v3(cc.winSize.width/2,cc.winSize.height/2,0),t));break;case c.DEAD:this.node.angle=cc.misc.lerp(this.node.angle,0,.1),this.node.position.y<=s.default.GROUND_Y&&this.SetState(c.LANDING);break;case c.LANDING:this.node.angle=cc.misc.lerp(this.node.angle,0,1)}this.state!=c.INIT&&this.state!=c.WIN&&(this.flyOffset.y=0),this.node.setPosition(cc.Camera.main.node.position.x+this.startX,s.Clamp(this.node.position.y,s.default.GROUND_Y,cc.winSize.height)+this.flyOffset.y)},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:this.startX=cc.winSize.width/2,this.node.setPosition(this.startX,cc.winSize.height/2),this.node.angle=30,this.rigidbody.type=cc.RigidBodyType.Static,this.rigidbody.active=!0,cc.tween(this.flyOffset).repeatForever(cc.tween(this.flyOffset).to(1,{y:1}).to(1,{y:-1})).start();break;case c.PLAYING:this.rigidbody.type=cc.RigidBodyType.Dynamic;break;case c.PAUSE:this.rigidbody.active=!1,this.rigidbody.type,cc.RigidBodyType.Static;break;case c.RESUME:this.rigidbody.active=!0,this.rigidbody.type,cc.RigidBodyType.Dynamic,this.state=c.PLAYING;break;case c.WIN:this.node.angle=30;break;case c.DEAD:u.default.useSound&&this.audioHitObstacle.play();break;case c.LANDING:this.rigidbody.type,cc.RigidBodyType.Static,this.rigidbody.active=!1}},e.prototype.UpdateAngle=function(){var t=new cc.Vec2(this.node.position.x,this.node.position.y),e=new cc.Vec2(t.x,t.y).subtract(this.rigidbody.linearVelocity),o=180*Math.atan2(t.y-e.y,s.default.GAME_SPEED_MIN)/Math.PI;o=s.Clamp(o,-10,30),this.node.angle=cc.misc.lerp(this.node.angle,o,.1)},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Pause=function(){this.SetState(c.PAUSE)},e.prototype.Resume=function(){this.SetState(c.RESUME)},e.prototype.Win=function(){this.SetState(c.WIN)},e.prototype.Dead=function(){this.SetState(c.DEAD)},e.prototype.Jump=function(t){void 0===t&&(t=500),this.rigidbody.linearVelocity=new cc.Vec2(0,t),u.default.useSound&&this.audioFly.play()},e.prototype.IsLanding=function(){return this.state==c.LANDING},e.prototype.onCollisionEnter=function(t){if(this.state==c.PLAYING){var e=null;if(t.tag!=s.CollisionTag.OBSTACLE&&(e=t.node.parent.getComponent(p.default)),null!=e){if(e.isCollected)return;e.Collect()}switch(t.tag){case s.CollisionTag.OBSTACLE:this.Dead(),a.EventMgr.instance.emit(s.GameEvent.LOSE);break;case s.CollisionTag.COIN:u.default.useSound&&this.audioHitCoin.play(),a.EventMgr.instance.emit(s.GameEvent.COLLECT_ITEM,s.CollectItem.COIN);break;case s.CollisionTag.PEPCOIN:u.default.useSound&&this.audioHitCoin.play(),a.EventMgr.instance.emit(s.GameEvent.COLLECT_ITEM,s.CollectItem.PEPCOIN)}}},r([f({type:cc.RigidBody})],e.prototype,"rigidbody",void 0),r([f({type:cc.AudioSource})],e.prototype,"audioFly",void 0),r([f({type:cc.AudioSource})],e.prototype,"audioHitObstacle",void 0),r([f({type:cc.AudioSource})],e.prototype,"audioHitCoin",void 0),r([h],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Collectible":"Collectible","./Defines":"Defines","./Settings":"Settings","./core/EventMgr":"EventMgr"}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"15fb3AUZERDaaRXtnJ70/ub","GameMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("./core/EventMgr"),a=t("./Defines"),p=t("./Flappy"),u=t("./core/Input"),l=t("./Background"),h=t("./ObstacleMgr"),f=t("./ui/MainMenu"),d=t("./ui/Ingame"),y=t("./ui/PopupCoin"),_=t("./ui/PopupError"),E=t("./Settings"),S=t("./Transition"),v=(t("./API"),t("./ui/Loading")),g=t("./core/Timer"),O=cc._decorator,b=O.ccclass,I=O.property;(function(t){t[t.INIT=0]="INIT",t[t.TOUCH_TO_PLAY=1]="TOUCH_TO_PLAY",t[t.PLAYING=2]="PLAYING",t[t.PAUSE=3]="PAUSE",t[t.RESUME=4]="RESUME",t[t.WIN_DELAY=5]="WIN_DELAY",t[t.WIN=6]="WIN",t[t.LOSE_DELAY=7]="LOSE_DELAY",t[t.LOSE=8]="LOSE"})(c||(c={}));var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewMainMenu=null,e.viewIngame=null,e.viewLoading=null,e.popupCoin=null,e.popupError=null,e.transition=null,e.background=null,e.flappy=null,e.obstacleMgr=null,e.audioBgm=null,e.audioWin=null,e.audioLose=null,e.audioClick=null,e.confetti=null,e.timerWinDelay=new g.default,e.speed=a.default.GAME_SPEED_MIN,e.speedTarget=a.default.GAME_SPEED_MIN,e.coin=0,e.highCoin=0,e.remainingTurn=0,e.turnType="",e.transactionCode="",e.theme=a.THEME.FOREST,e.errorType=0,e}return n(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.transition.getComponent(S.default).fadeCallback=this.OnThemeChange.bind(this);var t=window.userParams;this.highCoin=t.highCoin||999,this.remainingTurn=t.remainingTurn||1,this.transactionCode=t.transactionCode,this.turnType=t.turnType,this.viewIngame.SetLife(this.remainingTurn),this.timerWinDelay.SetDuration(5),a.default.OBSTACLE_DISTANCE_Y_INCREASE_RATE=t.distanceIncreaseRate,a.default.OBSTACLE_SPACING_DECREASE_RATE=t.spacingDecreaseRate},e.prototype.start=function(){s.EventMgr.instance.on(a.GameEvent.TOUCH,this.TouchHandler,this),s.EventMgr.instance.on(a.GameEvent.COLLECT_ITEM,this.OnScore,this),s.EventMgr.instance.on(a.GameEvent.LOSE,this.OnDead,this),cc.game.on(cc.game.EVENT_SHOW,this.GameResume,this),cc.game.on(cc.game.EVENT_HIDE,this.GamePause,this);try{var t=JSON.parse(cc.sys.localStorage.getItem("settings"));null!=t&&(E.default.useSound!=t.useSound&&(console.log(JSON.stringify(t)),this.viewMainMenu.SwitchSound()),E.default.useSound&&this.audioBgm.play())}catch(e){}this.SetState(c.INIT)},e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.TOUCH_TO_PLAY:this.UpdateSpeed(t);break;case c.PLAYING:this.UpdateSpeed(t),this.flappy.IsLanding()&&this.OnDead();break;case c.WIN_DELAY:this.UpdateSpeed(t),this.timerWinDelay.Update(t),this.timerWinDelay.JustFinished()&&this.SetState(c.WIN);break;case c.WIN:this.UpdateSpeed(t);break;case c.LOSE_DELAY:this.flappy.IsLanding()&&this.SetState(c.LOSE)}},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case c.INIT:cc.Camera.main.node.setPosition(0,cc.Camera.main.node.position.y),E.default.useSound&&this.audioBgm.play(),this.speed=a.default.GAME_SPEED_MIN,this.speedTarget=a.default.GAME_SPEED_MIN,this.coin=0,this.errorType=0,this.confetti.node.active=!1,this.background.Init(),this.obstacleMgr.Init(),this.flappy.Init(),this.viewMainMenu.Show(function(){e.SetState(c.TOUCH_TO_PLAY)}),this.viewIngame.Hide(),this.viewIngame.ResetCoin(),this.transition.setPosition(cc.Camera.main.node.position.x+cc.winSize.width/2,this.transition.position.y);break;case c.TOUCH_TO_PLAY:this.background.Play();break;case c.PLAYING:this.flappy.Play(),this.flappy.Jump(800),this.obstacleMgr.Play(),this.viewMainMenu.Hide(),this.viewIngame.Show();break;case c.WIN_DELAY:this.timerWinDelay.Reset(),this.obstacleMgr.Hide(),this.obstacleMgr.Dead(),this.obstacleMgr.collectibleMgr.Hide(),this.flappy.Win(),this.confetti.node.active=!0;break;case c.WIN:this.audioBgm.stop(),this.audioWin.play(),this.EndGame();break;case c.LOSE_DELAY:this.flappy.Dead(),this.background.Dead(),this.obstacleMgr.Dead(),this.audioBgm.stop();break;case c.LOSE:E.default.useSound&&this.audioLose.play(),this.EndGame();break;case c.PAUSE:this.audioBgm.stop(),this.flappy.Pause(),this.background.Pause();break;case c.RESUME:this.audioBgm.play(),this.flappy.Resume(),this.background.Resume(),this.state=c.PLAYING}},e.prototype.UpdateSpeed=function(t){var e=cc.Camera.main.node.position;cc.Camera.main.node.setPosition(e.x+this.speed*a.default.GAME_BASE_SPEED*t,e.y),this.confetti.node.setPosition(e.x+cc.winSize.width/2,this.confetti.node.position.y),this.transition.setPosition(e.x+cc.winSize.width/2,this.transition.position.y),this.speed=cc.misc.lerp(this.speed,this.speedTarget,.1)},e.prototype.EndGame=function(){this.popupCoin.SetInfo(this.coin,this.highCoin,this.remainingTurn),this.popupCoin.node.active=!0},e.prototype.Replay=function(){var t=this;this.popupCoin.Hide(function(){t.popupCoin.node.active=!1,t.SetState(c.INIT)})},e.prototype.ScoreRetry=function(){E.default.useSound&&this.audioClick.play(),this.Replay()},e.prototype.ScoreHome=function(){window.parent.location.href=window.userParams.homeUrl},e.prototype.ScoreStore=function(){window.location.href=window.userParams.storeUrl},e.prototype.ErrorClose=function(){var t=this;1==this.errorType&&this.popupError.Hide(function(){t.popupError.node.active=!1,t.EndGame()}),2==this.errorType&&this.popupError.Hide(function(){t.popupError.node.active=!1})},e.prototype.NextTheme=function(){this.transition.active=!0,this.obstacleMgr.Hide(),this.transition.getComponent(cc.Animation).play()},e.prototype.OnThemeChange=function(){this.theme++,this.theme>a.THEME.BEACH&&(this.theme=a.THEME.FOREST),this.background.SetTheme(this.theme),this.obstacleMgr.SetTheme(this.theme)},e.prototype.SwitchSound=function(){this.viewMainMenu.SwitchSound(),E.default.useSound?this.audioBgm.play():this.audioBgm.stop(),cc.sys.localStorage.setItem("settings",JSON.stringify(E.default))},e.prototype.OnScore=function(t){var e=window.userParams.winCoin,o=window.userParams.scorePerCoin,i=2*o,n=6*o;this.coin+=o,this.coin%i==0&&this.speed<a.default.GAME_SPEED_MAX&&(this.obstacleMgr.currentDistanceY+=a.default.OBSTACLE_DISTANCE_Y_INCREASE_RATE,this.obstacleMgr.currentSpacing-=a.default.OBSTACLE_SPACING_DECREASE_RATE),this.coin%n==0&&this.NextTheme(),t==a.CollectItem.PEPCOIN&&(this.coin+=o),this.coin>=e&&(this.coin=e,this.SetState(c.WIN_DELAY)),"QR"==this.turnType?this.viewIngame.SetCoin(2*this.coin):this.viewIngame.SetCoin(this.coin)},e.prototype.OnDead=function(){this.SetState(c.LOSE_DELAY)},e.prototype.GameResume=function(){cc.game.resume()},e.prototype.GamePause=function(){this.state==c.PLAYING&&this.SetState(c.PAUSE),cc.game.pause()},e.prototype.TouchHandler=function(t){switch(this.state){case c.INIT:break;case c.TOUCH_TO_PLAY:u.default.instance.IsTouchDown(t)&&this.SetState(c.PLAYING);break;case c.PLAYING:u.default.instance.IsTouchDown(t)&&this.flappy.Jump();break;case c.PAUSE:this.SetState(c.RESUME)}},r([I({type:f.default})],e.prototype,"viewMainMenu",void 0),r([I({type:d.default})],e.prototype,"viewIngame",void 0),r([I({type:v.default})],e.prototype,"viewLoading",void 0),r([I({type:y.default})],e.prototype,"popupCoin",void 0),r([I({type:_.default})],e.prototype,"popupError",void 0),r([I({type:cc.Node})],e.prototype,"transition",void 0),r([I({type:l.default})],e.prototype,"background",void 0),r([I({type:p.default})],e.prototype,"flappy",void 0),r([I({type:h.default})],e.prototype,"obstacleMgr",void 0),r([I({type:cc.AudioSource})],e.prototype,"audioBgm",void 0),r([I({type:cc.AudioSource})],e.prototype,"audioWin",void 0),r([I({type:cc.AudioSource})],e.prototype,"audioLose",void 0),r([I({type:cc.AudioSource})],e.prototype,"audioClick",void 0),r([I({type:cc.ParticleSystem3D})],e.prototype,"confetti",void 0),r([b],e)}(cc.Component);o.default=P,cc._RF.pop()},{"./API":"API","./Background":"Background","./Defines":"Defines","./Flappy":"Flappy","./ObstacleMgr":"ObstacleMgr","./Settings":"Settings","./Transition":"Transition","./core/EventMgr":"EventMgr","./core/Input":"Input","./core/Timer":"Timer","./ui/Ingame":"Ingame","./ui/Loading":"Loading","./ui/MainMenu":"MainMenu","./ui/PopupCoin":"PopupCoin","./ui/PopupError":"PopupError"}],Ingame:[function(t,e,o){"use strict";cc._RF.push(e,"ce56bZ/jydEaJ9euUC2iteW","Ingame");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.life=null,e.coinCurrent=0,e.coinTarget=0,e}return n(e,t),e.prototype.update=function(){this.coinCurrent<this.coinTarget&&(this.coinCurrent++,this.coin.string=""+this.coinCurrent)},e.prototype.SetCoin=function(t){this.coinTarget=t},e.prototype.ResetCoin=function(){this.coinCurrent=0,this.coinTarget=0,this.coin.string=""+this.coinCurrent},e.prototype.SetLife=function(t){this.life.string=""+t},e.prototype.Show=function(){this.node.active=!0},e.prototype.Hide=function(){this.node.active=!1},r([a(cc.Label)],e.prototype,"coin",void 0),r([a(cc.Label)],e.prototype,"life",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Init:[function(t,e,o){"use strict";cc._RF.push(e,"fb0e64rMu1It448CA4JE5/E","Init");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Defines"),s=cc._decorator,a=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingIcon=null,e.loadingError=null,e.progress=null,e}return n(e,t),e.prototype.start=function(){this.LoadScene()},e.prototype.update=function(t){this.loadingIcon.angle-=2*c.default.GAME_BASE_SPEED*t},e.prototype.LoadScene=function(){var t=this;this.loadingIcon.active=!0,this.progress.node.active=!0,this.loadingError.active=!1,cc.director.preloadScene("main",function(e,o){var i=e/o;t.progress.string=Math.floor(100*i)+"%"},function(e){if(e)return t.loadingIcon.active=!1,t.progress.node.active=!1,void(t.loadingError.active=!0);cc.director.loadScene("main")})},r([p({type:cc.Node})],e.prototype,"loadingIcon",void 0),r([p({type:cc.Node})],e.prototype,"loadingError",void 0),r([p({type:cc.Label})],e.prototype,"progress",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Defines":"Defines"}],Input:[function(t,e,o){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./EventMgr"),s=t("../Defines"),a=cc._decorator,p=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.prevPosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e.isHold=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.start=function(){},e.prototype.update=function(){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0,c.EventMgr.instance.emit(s.GameEvent.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1,c.EventMgr.instance.emit(s.GameEvent.TOUCH,t)},e.prototype.onTouchMove=function(t){this.position=t.touch.getLocation(),c.EventMgr.instance.emit(s.GameEvent.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.instance=null,o=r([p],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../Defines":"Defines","./EventMgr":"EventMgr"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"2d4afTuZMtEMrP5rpbFpmae","Loading");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Defines"),s=cc._decorator,a=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return n(e,t),e.prototype.update=function(t){this.icon.angle-=2*c.default.GAME_BASE_SPEED*t},r([p(cc.Node)],e.prototype,"icon",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Defines":"Defines"}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"351efv7WZBKH6uOJ8Wks8g4","MainMenu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../core/Timer"),s=t("../Settings"),a=cc._decorator,p=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.slogun=null,e.play=null,e.sound=null,e.soundSprites=[],e.timerBlink=new c.default,e}return n(e,t),e.prototype.start=function(){this.timerBlink.SetDuration(2)},e.prototype.update=function(){},e.prototype.Show=function(t){this.slogun.setPosition(0,cc.winSize.height/2),cc.tween(this.slogun).to(1,{position:cc.v3(0,220,0)},{easing:"sineOut"}).start(),this.play.node.setPosition(0,-cc.winSize.height/2),cc.tween(this.play.node).to(1,{position:cc.v3(0,-250,0)},{easing:"sineOut"}).call(function(){return t()}).start()},e.prototype.Hide=function(){cc.tween(this.slogun).stop(),cc.tween(this.slogun).to(.5,{position:cc.v3(0,cc.winSize.height/2,0)},{easing:"sineIn"}).start(),cc.tween(this.play.node).stop(),cc.tween(this.play.node).to(.5,{position:cc.v3(0,-cc.winSize.height/2,0)},{easing:"sineIn"}).start()},e.prototype.SwitchSound=function(){s.default.useSound=!s.default.useSound,s.default.useSound?this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[0]:this.sound.getComponent(cc.Sprite).spriteFrame=this.soundSprites[1]},r([u(cc.Node)],e.prototype,"slogun",void 0),r([u(cc.Label)],e.prototype,"play",void 0),r([u(cc.Sprite)],e.prototype,"sound",void 0),r([u([cc.SpriteFrame])],e.prototype,"soundSprites",void 0),r([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Settings":"Settings","../core/Timer":"Timer"}],ObstacleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5a109teWuRAaqJ6PNqCUGCq","ObstacleMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s,a=t("./Defines"),p=t("./Obstacle"),u=t("./CollectibleMgr"),l=cc._decorator,h=l.ccclass,f=l.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.DEAD=4]="DEAD"})(c||(c={})),function(t){t[t.TUBE=0]="TUBE",t[t.COIN=1]="COIN"}(s||(s={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstaclePrefab=null,e.collectibleMgr=null,e.obstacles=[],e.currentIndex=0,e.currentX=0,e.currentY=0,e.nextY=0,e.currentDistanceX=0,e.currentDistanceY=0,e.currentSpacing=0,e.currentObstacle=s.TUBE,e.coin=0,e}return n(e,t),e.prototype.update=function(){switch(this.state){case c.INIT:break;case c.PLAYING:var t=this.obstacles[this.currentIndex].getComponent(p.default);t.IsHidden()&&this.Spawn(t);break;case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:if(this.currentDistanceX=a.default.OBSTACLE_DISTANCE_X,this.currentDistanceY=a.default.OBSTACLE_DISTANCE_Y,this.currentSpacing=a.default.OBSTACLE_SPACING_MAX,0==this.obstacles.length)for(var e=0;e<a.default.OBSTACLE_MAX;e++)(o=cc.instantiate(this.obstaclePrefab)).parent=this.node,o.active=!1,this.obstacles.push(o);else for(e=0;e<a.default.OBSTACLE_MAX;e++)this.obstacles[e].active=!1;this.collectibleMgr.Init();break;case c.PLAYING:for(this.currentIndex=0,this.coin=0,this.currentX=cc.Camera.main.node.position.x+2*cc.winSize.width,this.nextY=0,e=0;e<a.default.OBSTACLE_MAX;e++){var o=this.obstacles[e].getComponent(p.default);if(0==e)this.Spawn(o,!0);else for(;!this.Spawn(o););}}},e.prototype.Spawn=function(t,e){void 0===e&&(e=!1);var o=a.RandomInt(0,100),i=e||o<50;if(this.currentObstacle==s.COIN&&(i=!0),i)return this.currentY=this.nextY,this.nextY=this.GetObstacleY(this.currentY),t.Spawn(this.currentX,this.currentY,this.currentSpacing),this.currentX+=this.currentDistanceX,this.currentObstacle=s.TUBE,this.currentIndex++,this.currentIndex==a.default.OBSTACLE_MAX&&(this.currentIndex=0),!0;var n=cc.winSize.height/2+this.currentY+(this.nextY-this.currentY)/2,r=a.RandomInt(100,150),c=!1;this.coin++,10==this.coin&&(c=!0,this.coin=0),c&&(r=a.RandomInt(200,250)),n+=a.RandomInt(0,100)<50?r:-r,this.currentObstacle==s.TUBE&&(this.currentX-=this.currentDistanceX/2),this.collectibleMgr.Spawn(c?a.CollectItem.PEPCOIN:a.CollectItem.COIN,this.currentX,n),this.currentX+=this.currentDistanceX/2,this.currentObstacle=s.COIN},e.prototype.SetTheme=function(t){for(var e=0;e<a.default.OBSTACLE_MAX;e++)this.obstacles[e].getComponent(p.default).SetTheme(t)},e.prototype.GetObstacleY=function(t){var e=a.RandomInt(this.currentDistanceY,this.currentDistanceY+50);return a.RandomInt(0,100)<50?t+e>400?t-=e:t+=e:t-e<-200?t+=e:t-=e,cc.misc.clampf(t,-200,400)},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Hide=function(){for(var t=0;t<a.default.OBSTACLE_MAX;t++)this.obstacles[t].getComponent(p.default).Hide()},e.prototype.Dead=function(){this.SetState(c.DEAD)},r([f({type:cc.Prefab})],e.prototype,"obstaclePrefab",void 0),r([f({type:u.default})],e.prototype,"collectibleMgr",void 0),r([h],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./CollectibleMgr":"CollectibleMgr","./Defines":"Defines","./Obstacle":"Obstacle"}],Obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"f985auzOcBFAYUlYmhjhVPr","Obstacle");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=cc._decorator,a=s.ccclass,p=s.property;(function(t){t[t.PLAYING=0]="PLAYING",t[t.HIDE=1]="HIDE"})(c||(c={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.top=null,e.bottom=null,e}return n(e,t),e.prototype.update=function(){switch(this.state){case c.PLAYING:cc.Camera.main.node.position.x-this.node.position.x>=this.node.width&&this.SetState(c.HIDE);break;case c.HIDE:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.PLAYING:this.node.active=!0;break;case c.HIDE:this.node.active=!1}},e.prototype.Spawn=function(t,e,o){var i=cc.winSize.height-o;this.top.setPosition(0,cc.winSize.height-i/2),this.bottom.setPosition(0,i/2),this.node.setPosition(t,e),this.SetState(c.PLAYING)},e.prototype.SetTheme=function(t){this.top.getComponent(cc.Sprite).spriteFrame=this.sprites[t],this.bottom.getComponent(cc.Sprite).spriteFrame=this.sprites[t]},e.prototype.Hide=function(){cc.tween(this.top).to(1,{position:cc.v3(0,cc.winSize.height+400,0)}).start(),cc.tween(this.bottom).to(1,{position:cc.v3(0,-400,0)}).start()},e.prototype.IsHidden=function(){return this.state==c.HIDE},r([p({type:[cc.SpriteFrame]})],e.prototype,"sprites",void 0),r([p({type:cc.Node})],e.prototype,"top",void 0),r([p({type:cc.Node})],e.prototype,"bottom",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PopupCoin:[function(t,e,o){"use strict";cc._RF.push(e,"4b8dbx0F+1EK4gLUoDKA4c0","PopupCoin");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coin=null,e.highCoin=null,e.turn=null,e.retry=null,e.store=null,e.new=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetInfo=function(t,e,o){this.highCoin.string=t>e?""+t:""+e,this.coin.string=""+t,this.turn.string=o>0?"B\u1ea1n c\xf2n "+o+" l\u01b0\u1ee3t ch\u01a1i":"B\u1ea1n \u0111\xe3 h\u1ebft l\u01b0\u1ee3t ch\u01a1i",this.new.active=t>e,this.retry.active=o>0,this.store.active=!this.retry.active},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},r([a({type:cc.Label})],e.prototype,"coin",void 0),r([a({type:cc.Label})],e.prototype,"highCoin",void 0),r([a({type:cc.Label})],e.prototype,"turn",void 0),r([a({type:cc.Node})],e.prototype,"retry",void 0),r([a({type:cc.Node})],e.prototype,"store",void 0),r([a({type:cc.Node})],e.prototype,"new",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PopupError:[function(t,e,o){"use strict";cc._RF.push(e,"d4675oSmoFCYbZsUn1UOBSA","PopupError");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.buttonSprite=null,e.message=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetMessage=function(t){this.message.string=t},e.prototype.Show=function(t){this.buttonSprite.spriteFrame=this.sprites[t-1],this.node.active=!0},e.prototype.Hide=function(t){cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(t).start()},r([a({type:[cc.SpriteFrame]})],e.prototype,"sprites",void 0),r([a({type:cc.Sprite})],e.prototype,"buttonSprite",void 0),r([a({type:cc.Label})],e.prototype,"message",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Scrollable:[function(t,e,o){"use strict";cc._RF.push(e,"57b7aKPTL1GaKtvIwp9ztlP","Scrollable");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=t("./Defines"),a=cc._decorator,p=a.ccclass,u=a.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.DEAD=3]="DEAD"})(c||(c={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.speed=0,e.overlapOffset=2,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case c.INIT:break;case c.PLAYING:for(var e=cc.Camera.main.node.position,o=0;o<this.sprites.length;o++)e.x-this.sprites[o].position.x-this.node.position.x>=this.sprites[o].width-this.overlapOffset&&(this.sprites[o].setPosition(this.sprites[this.lastIndex].position.x+this.sprites[this.lastIndex].width-this.overlapOffset,this.sprites[o].position.y),this.lastIndex++,this.lastIndex==this.sprites.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x+this.speed*s.default.GAME_BASE_SPEED*t,this.node.position.y);break;case c.DEAD:}},e.prototype.SetState=function(t){switch(this.state=t,t){case c.INIT:for(var e=0,o=0;o<this.sprites.length;o++)this.sprites[o].setPosition(e,this.sprites[o].position.y),e+=this.sprites[o].width-this.overlapOffset;this.lastIndex=this.sprites.length-1,this.node.setPosition(0,this.node.position.y);break;case c.PLAYING:case c.DEAD:}},e.prototype.SetTheme=function(t){for(var e=0;e<this.sprites.length;e++)this.sprites[e].getComponent(cc.Sprite).spriteFrame=t[e]},e.prototype.Init=function(){this.SetState(c.INIT)},e.prototype.Play=function(){this.SetState(c.PLAYING)},e.prototype.Dead=function(){this.SetState(c.DEAD)},e.prototype.Pause=function(){this.SetState(c.PAUSE)},e.prototype.Resume=function(){this.state=c.PLAYING},r([u({type:[cc.Node]})],e.prototype,"sprites",void 0),r([u({type:cc.Float})],e.prototype,"speed",void 0),r([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Defines":"Defines"}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"407108dGK9E7Zg4Zj6ToW2S","Settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new function(){this.useSound=!0},cc._RF.pop()},{}],Timer:[function(t,e,o){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0||this.isDone||(this.isDone=!0,0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();o.default=i,cc._RF.pop()},{}],Transition:[function(t,e,o){"use strict";cc._RF.push(e,"213b7EWgRtB2bldftJLKuwd","Transition");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fadeCallback=null,e}return n(e,t),e.prototype.onFade=function(){this.fadeCallback()},r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}]},{},["API","Background","Collectible","CollectibleMgr","Defines","Flappy","GameMgr","Init","Obstacle","ObstacleMgr","Scrollable","Settings","Transition","EventMgr","Input","Timer","Ingame","Loading","MainMenu","PopupCoin","PopupError"]);