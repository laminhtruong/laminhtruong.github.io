System.register("chunks:///Defines.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var e,i,A,_,o,s;return t({AmaReadContent:function(t){return AmaSdk.ContentReader.getNotes(t)},_temp:void 0,BallEvent:void 0,BackgroundEvent:void 0,ColliderGroup:void 0}),{setters:[function(t){e=t.classCallCheck},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"45f53txDeFIZrmsGVaQkohD","Defines",void 0),A=new function t(){e(this,t),this.AUDIO_DELAY=0,this.BASKET_START_Y=-1,this.BASKET_START_Z=0,this.BALL_MAX=20,this.BALL_START_Y=this.BASKET_START_Y-8,this.BALL_START_Z=this.BASKET_START_Z-25,this.BALL_MIDDLE_Y=21,this.BALL_PERCENT_MOVE_BEZIER=.85,this.BALL_FLY_TIME=2,this.BALL_INACTIVE_Y=this.BASKET_START_Y-10,this.BALL_ALIGN_DURATION=.4},function(t){t.SCORE="OnScore",t.COMBO="OnCombo",t.COLLISION_WITH_BASKET="OnCollisionWithBasket"}(_||t("BallEvent",_={})),function(t){t.FADE="OnBackgroundFade"}(o||t("BackgroundEvent",o={})),function(t){t[t.BALL=1]="BALL",t[t.BASKET=2]="BASKET"}(s||t("ColliderGroup",s={})),i._RF.pop(),t("default",A)}}}));

System.register("chunks:///EventMgr.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var e,r,s,c,i,u,l;return{setters:[function(t){e=t.inherits,r=t.classCallCheck,s=t.possibleConstructorReturn,c=t.getPrototypeOf},function(t){i=t.cclegacy,u=t.EventTarget}],execute:function(){i._RF.push({},"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr",void 0),t("EventMgr",l=function(t){function n(){return r(this,n),s(this,c(n).apply(this,arguments))}return e(n,t),n}(u)),l.instance=null,l.instance=new l,i._RF.pop()}}}));

System.register("chunks:///Ball.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Defines.js","./EventMgr.js"],(function(e,t){var i,s,n,o,a,r,c,h,E,l,T,d,_,u,C,L,p,S,B,f,y,v,A,R,I,b,M,O,g;return e({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0,STATE:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,s=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,h=e.createClass},function(e){E=e.cclegacy,l=e._decorator,T=e.Node,d=e.ColliderComponent,_=e.Vec3,u=e.math,C=e.PhysicsSystem,L=e.RigidBodyComponent,p=e.Component},function(e){S=e.default,B=e.ColliderGroup,f=e.BallEvent},function(e){y=e.EventMgr}],execute:function(){E._RF.push({},"50312a6y8RD8bBn7w0FtWuT","Ball",void 0),b=l.ccclass,M=l.property,function(e){e[e.INIT=0]="INIT",e[e.MOVE_BEZIER=1]="MOVE_BEZIER",e[e.MOVE_FREE=2]="MOVE_FREE",e[e.INACTIVE=3]="INACTIVE",e[e.COLLECT_NORMAL=4]="COLLECT_NORMAL",e[e.COLLECT_PERFECT=5]="COLLECT_PERFECT",e[e.COLLECT_MISS=6]="COLLECT_MISS"}(O||(O={})),v=M({type:[T]}),g=b((I=i((R=function(e){function t(){var e,i;n(this,t);for(var s=arguments.length,h=new Array(s),E=0;E<s;E++)h[E]=arguments[E];return i=o(this,(e=a(t)).call.apply(e,[this].concat(h))),r(i,"effects",I,c(i)),i.arrMoveByBezierX=[],i.arrMoveByBezierY=[S.BALL_START_Y,S.BALL_MIDDLE_Y+.5*(S.BALL_START_Y+S.BASKET_START_Y),S.BASKET_START_Y],i.arrMoveByBezierZ=[S.BALL_START_Z,S.BALL_START_Z+.8*(S.BASKET_START_Z-S.BALL_START_Z),S.BASKET_START_Z],i.state=O.INACTIVE,i.comboStage=[1,3,5,10,15],i.percent=0,i.flyTime=2,i.beatIndex=0,i.isPerfect=!0,i.isCollected=!1,i}return s(t,e),h(t,[{key:"onLoad",value:function(){this.node.active=!1}},{key:"start",value:function(){var e=this.getComponent(d);e.setGroup(B.BALL),e.setMask(B.BASKET),e.on("onCollisionEnter",this.onCollision,this),e.on("onTriggerEnter",this.onTrigger,this)}},{key:"update",value:function(e){var t=new _(this.rotateSpeed).multiplyScalar(e);switch(t.add(this.node.eulerAngles),this.state){case O.INIT:break;case O.MOVE_BEZIER:this.node.eulerAngles=t,this.UpdateMoveBezier(e),this.percent>=S.BALL_PERCENT_MOVE_BEZIER&&this.SetState(O.MOVE_FREE);break;case O.MOVE_FREE:if(this.node.eulerAngles=t,this.isCollected){this.SetState(this.isPerfect?O.COLLECT_PERFECT:O.COLLECT_NORMAL);break}this.CheckMiss()&&this.SetState(O.COLLECT_MISS);break;case O.COLLECT_MISS:case O.COLLECT_NORMAL:case O.COLLECT_PERFECT:this.node.position.y<S.BALL_INACTIVE_Y&&this.SetState(O.INACTIVE);case O.INACTIVE:}}},{key:"onCollision",value:function(e){switch(this.state){case O.MOVE_FREE:-1!=e.otherCollider.node.name.indexOf("Collider")&&(y.instance.emit(f.COLLISION_WITH_BASKET,{}),this.isPerfect=!1)}}},{key:"onTrigger",value:function(e){switch(this.state){case O.MOVE_FREE:var t=this.node.scale.x;this.node.position.x>this.basket.position.x-.5*t&&this.node.position.x<this.basket.position.x+.5*t&&(this.isCollected=!0)}}},{key:"SetState",value:function(e){switch(this.state=e,e){case O.INIT:this.isPerfect=!0,this.isCollected=!1,this.node.active=!0,this.SetState(O.MOVE_BEZIER);break;case O.MOVE_BEZIER:this.percent=0,this.rigidbody.isKinematic=!0,this.arrMoveByBezierX[0]=this.node.position.x,this.SetEffect(this.combo),this.rotateSpeed=new _(u.randomRange(300,400),u.randomRange(-100,100),u.randomRange(-100,100));break;case O.MOVE_FREE:var t=new _(this.node.position.x,S.BASKET_START_Y,S.BASKET_START_Z).subtract(this.node.position),i=(1-S.BALL_PERCENT_MOVE_BEZIER)*this.flyTime;this.rigidbody.setLinearVelocity(t.multiplyScalar(1/i).add(new _(0,Math.abs(C.instance.gravity.y),0).multiplyScalar(.5*i))),this.rigidbody.isKinematic=!1,this.rigidbody.wakeUp();break;case O.COLLECT_MISS:y.instance.emit(f.SCORE,{index:this.beatIndex,miss:!0,perfect:!1});break;case O.COLLECT_NORMAL:y.instance.emit(f.SCORE,{index:this.beatIndex,miss:!1,perfect:!1});break;case O.COLLECT_PERFECT:y.instance.emit(f.SCORE,{index:this.beatIndex,miss:!1,perfect:!0});break;case O.INACTIVE:this.rigidbody.sleep()}}},{key:"Throw",value:function(e,t,i,s,n){this.beatIndex=e,this.minX=i,this.maxX=s,this.combo=n,this.rigidbody=this.getComponent(L),this.node.setPosition(t,S.BALL_START_Y,S.BALL_START_Z),this.SetState(O.INIT)}},{key:"SetEffect",value:function(e){for(var t=-1,i=0;i<this.comboStage.length;i++)e>=this.comboStage[i]&&t++;for(var s=0;s<this.effects.length;s++)this.effects[s].active=s<=t}},{key:"IsInactive",value:function(){return this.state==O.INACTIVE}},{key:"CheckMiss",value:function(){var e=this.node.scale.x,t=this.node.position,i=new _(0,0,0);return this.rigidbody.getLinearVelocity(i),t.y<this.basket.position.y&&(t.x<this.basket.position.x-e||t.x>this.basket.position.x+e||t.z<this.basket.position.z-e||t.z>this.basket.position.z+e)||t.y<=this.basket.position.y-1||t.z<this.basket.position.z-e&&i.z<0||t.z>this.basket.position.z+e&&i.z>0||t.x<this.minX-e||t.x>this.maxX+e}},{key:"UpdateMoveBezier",value:function(e){this.percent=this.MoveToTarget(this.percent,S.BALL_PERCENT_MOVE_BEZIER,1/this.flyTime,e),this.node.setPosition(this.Bezier(this.percent,this.arrMoveByBezierX),this.Bezier(this.percent,this.arrMoveByBezierY),this.Bezier(this.percent,this.arrMoveByBezierZ))}},{key:"MoveToTarget",value:function(e,t,i,s){return i=Math.abs(i),e<t?Math.min(e+i*s,t):e>t?Math.max(e-i*s,t):e}},{key:"Bezier2P",value:function(e,t,i,s){var n=s-i+1;return n>2?(1-e)*this.Bezier2P(e,t,i,s-1)+e*this.Bezier2P(e,t,i+1,s):n>=2?(1-e)*t[i]+e*t[s]:n>=1?t[i]:0}},{key:"Bezier1P",value:function(e,t,i){return this.Bezier2P(e,t,i,t.length-1)}},{key:"Bezier",value:function(e,t){return this.Bezier2P(e,t,0,t.length-1)}}]),t}(p)).prototype,"effects",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=R))||A,E._RF.pop(),e("default",g)}}}));

System.register("chunks:///core/Timer.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,s,n,r;return{setters:[function(t){i=t.createClass,s=t.classCallCheck},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"6b85cbHB39ATpO/QtAEphQG","Timer",void 0),r=function(){function t(){s(this,t),this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return i(t,[{key:"SetDuration",value:function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1}},{key:"AddTime",value:function(t){this.timer+=t,this.overhead=0,this.isDone=!1}},{key:"GetTimePercent",value:function(){return this.timer/this.duration}},{key:"Reset",value:function(){this.timer=this.duration,this.overhead=0,this.isDone=!1}},{key:"IsDone",value:function(){return 0==this.timer}},{key:"JustFinished",value:function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))}},{key:"Update",value:function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))}}]),t}(),n._RF.pop(),t("default",r)}}}));

System.register("chunks:///BallMgr.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Defines.js","./EventMgr.js","./Ball.js","./core/Timer.js"],(function(t,e){var i,n,o,s,a,r,l,h,c,u,f,m,d,b,v,p,T,y,I,g,k,w,A,N,_,B,O,P,x,L,S,D,G,E,C;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0,STATE:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,o=t.classCallCheck,s=t.possibleConstructorReturn,a=t.getPrototypeOf,r=t.initializerDefineProperty,l=t.assertThisInitialized,h=t.createClass,c=t.objectSpread2},function(t){u=t.cclegacy,f=t._decorator,m=t.Prefab,d=t.AudioSourceComponent,b=t.Node,v=t.instantiate,p=t.math,T=t.clamp,y=t.Component},function(t){I=t.default,g=t.BallEvent},function(t){k=t.EventMgr},function(t){w=t.default},function(t){A=t.default}],execute:function(){u._RF.push({},"b69cb2ma7FGN4AP/vv6f0Lr","BallMgr",void 0),D=f.ccclass,G=f.property,function(t){t[t.NONE=0]="NONE",t[t.INIT=1]="INIT",t[t.PLAYING=2]="PLAYING"}(E||(E={})),N=G({type:m}),_=G({type:d}),B=G({type:b}),C=D((x=i((P=function(t){function e(){var t,i;o(this,e);for(var n=arguments.length,h=new Array(n),c=0;c<n;c++)h[c]=arguments[c];return i=s(this,(t=a(e)).call.apply(t,[this].concat(h))),r(i,"ballPrefab",x,l(i)),r(i,"mainAudio",L,l(i)),r(i,"basket",S,l(i)),i.timerDelay=new A,i.balls=[],i.ballThrowOffset=[],i.ballThrowPosition=[],i.currentTime=0,i.noteIndex=0,i.beatIndex=0,i.minX=-3,i.maxX=3,i.combo=0,i}return n(e,t),h(e,[{key:"onLoad",value:function(){}},{key:"start",value:function(){k.instance.on(g.SCORE,this.OnScore,this)}},{key:"update",value:function(t){switch(this.state){case E.NONE:case E.INIT:break;case E.PLAYING:this.timerDelay.Update(t),this.timerDelay.JustFinished()&&this.mainAudio.play(),this.UpdateMakeBall(t)}}},{key:"SetState",value:function(t){switch(this.state=t,t){case E.NONE:break;case E.INIT:this.GenerateBallThrowPosition(),this.combo=0,this.flyTime=I.BALL_FLY_TIME,this.currentTime=this.notes[this.noteIndex].time-this.flyTime;var e=Math.max(this.currentTime,0-I.AUDIO_DELAY),i=e+I.AUDIO_DELAY;if(this.mainAudio.currentTime=i,this.timerDelay.SetDuration(e-this.currentTime),0==this.balls.length)for(var n=0;n<I.BALL_MAX;n++){var o=v(this.ballPrefab);o.parent=this.node,o.getComponent(w).basket=this.basket,this.balls.push(o)}}}},{key:"Init",value:function(){this.SetState(E.INIT)}},{key:"Play",value:function(){this.SetState(E.PLAYING)}},{key:"UpdateMakeBall",value:function(t){this.currentTime+=t,this.noteIndex<this.notes.length&&this.currentTime>=this.notes[this.noteIndex].time-this.flyTime&&this.Throw(this.noteIndex++)}},{key:"SetNotes",value:function(t){this.notes=t}},{key:"GetBallThrowOffset",value:function(t){var e=0==t?0:this.notes[t].time-this.notes[t-1].time,i=(e>I.BALL_ALIGN_DURATION?5*e:0)*p.randomRange(.3,1),n=this.noteIndex/this.notes.length;if(n<.5){var o=5*(.3-n);i/=T(o,1,o)}return i}},{key:"GenerateBallThrowOffset",value:function(){for(var t=0;t<this.notes.length;t++){var e=t<=this.noteIndex?0:this.GetBallThrowOffset(t);this.ballThrowOffset[t]=e}}},{key:"GenerateBallThrowPosition",value:function(){this.GenerateBallThrowOffset();for(var t=0;t<this.notes.length;t++)if(0==t||t<=this.noteIndex)this.ballThrowPosition[t]=0;else{var e=this.ballThrowOffset[t],i=this.ballThrowPosition[t-1];e*=p.randomRange(0,1)>(i-this.minX)/(this.maxX-this.minX)?1:-1,this.ballThrowPosition[t]=T(i+e,this.minX,this.maxX)}}},{key:"GetInactiveBall",value:function(){for(var t=0;t<I.BALL_MAX;t++){if(this.balls[t].getComponent(w).IsInactive())return this.balls[t]}return null}},{key:"Throw",value:function(t){var e=this.GetInactiveBall();null!=e&&e.getComponent(w).Throw(t,this.ballThrowPosition[t],this.minX,this.maxX,this.combo)}},{key:"OnScore",value:function(t){t.miss?this.combo=0:t.perfect?this.combo++:this.combo=1,this.beatIndex=t.index,k.instance.emit(g.COMBO,c({},t,{combo:this.combo,progress:this.beatIndex/(this.notes.length-1)}))}}]),e}(y)).prototype,"ballPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(P.prototype,"mainAudio",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(P.prototype,"basket",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=P))||O,u._RF.pop(),t("default",C)}}}));

System.register("chunks:///core/Input.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,o){var n,e,i,s,c,u,a,h,r,l,p,v,d,f,y;return t({_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,e=t.classCallCheck,i=t.possibleConstructorReturn,s=t.getPrototypeOf,c=t.createClass},function(t){u=t.cclegacy,a=t.Vec2,h=t.Node,r=t.Component}],execute:function(){u._RF.push({},"86a1eETgqhC7LCRoYW35gpp","Input",void 0),d=cc._decorator,f=d.ccclass,d.property,y=f((v=p=function(t){function o(){var t,n;e(this,o);for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return(n=i(this,(t=s(o)).call.apply(t,[this].concat(u)))).position=new a(0,0),n.prevPosition=new a(0,0),n.delta=new a(0,0),n.isHold=!1,n}return n(o,t),c(o,[{key:"onLoad",value:function(){o.instance=this,this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this)}},{key:"start",value:function(){}},{key:"update",value:function(t){this.isHold&&(cc.Vec2.subtract(this.delta,this.position,this.prevPosition),this.prevPosition=this.position)}},{key:"onTouchStart",value:function(t){this.position=t.touch.getLocation(),this.prevPosition=t.touch.getLocation(),this.isHold=!0}},{key:"onTouchEnd",value:function(t){this.delta=new cc.Vec2(0,0),this.isHold=!1}},{key:"onTouchMove",value:function(t){this.position=t.touch.getLocation()}}]),o}(r),p.instance=null,l=v))||l,u._RF.pop(),t("default",y)}}}));

System.register("chunks:///Basket.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Defines.js","./EventMgr.js","./core/Input.js"],(function(e,t){var o,n,i,s,r,a,l,c,f,h,u,p,d,m,v,C,g,y,I,F,k,N,w,_,E,A,O,P,L,S,T,b,B,x;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0,STATE:void 0}),{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inherits,i=e.classCallCheck,s=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){f=e.cclegacy,h=e._decorator,u=e.Node,p=e.Color,d=e.ColliderComponent,m=e.lerp,v=e.clamp,C=e.math,g=e.tween,y=e.Vec3,I=e.ParticleSystemComponent,F=e.Component},function(e){k=e.ColliderGroup,N=e.BackgroundEvent},function(e){w=e.EventMgr},function(e){_=e.default}],execute:function(){f._RF.push({},"3392a5tZUFJAZwWtbhZA1/m","Basket",void 0),T=h.ccclass,b=h.property,function(e){e[e.NONE=0]="NONE",e[e.INIT=1]="INIT",e[e.PLAYING=2]="PLAYING"}(B||(B={})),E=b({type:u}),A=b({type:[u]}),x=T((L=o((P=function(e){function t(){var e,o;i(this,t);for(var n=arguments.length,c=new Array(n),f=0;f<n;f++)c[f]=arguments[f];return o=s(this,(e=r(t)).call.apply(e,[this].concat(c))),a(o,"main",L,l(o)),a(o,"effects",S,l(o)),o.effectsColor=[],o}return n(t,e),c(t,[{key:"onLoad",value:function(){this.effectsColor.push(new p("#00FFFF")),this.effectsColor.push(new p("#005DFF")),this.effectsColor.push(new p("#FF4C4C")),this.effectsColor.push(new p("#FF7F45")),this.effectsColor.push(new p("#FF00FF")),this.effectsColor.push(new p("#7B00FF"))}},{key:"start",value:function(){for(var e=this.getComponentsInChildren(d),t=0;t<e.length;t++)e[t].setGroup(k.BASKET),e[t].setMask(k.BALL);w.instance.on(N.FADE,this.OnBackgroundFade,this)}},{key:"update",value:function(e){switch(this.state){case B.NONE:case B.INIT:break;case B.PLAYING:if(_.instance.isHold){var t=m(this.node.position.x,this.node.position.x+_.instance.delta.x,e);t=v(t,-3,3),this.node.setPosition(t,this.node.position.y,this.node.position.z)}}}},{key:"SetState",value:function(e){switch(this.state=e,this.state){case B.NONE:case B.INIT:case B.PLAYING:}}},{key:"Init",value:function(){this.SetState(B.INIT)}},{key:"Play",value:function(){this.SetState(B.PLAYING)}},{key:"Shake",value:function(e){this.main.setPosition(C.randomRange(-e.x,e.x),e.y,C.randomRange(-e.z,e.z)),g(this.main).stop(),g(this.main).to(1,{position:y.ZERO},{easing:"elasticOut"}).start()}},{key:"Flash",value:function(e){if(e)for(var t=this.effects[1].getComponentsInChildren(I),o=0;o<t.length;o++)t[o].stop(),t[o].play();else for(var n=this.effects[0].getComponentsInChildren(I),i=0;i<n.length;i++)n[i].stop(),n[i].play()}},{key:"OnBackgroundFade",value:function(e){for(var t=e.index,o=this.effects[0].getComponentsInChildren(I),n=0;n<o.length;n++)if("glow_center"==o[n].node.name||"ring"==o[n].node.name){var i=o[n].colorOverLifetimeModule.color.gradient;i.colorKeys=[{color:this.effectsColor[2*t+0],time:0},{color:this.effectsColor[2*t+1],time:1}],i.alphaKeys=[{alpha:255,time:0},{alpha:0,time:1}]}for(var s=this.effects[1].getComponentsInChildren(I),r=0;r<s.length;r++)if("lightning_center"==s[r].node.name){var a=s[r].colorOverLifetimeModule.color.gradient;a.colorKeys=[{color:p.WHITE,time:0},{color:this.effectsColor[2*t+0],time:1}],a.alphaKeys=[{alpha:255,time:0},{alpha:255,time:1}]}else if("glow_center"==s[r].node.name||"spark"==s[r].node.name)s[r].startColor.color=this.effectsColor[2*t+0];else if("ring"==s[r].node.name){var l=s[r].colorOverLifetimeModule.color.gradient;l.colorKeys=[{color:p.WHITE,time:0},{color:this.effectsColor[2*t+0],time:.46},{color:this.effectsColor[2*t+1],time:1}],l.alphaKeys=[{alpha:255,time:0},{alpha:0,time:1}]}}}]),t}(F)).prototype,"main",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(P.prototype,"effects",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=P))||O,f._RF.pop(),e("default",x)}}}));

System.register("chunks:///ui/ProgressBar.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,s,o,n,a,c,l,u,p,h,f,d,g,v,y,S,_,m,b,P,C,R,k,z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,s=e.classCallCheck,o=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,h=e.SpriteComponent,f=e.Node,d=e.ParticleSystemComponent,g=e.Component}],execute:function(){u._RF.push({},"fe170XaqNtPUZ2519hbRDDZ","ProgressBar",void 0),k=p.ccclass,z=p.property,e("ProgressBar",(v=k("ProgressBar"),y=z({type:h}),S=z({type:[f]}),_=z({type:[f]}),v((P=r((b=function(e){function t(){var e,r;s(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=o(this,(e=n(t)).call.apply(e,[this].concat(l))),a(r,"progress",P,c(r)),a(r,"stars",C,c(r)),a(r,"musicNote",R,c(r)),r.currentStar=0,r}return i(t,e),l(t,[{key:"start",value:function(){}},{key:"SetProgress",value:function(e){if(this.progress.fillRange=e,this.musicNote.setPosition(0,270*e,0),0==e)this.Reset();else for(;e>=.3333*(this.currentStar+1)&&(this.SetStar(this.currentStar++),this.currentStar!=this.stars.length););}},{key:"SetStar",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.stars[e].getComponentsInChildren(d),i=0;i<r.length;i++)r[i].stop(),t||r[i].play()}},{key:"Reset",value:function(){this.currentStar=0;for(var e=0;e<this.stars.length;e++)this.SetStar(e,!0)}}]),t}(g)).prototype,"progress",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=r(b.prototype,"stars",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=r(b.prototype,"musicNote",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m)),u._RF.pop()}}}));

System.register("chunks:///ui/Ingame.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./ProgressBar.js"],(function(e,t){var i,o,r,n,s,c,a,l,u,p,f,b,h,d,g,m,v,y,_,S,C,w,P,k,x,z,I,T,D,B,j,F,R,A,G;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,f=e.Prefab,b=e.Node,h=e.LabelComponent,d=e.instantiate,g=e.SpriteComponent,m=e.Color,v=e.tween,y=e.Vec3,_=e.Component},function(e){S=e.ProgressBar}],execute:function(){u._RF.push({},"c0430wYDwtD3JkGqQ19Hnu4","Ingame",void 0),A=p.ccclass,G=p.property,e("Ingame",(C=A("Ingame"),w=G({type:f}),P=G({type:b}),k=G({type:h}),x=G({type:h}),z=G({type:S}),C((D=i((T=function(e){function t(){var e,i;r(this,t);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=n(this,(e=s(t)).call.apply(e,[this].concat(l))),c(i,"lifePrefab",D,a(i)),c(i,"lifeContainer",B,a(i)),c(i,"score",j,a(i)),c(i,"combo",F,a(i)),c(i,"progress",R,a(i)),i.comboText=["None","Great","Awesome","Bravo","Fantastic","Superb","Incredible"],i.lifeSprite=[],i}return o(t,e),l(t,[{key:"start",value:function(){}},{key:"update",value:function(e){}},{key:"Init",value:function(e){if(e>1&&0==this.lifeSprite.length)for(var t=60*-(e-1)/2,i=0;i<e;i++){var o=d(this.lifePrefab);o.parent=this.lifeContainer,o.setPosition(t+60*i,0,0),this.lifeSprite.push(o.getComponent(g))}this.SetScore(0),this.SetCombo(0)}},{key:"SetLife",value:function(e){for(var t=0;t<this.lifeSprite.length;t++)this.lifeSprite[t].color=new m(255,255,255,t<e?255:128)}},{key:"SetScore",value:function(e){this.score.string=e}},{key:"SetCombo",value:function(e){e<=0?this.combo.string="":(e>=this.comboText.length?this.combo.string=(this.comboText[this.comboText.length-1]+" +"+(e-(this.comboText.length-1))).toUpperCase():this.combo.string=this.comboText[e].toUpperCase(),this.combo.node.setScale(1.5,1.5,1.5),v(this.combo.node).stop(),v(this.combo.node).to(.5,{scale:new y(1,1,1)},{easing:"elasticOut"}).start())}},{key:"SetProgress",value:function(e){this.progress.SetProgress(e)}}]),t}(_)).prototype,"lifePrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(T.prototype,"lifeContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(T.prototype,"score",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(T.prototype,"combo",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(T.prototype,"progress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=T))||I)),u._RF.pop()}}}));

System.register("chunks:///GameMgr.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Defines.js","./EventMgr.js","./BallMgr.js","./core/Input.js","./Basket.js","./ui/Ingame.js"],(function(e,t){var i,n,s,a,o,r,c,l,u,h,f,b,p,d,g,I,m,v,_,O,y,A,k,S,R,L,N,T,w,G,P,C,D,M,Y,E;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0,STATE:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,s=e.classCallCheck,a=e.possibleConstructorReturn,o=e.getPrototypeOf,r=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,h=e.AudioSourceComponent,f=e.PhysicsSystem,b=e.Vec3,p=e.loader,d=e.Component},function(e){g=e.BallEvent,I=e.AmaReadContent},function(e){m=e.EventMgr},function(e){v=e.default},function(e){_=e.default},function(e){O=e.default},function(e){y=e.Ingame}],execute:function(){u._RF.push({},"0afcbVbyR9PZLYJkXDtYNU8","GameMgr",void 0),C=cc._decorator,D=C.ccclass,M=C.property,function(e){e[e.INIT=0]="INIT",e[e.LOADING=1]="LOADING",e[e.LOADING_ERROR=2]="LOADING_ERROR",e[e.TOUCH_TO_PLAY=3]="TOUCH_TO_PLAY",e[e.PLAYING=4]="PLAYING"}(Y||(Y={})),A=M({type:v}),k=M({type:O}),S=M({type:y}),R=M({type:h}),E=D((T=i((N=function(e){function t(){var e,i;s(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return i=a(this,(e=o(t)).call.apply(e,[this].concat(l))),r(i,"ballMgr",T,c(i)),r(i,"basket",w,c(i)),r(i,"viewIngame",G,c(i)),r(i,"mainAudio",P,c(i)),i}return n(t,e),l(t,[{key:"onLoad",value:function(){f.instance.gravity=new b(0,-40,0)}},{key:"start",value:function(){this.Init(),m.instance.on(g.COMBO,this.OnCombo,this)}},{key:"update",value:function(e){switch(this.state){case Y.INIT:case Y.LOADING:case Y.LOADING_ERROR:break;case Y.TOUCH_TO_PLAY:_.instance.isHold&&(this.ballMgr.Play(),this.basket.Play(),this.SetState(Y.PLAYING));break;case Y.PLAYING:}f.instance.deltaTime=e}},{key:"SetState",value:function(e){var t=this;switch(this.state=e,e){case Y.INIT:this.SetState(Y.LOADING);break;case Y.LOADING:p.load("https://laminhtruong.github.io/dunk-n-beat/songs/WeThreeKings_BiometrixRemix.mp3",(function(e,i){null==e?(t.mainAudio.clip=i,I("https://laminhtruong.github.io/dunk-n-beat/songs/WeThreeKings_BiometrixRemix.bin").then((function(e){t.ballMgr.SetNotes(e),t.SetState(Y.TOUCH_TO_PLAY)})).catch((function(e){console.log(e),t.SetState(Y.LOADING_ERROR)}))):(console.log(e),t.SetState(Y.LOADING_ERROR))}));break;case Y.LOADING_ERROR:break;case Y.TOUCH_TO_PLAY:this.ballMgr.Init(),this.basket.Init()}}},{key:"Init",value:function(){this.score=0,this.lifes=3,this.viewIngame.Init(this.lifes),this.SetState(Y.INIT)}},{key:"OnCombo",value:function(e){e.miss?this.lifes>0&&(this.lifes--,this.viewIngame.SetLife(this.lifes),this.lifes):(e.perfect?this.basket.Shake(new b(.2,-.5,.2)):this.basket.Shake(new b(.1,-.2,.1)),this.basket.Flash(e.perfect)),this.score+=e.combo,this.viewIngame.SetScore(this.score),this.viewIngame.SetCombo(e.combo),this.viewIngame.SetProgress(e.progress)}}]),t}(d)).prototype,"ballMgr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(N.prototype,"basket",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(N.prototype,"viewIngame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(N.prototype,"mainAudio",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=N))||L,u._RF.pop(),e("default",E)}}}));

System.register("chunks:///ui/Background.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../Defines.js","../EventMgr.js","../core/Timer.js"],(function(e,t){var n,r,i,o,s,c,a,u,d,l,g,h,p,f,v,k,y,B,m,_,x,I,C,b;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,a=e.assertThisInitialized,u=e.createClass},function(e){d=e.cclegacy,l=e._decorator,g=e.SpriteComponent,h=e.Color,p=e.tween,f=e.Component},function(e){v=e.BackgroundEvent},function(e){k=e.EventMgr},function(e){y=e.default}],execute:function(){d._RF.push({},"1e1d6UA2yRHB6vSyJPoF+qX","Background",void 0),C=l.ccclass,b=l.property,e("Background",(B=C("Background"),m=b({type:[g]}),B((I=n((x=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,u=new Array(r),d=0;d<r;d++)u[d]=arguments[d];return n=o(this,(e=s(t)).call.apply(e,[this].concat(u))),c(n,"Backgrounds",I,a(n)),n.timer=new y,n}return r(t,e),u(t,[{key:"start",value:function(){this.timer.SetDuration(10),this.StartBg()}},{key:"update",value:function(e){this.timer.Update(e),this.timer.IsDone()&&(this.Fade(),this.timer.Reset())}},{key:"StartBg",value:function(){this.currentIndex=0;for(var e=0;e<this.Backgrounds.length;e++)e==this.currentIndex?this.Backgrounds[e].color=new h(255,255,255,255):this.Backgrounds[e].color=new h(255,255,255,0)}},{key:"UpdateBg",value:function(e){}},{key:"Fade",value:function(){var e=this.currentIndex,t=this.currentIndex+1;t>=this.Backgrounds.length&&(t=0),p(this.Backgrounds[e]).to(2,{color:{r:255,g:255,b:255,a:0}},{easing:"linear"}).start(),p(this.Backgrounds[t]).to(2,{color:{r:255,g:255,b:255,a:255}},{easing:"linear"}).start(),this.currentIndex=t,k.instance.emit(v.FADE,{index:this.currentIndex})}},{key:"GetCurrentIndex",value:function(){return this.currentIndex}}]),t}(f)).prototype,"Backgrounds",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=x))||_)),d._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../Defines.js","../EventMgr.js","../Ball.js","../core/Timer.js","../BallMgr.js","../core/Input.js","../Basket.js","../ui/ProgressBar.js","../ui/Ingame.js","../GameMgr.js","../ui/Background.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/maingame/scripts/Defines.js', 'chunks:///Defines.js');
  r('project:///assets/maingame/scripts/EventMgr.js', 'chunks:///EventMgr.js');
  r('project:///assets/maingame/scripts/Ball.js', 'chunks:///Ball.js');
  r('project:///assets/maingame/scripts/core/Timer.js', 'chunks:///core/Timer.js');
  r('project:///assets/maingame/scripts/BallMgr.js', 'chunks:///BallMgr.js');
  r('project:///assets/maingame/scripts/core/Input.js', 'chunks:///core/Input.js');
  r('project:///assets/maingame/scripts/Basket.js', 'chunks:///Basket.js');
  r('project:///assets/maingame/scripts/ui/ProgressBar.js', 'chunks:///ui/ProgressBar.js');
  r('project:///assets/maingame/scripts/ui/Ingame.js', 'chunks:///ui/Ingame.js');
  r('project:///assets/maingame/scripts/GameMgr.js', 'chunks:///GameMgr.js');
  r('project:///assets/maingame/scripts/ui/Background.js', 'chunks:///ui/Background.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});