window.__require=function t(e,n,o){function i(r,c){if(!n[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){return i(e[r][1][t]||t)},p,p.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({BossStats:[function(t,e,n){"use strict";cc._RF.push(e,"34ecdeH0P5O2p4PUA0sUxgW","BossStats");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BossStats=void 0;var a=t("../Defines"),r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrHpPercent=[.8,.8,.8,.6,.6,.6,.3,.3],e.arrUltiIndex=[1,1,1,1,2,1,3,5,5],e.ARR_ULTI_INFO=[[{time:.3,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.SIN},{time:.3,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:.5,type:"END"}],[{time:.3,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.STRAIGHT},{time:.3,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:.5,type:"END"}],[{time:.3,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.SIN},{time:.3,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.SIN},{time:.3,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.SIN},{time:.3,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.SIN},{time:.3,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.SIN},{time:.3,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.SIN},{time:.3,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:.5,type:"END"}],[{time:.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:.8,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.STRAIGHT},{time:1,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.STRAIGHT},{time:1.2,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.STRAIGHT},{time:1.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:1.5,type:"END"}],[{time:.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.SIN},{time:.4,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.SIN},{time:.6,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.SIN},{time:.8,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.SIN},{time:1,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.SIN},{time:1.2,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.SIN},{time:1.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:1.5,type:"END"}],[{time:.2,type:"ATTACK",attackAngle:-120,attackType:a.LightBallType.STRAIGHT},{time:.2,type:"ATTACK",attackAngle:-60,attackType:a.LightBallType.STRAIGHT},{time:.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:.2,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:.2,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:.4,type:"ATTACK",attackAngle:-120,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ATTACK",attackAngle:-60,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:.4,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:.6,type:"ATTACK",attackAngle:-120,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ATTACK",attackAngle:-60,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:.6,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:1.2,type:"ATTACK",attackAngle:-120,attackType:a.LightBallType.SIN},{time:1.2,type:"ATTACK",attackAngle:-60,attackType:a.LightBallType.SIN},{time:1.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.SIN},{time:1.2,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.SIN},{time:1.2,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.SIN},{time:1.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:1.5,type:"ANIMATION",animName:a.VLAD_ANIM.CHARGE,animLoop:!0,animForce:!0},{time:2.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.SIN},{time:2.2,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.SIN},{time:2.2,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.SIN},{time:2.2,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.SIN},{time:2.2,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.SIN},{time:2.2,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.SIN},{time:2.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:2.5,type:"ANIMATION",animName:a.VLAD_ANIM.CHARGE,animLoop:!0,animForce:!0},{time:3.2,type:"ATTACK",attackAngle:0,attackType:a.LightBallType.STRAIGHT},{time:3.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:3.4,type:"ATTACK",attackAngle:60,attackType:a.LightBallType.STRAIGHT},{time:3.4,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:3.6,type:"ATTACK",attackAngle:120,attackType:a.LightBallType.STRAIGHT},{time:3.6,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:3.8,type:"ATTACK",attackAngle:180,attackType:a.LightBallType.STRAIGHT},{time:3.8,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:4,type:"ATTACK",attackAngle:240,attackType:a.LightBallType.STRAIGHT},{time:4,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:4.2,type:"ATTACK",attackAngle:300,attackType:a.LightBallType.STRAIGHT},{time:4.2,type:"ANIMATION",animName:a.VLAD_ANIM.ATTACK,animLoop:!1,animForce:!0},{time:4.5,type:"END"}]],e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.Init=function(){this.mConditionIndex=0},e.prototype.GetUltiInfo=function(){return this.ARR_ULTI_INFO[this.arrUltiIndex[this.mConditionIndex]]},e.prototype.CheckUltiCondition=function(t){return this.mConditionIndex<this.arrHpPercent.length&&t<=this.arrHpPercent[this.mConditionIndex]},e.prototype.UpdateConditionIndex=function(){this.mConditionIndex++},e=i([c],e)}(cc.Component));n.BossStats=s,cc._RF.pop()},{"../Defines":"Defines"}],Character:[function(t,e,n){"use strict";cc._RF.push(e,"90befBZeppB7IcsZrTyShRY","Character");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r,c=t("./core/Input"),s=t("./Defines"),l=t("./core/Timer"),p=t("./core/EventMgr"),u=t("./EnemyMgr"),h=t("./enemies/Stats"),d=t("./HealthBar"),f=cc._decorator,y=f.ccclass,m=f.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.CHASE=2]="CHASE",t[t.MOVE=3]="MOVE",t[t.WAITING=4]="WAITING",t[t.ATTACK=5]="ATTACK",t[t.DEAD=6]="DEAD"})(a||(a={})),function(t){t.IDLE="idle",t.WALK="movement",t.ATTACK_1="attack_01",t.ATTACK_2="attack_02",t.ATTACK_3="attack_03",t.ATTACK_BURST="attack_burst",t.ATTACK_CROSSBOW="attack_crossbow",t.DEAD="fall_off_ground_dead",t.HURT="get_hit"}(r||(r={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.colliders=[],e.body=null,e.stats=null,e.healthBar=null,e.arrow=null,e.timerWaiting=new l.default,e.timerCombo=new l.default,e.timerHit=new l.default,e.timerBurst=new l.default,e.combo=-1,e}return o(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.timerCombo.SetDuration(1),this.timerHit.SetDuration(.05),this.timerBurst.SetDuration(.2),this.node.setScale(s.default.CHARACTER_SCALE)},e.prototype.update=function(t){switch(this.state){case a.INIT:case a.IDLE:break;case a.MOVE:this.UpdateMove(t);break;case a.CHASE:this.UpdateMoveToTarget(t);break;case a.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(a.IDLE);case a.ATTACK:}this.IsAttackBurst()&&(this.colliders[s.CharaceterCollider.BURST].node.active=!0),this.timerCombo.Update(t),this.timerCombo.JustFinished()&&(this.combo=-1),this.timerHit.Update(t),this.timerHit.IsDone()&&(this.colliders[s.CharaceterCollider.HIT].node.active=!1),this.timerBurst.Update(t),this.timerBurst.IsDone()&&(this.colliders[s.CharaceterCollider.BURST].node.active=!1,this.timerBurst.Reset())},e.prototype.SetState=function(t){switch(this.state=t,this.state){case a.INIT:this.combo=-1,this.healthBar.SetHealthMax(this.stats.hp),this.node.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.node.active=!0,this.SetState(a.IDLE);break;case a.IDLE:this.velocity=cc.v3(0,0,0),this.arrow.active=!1,this.SetAnim(r.IDLE,!0);break;case a.MOVE:this.arrow.active=!0,this.enemyAttack=null,this.IsAttackBurst()||this.SetAnim(r.WALK,!0);break;case a.CHASE:this.SetAnim(r.WALK,!0);break;case a.ATTACK:var e=[r.ATTACK_1,r.ATTACK_2,r.ATTACK_3];this.combo++,this.combo==e.length&&(this.combo=0),this.timerCombo.Reset(),this.SetAnim(e[this.combo],!1);break;case a.DEAD:s.SetTimeScale(.5),this.SetAnim(r.DEAD,!1)}},e.prototype.Init=function(){this.SetState(a.INIT)},e.prototype.Idle=function(){this.SetState(a.IDLE)},e.prototype.Move=function(){this.state==a.IDLE&&this.SetState(a.MOVE)},e.prototype.Chase=function(t){if(this.state==a.MOVE)this.IsAttackBurst()||this.SetState(a.IDLE);else if(this.state==a.IDLE){u.GetEnemy(t).IsDisappear()?this.Attack(null):(this.enemyTarget=t,this.SetState(a.CHASE))}},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(a.WAITING)},e.prototype.Attack=function(t){this.state==a.IDLE?(this.enemyAttack=t,this.FadeToEnemy(t),this.SetState(a.ATTACK)):this.state==a.MOVE&&(this.IsAttackBurst()||this.SetState(a.IDLE))},e.prototype.AttackBurst=function(){this.SetAnim(r.ATTACK_BURST,!0)},e.prototype.AttackCrossBow=function(){this.SetAnim(r.ATTACK_CROSSBOW,!0)},e.prototype.Hurt=function(t){this.IsAttackBurst()||this.IsDead()||(this.stats.hp-=t,this.stats.hp<=0?(this.stats.hp=0,this.SetState(a.DEAD)):this.SetAnim(r.HURT,!1,!0),this.healthBar.SetHealth(this.stats.hp),p.EventMgr.instance.emit(s.GameEvent.CHARACTER,{type:s.CharacterEvent.HURT,damage:t,position:cc.v3(this.node.position.x+s.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+s.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)}))},e.prototype.ContinueAttack=function(){var t=u.GetEnemy(this.enemyAttack);this.enemyAttack.active&&!t.IsDead()&&this.Attack(this.enemyAttack)},e.prototype.CanAttack=function(t){var e=cc.v3();return cc.Vec3.subtract(e,t.position,this.node.position),e.len()<=s.default.CHARACTER_ATTACK_DISTANCE+this.stats.speed&&Math.abs(e.y)<=10},e.prototype.IsAttacking=function(){return null!=this.enemyAttack},e.prototype.IsAttackBurst=function(){return this.spine.animation==r.ATTACK_BURST},e.prototype.IsDead=function(){return this.state==a.DEAD},e.prototype.GetAttackSpot=function(t){return this.node.position.x<t.position.x?cc.v3(t.position.x-s.default.CHARACTER_ATTACK_DISTANCE,t.position.y,0):cc.v3(t.position.x+s.default.CHARACTER_ATTACK_DISTANCE,t.position.y,0)},e.prototype.GetCenterPoint=function(){var t=cc.v3(this.node.position);return cc.v3(t.add(cc.v3(0,this.body.size.height/2,0)))},e.prototype.GetHitDamage=function(t){var e=t.getComponent(h.default);return s.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToEnemy=function(t){if(null!=t){var e=this.node.position.x<t.position.x?1:-1;this.SetDir(e)}},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY),this.colliders[s.CharaceterCollider.HIT].offset.x=t*Math.abs(this.colliders[s.CharaceterCollider.HIT].offset.x)},e.prototype.SetLimitZone=function(t){this.limitZone=t,this.limitZone.y=this.limitZone.y-t.height/2,this.limitZone.yMax=this.limitZone.y+this.limitZone.height,this.limitZone.x+=s.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.xMax-=2*s.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.yMax-=s.default.CHARACTER_ATTACK_DISTANCE},e.prototype.UpdateMove=function(t){var e=c.default.instance.delta,n=Math.atan2(e.y,e.x),o=Math.min(e.len(),200),i=cc.v3(Math.cos(n)*o,Math.sin(n)*o,0),a=e.x>0?1:-1;this.arrow.setPosition(i),this.arrow.angle=180*n/Math.PI,this.velocity=cc.v3(e.x,e.y,0).normalize(),this.SetDir(a);var r=cc.v3(this.node.position);r=r.add(cc.v3(this.velocity).multiplyScalar(s.default.GAME_SPEED_BASE*this.stats.speed*t));var l=cc.misc.clampf(r.x,this.limitZone.x,this.limitZone.xMax),p=cc.misc.clampf(r.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(l,p,0))},e.prototype.UpdateMoveToTarget=function(t){var e=cc.v3(),n=this.GetAttackSpot(this.enemyTarget);cc.Vec3.subtract(e,n,this.node.position),this.velocity=cc.v3(e.x,e.y,0).normalize();var o=cc.Vec3.distance(this.node.position,n),i=this.velocity.x>0?1:-1,r=s.default.GAME_SPEED_BASE*this.stats.speed*t;r=Math.min(o,r);var c=cc.v3(this.node.position);c=c.add(cc.v3(this.velocity).multiplyScalar(r));var l=cc.misc.clampf(c.x,this.limitZone.x,this.limitZone.xMax),p=cc.misc.clampf(c.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(l,p,0)),o!=r?this.SetDir(i):(i=this.node.position.x<this.enemyTarget.position.x?1:-1,this.SetDir(i),this.node.setPosition(n),this.SetState(a.IDLE))},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case r.ATTACK_1:case r.ATTACK_2:case r.ATTACK_3:this.Waiting(this.stats.attackDelay,a.IDLE);break;case r.HURT:this.Waiting(this.stats.hurtDelay,a.IDLE);break;case r.DEAD:s.SetTimeScale(1),p.EventMgr.instance.emit(s.GameEvent.UI,{action:s.UIEventAction.LOSE,params:{level:s.LevelName.FRONT_YARD}})}},e.prototype.OnAnimationEvent=function(t){t.animation.name!=r.ATTACK_1&&t.animation.name!=r.ATTACK_2&&t.animation.name!=r.ATTACK_3||(this.colliders[s.CharaceterCollider.HIT].node.active=!0,this.timerHit.Reset())},e.prototype.onCollisionEnter=function(t,e){switch(t.node.name){case"Hit":this.Hurt(this.GetHitDamage(t.node.parent.parent));break;case"LightBall":this.Hurt(10);break;case"SwitchZone":t.node.active=!1,p.EventMgr.instance.emit(s.GameEvent.MAP,{type:s.MapEvent.SWITCH_ZONE});break;case"ExpandZone":t.node.active=!1,p.EventMgr.instance.emit(s.GameEvent.MAP,{type:s.MapEvent.EXPAND_ZONE})}},e.prototype.AddHealth=function(t){this.healthBar.AddHealth(t)},i([m({type:sp.Skeleton})],e.prototype,"spine",void 0),i([m({type:[cc.BoxCollider]})],e.prototype,"colliders",void 0),i([m({type:cc.BoxCollider})],e.prototype,"body",void 0),i([m({type:h.default})],e.prototype,"stats",void 0),i([m({type:d.default})],e.prototype,"healthBar",void 0),i([m({type:cc.Node})],e.prototype,"arrow",void 0),e=i([y],e)}(cc.Component);n.default=g,cc._RF.pop()},{"./Defines":"Defines","./EnemyMgr":"EnemyMgr","./HealthBar":"HealthBar","./core/EventMgr":"EventMgr","./core/Input":"Input","./core/Timer":"Timer","./enemies/Stats":"Stats"}],CoffeeBeanItem:[function(t,e,n){"use strict";cc._RF.push(e,"79ea2GgDJFDMI67E1BSMZYz","CoffeeBeanItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CoffeeBeanItem=void 0;var a=t("./Item"),r=t("../Defines"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnCollectItem=function(){console.log("collect CoffeeBeanItem"),this.mCharacter.AddHealth(r.default.COFFEE_BEAN_ITEM_HEALTH_BONUS)},e=i([s],e)}(a.Item));n.CoffeeBeanItem=l,cc._RF.pop()},{"../Defines":"Defines","./Item":"Item"}],CrossItem:[function(t,e,n){"use strict";cc._RF.push(e,"9f7f1Q7q4NA5Y2CeJgHEd2B","CrossItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.CrossItem=void 0;var a=t("./Item"),r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnCollectItem=function(){console.log("collect CrossItem")},e=i([c],e)}(a.Item));n.CrossItem=s,cc._RF.pop()},{"./Item":"Item"}],Damage:[function(t,e,n){"use strict";cc._RF.push(e,"4716bZwFRNKh4tv3iO+GcXB","Damage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damage=null,e}return o(e,t),e.prototype.Spawn=function(t,e){var n=this;this.damage.string=""+t,this.node.active=!0,this.node.scale=1.5,this.node.setPosition(e),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).to(1,{position:cc.v3(this.node.position.x,this.node.position.y+200,0)}).call(function(){return n.node.active=!1}).start()},i([c(cc.Label)],e.prototype,"damage",void 0),e=i([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],Defines:[function(t,e,n){"use strict";cc._RF.push(e,"17fd1X2q2lIQansLTouiZ+J","Defines"),Object.defineProperty(n,"__esModule",{value:!0}),n.VLAD_ANIM=n.EnemyType=n.LightBallType=n.AttackSpot=n.EnemyCollider=n.CharaceterCollider=n.ItemEvent=n.CharacterEvent=n.EnemyEvent=n.MapEvent=n.GameEvent=n.UIEventAction=n.LevelName=n.MoveToTarget=n.SetTimeScale=n.StringPadding=n.RandomInt=n.RandomFloat=n.RandomSign=n.Clamp=void 0,n.default=new(function(){return function(){this.GAME_SPEED_BASE=60,this.CHARACTER_MOVE_SPEED=7,this.CHARACTER_ATTACK_OFFSET=20,this.CHARACTER_MOVE_DISTANCE=20,this.CHARACTER_ATTACK_DISTANCE=120,this.CHARACTER_CHASE_DISTANCE=350,this.CHARACTER_SCALE=.9,this.ENEMY_HP=100,this.ENEMY_MOVE_SPEED=4,this.ENEMY_MIN_DAMAGE=10,this.ENEMY_MAX_DAMAGE=25,this.ENEMY_ATTACK_DELAY=.5,this.ENEMY_PATROL_DELAY=1,this.ENEMY_HURT_DELAY=.5,this.ENEMY_ATTACK_DISTANCE=120,this.ENEMY_JUMP_DISTANCE=170,this.ENEMY_SAFE_DISTANCE=200,this.ENEMY_CHASE_DISTANCE=500,this.ENEMY_SCALE=.9,this.BOSS_VLAD_DANGEROUS_DISTANCE=300,this.BOSS_VLAD_ATTACK_COOLDOWN=3,this.REST_API_SERVER="https://oms.gameloft.com",this.GAME_NAME="WHAT_WE_DO_IN_THE_SHADOWS",this.PHASE="dev",this.PRIVACY_POLICY_URL="https://www.gameloft.com/en/privacy-notice",this.DISCLAIMER_URL="https://www.gameloft.com/en/conditions-of-use",this.LEADERBOARD_FIRST_DAY=new Date("2020/07/02"),this.LEADERBOARD_TOP_COUNT=50,this.LIGHT_BALL_SPEED=7,this.COFFEE_BEAN_ITEM_HEALTH_BONUS=50,this.CROSS_ITEM_SCORE_BONUS=10}}()),n.Clamp=function(t,e,n){return Math.min(Math.max(t,e),n)},n.RandomSign=function(){return Math.random()<.5?1:-1},n.RandomFloat=function(t,e){return t+(e-t)*Math.random()},n.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},n.StringPadding=function(t,e,n){void 0===n&&(n="0");for(var o=t+"";o.length<e;)o+=n;return o},n.SetTimeScale=function(t){cc.director.calculateDeltaTime=function(e){e||(e=performance.now()),this._deltaTime=(e-this._lastUpdate)/1e3,this._deltaTime*=t,this._lastUpdate=e}},n.MoveToTarget=function(t,e,n,o){return n=Math.abs(n),t<e?Math.min(t+n*o,e):t>e?Math.max(t-n*o,e):t},function(t){t.FRONT_YARD="FrontYard",t.MANSION="Mansion"}(n.LevelName||(n.LevelName={})),function(t){t.PROFILE_CHANGED="ProfileChanged",t.PLAY="Play",t.SCORE="Score",t.LOSE="Lose",t.RESTART="Restart",t.LOAD_COMPLETE="LoadComplete",t.DISCONNECT="Disconnect",t.INTRO_END="IntroEnd",t.RECONNECT="Reconnect"}(n.UIEventAction||(n.UIEventAction={})),function(t){t.MAP="map_event",t.ENEMY="enemy_event",t.CHARACTER="character_event",t.UI="ui_event",t.ITEM="item_event"}(n.GameEvent||(n.GameEvent={})),function(t){t.SWITCH_ZONE="switch_zone",t.EXPAND_ZONE="expand_zone"}(n.MapEvent||(n.MapEvent={})),function(t){t.DEAD="enemy_dead",t.HURT="enemy_hurt"}(n.EnemyEvent||(n.EnemyEvent={})),function(t){t.HURT="character_hurt"}(n.CharacterEvent||(n.CharacterEvent={})),function(t){t[t.MAKE_CROSS_ITEM=0]="MAKE_CROSS_ITEM",t[t.MAKE_COFFEE_BEAN_ITEM=1]="MAKE_COFFEE_BEAN_ITEM"}(n.ItemEvent||(n.ItemEvent={})),function(t){t[t.HIT=0]="HIT",t[t.BURST=1]="BURST"}(n.CharaceterCollider||(n.CharaceterCollider={})),function(t){t[t.HIT=0]="HIT"}(n.EnemyCollider||(n.EnemyCollider={})),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.PATROL=2]="PATROL"}(n.AttackSpot||(n.AttackSpot={})),function(t){t[t.STRAIGHT=0]="STRAIGHT",t[t.SIN=1]="SIN"}(n.LightBallType||(n.LightBallType={})),n.EnemyType=cc.Enum({VAMPIRE1:0,VAMPIRE2:1,WEREWOLF:2,VALD:3}),function(t){t.IDLE="idle",t.TELEPORT_APPEAR="teleport_appear",t.TELEPORT_DISAPPEAR="teleport_disappear",t.CHARGE="light_ball_idle_loop",t.ATTACK="light_ball_throw",t.HURT="get_hit",t.DEAD="die",t.TOMB="die_boss"}(n.VLAD_ANIM||(n.VLAD_ANIM={})),cc._RF.pop()},{}],DialogDebug:[function(t,e,n){"use strict";cc._RF.push(e,"cb012HApYdCXIrURm56YsYe","DialogDebug");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e){this.playerProfile=t,this.leaderboard=e,this.lblId.string="Unique ID:\n"+this.playerProfile.uniqueId},e.prototype.update=function(t){},e.prototype.toggle=function(t){this.node.active=t},e.prototype.closeDialog=function(){this.toggle(!1)},e.prototype.clearProfile=function(){this.playerProfile.clear()},e.prototype.deleteBoardEntry=function(){this.leaderboard.deleteMyEntry()},i([c({displayName:"Label Id",type:cc.Label})],e.prototype,"lblId",void 0),e=i([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],DialogDisconnect:[function(t,e,n){"use strict";cc._RF.push(e,"7ed5bghhsROiaalqv3a6GbG","DialogDisconnect");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=t("../lib/Utils"),c=t("../core/EventMgr"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.callbackState=0,e.callbackData=null,e.callbackFunc=null,e.timeNextCheck=3,e}return o(e,t),e.prototype.isActive=function(){return this.node.active},e.prototype.open=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.callbackState=t,this.callbackFunc=e,this.callbackData=n,this.toggle(!0)},e.prototype.toggle=function(t){this.node.active=t,t&&(this.timeNextCheck=3)},e.prototype.update=function(t){this.timeNextCheck-=t,this.timeNextCheck<=0&&(this.timeNextCheck=3,this.internetCheck())},e.prototype.continueFlow=function(){this.callbackFunc&&"function"==typeof this.callbackFunc&&this.callbackFunc(this.callbackData),c.EventMgr.instance.emit(a.GameEvent.UI,{action:a.UIEventAction.RECONNECT,params:{state:this.callbackState}})},e.prototype.retryClick=function(){this.timeNextCheck>=2.85||(this.timeNextCheck=3,this.internetCheck())},e.prototype.internetCheck=function(){var t=this;r.default.ping(2e3).then(function(){t.continueFlow()}).catch(function(){})},e=i([l],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../Defines":"Defines","../core/EventMgr":"EventMgr","../lib/Utils":"Utils"}],DialogGift:[function(t,e,n){"use strict";cc._RF.push(e,"f4b75ophTJNrZ3LlHxLr5UL","DialogGift");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.update=function(t){},e.prototype.toggle=function(t){this.node.active=t},e=i([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],DialogLeaderboard:[function(t,e,n){"use strict";cc._RF.push(e,"bedefqQ4s5LL7py0uCFrTDT","DialogLeaderboard");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=t("./LeaderboardItem"),c=t("./DialogGift"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabItems=[],e.isOnLeaderboard=!1,e.currentSelf=null,e.dayCount=1,e.hasNotified=!1,e}return o(e,t),e.prototype.isActive=function(){return this.node.active},e.prototype.init=function(){this.selfItem.getComponent(r.default).init(),this.loadingIcon=this.loadingPane.getChildByName("LoadingIcon"),this.displayBoardDayLabel()},e.prototype.reload=function(){var t=this;return this.currentSelf=null,this.itemContainer.removeAllChildren(),this.loadingPane.active=!0,new Promise(function(e,n){t.leaderboard.myEntry().then(function(){t.isOnLeaderboard=t.leaderboard.userEntry.rank>0,t.leaderboard.get(0,a.default.LEADERBOARD_TOP_COUNT).then(function(n){for(var o,i=0;i<n.length;i++)n[i].userid!=t.leaderboard.userId&&((o=cc.instantiate(t.prefabItems[i<3?i:3])).parent=t.itemContainer,o.getComponent(r.default).init().setInfo(n[i].rank,n[i].display_name,n[i].score));t.leaderboard.userEntry.rank>0?(t.selfItem.active=!0,t.selfItem.getComponent(r.default).setInfo(t.leaderboard.userEntry.rank,t.leaderboard.userEntry.display_name,t.leaderboard.userEntry.score),t.decorBtm.active=!1):(t.selfItem.active=!1,t.decorBtm.active=!0),t.loadingPane.active=!1,t.notifyGift(),e()}).catch(function(t){n(t)})}).catch(function(t){n(t)})})},e.prototype.toggle=function(t){this.node.active=t,t&&this.boardScrollView.scrollToTop(),this.notifyGift()},e.prototype.scrollHandler=function(){},e.prototype.notifyGift=function(){this.leaderboard.userEntry.rank>0&&!this.loadingPane.active&&this.node.active&&!this.hasNotified&&(this.hasNotified=!0,this.dlgGift.toggle(!0))},e.prototype.update=function(t){this.loadingIcon.angle-=180*t},e.prototype.acceptGift=function(){this.dlgGift.toggle(!1)},e.prototype.displayBoardDayLabel=function(){this.labelDay.string=this.leaderboard.getDayLabel(),this.btnPrev.active=this.dayCount>1,this.btnNext.active=this.dayCount<30},e.prototype.prevDay=function(){var t=this;1!=this.dayCount&&(this.dayCount--,this.leaderboard.setDayCount(this.dayCount),this.displayBoardDayLabel(),this.loadingPane.active=!0,setTimeout(function(){t.loadingPane.active=!1},300))},e.prototype.nextDay=function(){var t=this;30!=this.dayCount&&(this.dayCount++,this.leaderboard.setDayCount(this.dayCount),this.displayBoardDayLabel(),this.loadingPane.active=!0,setTimeout(function(){t.loadingPane.active=!1},300))},e.prototype.closeDialog=function(){this.toggle(!1)},i([p({displayName:"Dialog Gift",type:c.default})],e.prototype,"dlgGift",void 0),i([p({displayName:"Leaderboard Items",type:[cc.Prefab]})],e.prototype,"prefabItems",void 0),i([p({displayName:"Scroll View",type:cc.ScrollView})],e.prototype,"boardScrollView",void 0),i([p({displayName:"Items Container",type:cc.Node})],e.prototype,"itemContainer",void 0),i([p({displayName:"User Item",type:cc.Node})],e.prototype,"selfItem",void 0),i([p({displayName:"Bottom Decoration",type:cc.Node})],e.prototype,"decorBtm",void 0),i([p({displayName:"Label Day",type:cc.Label})],e.prototype,"labelDay",void 0),i([p({displayName:"Button Prev Day",type:cc.Node})],e.prototype,"btnPrev",void 0),i([p({displayName:"Button Next Day",type:cc.Node})],e.prototype,"btnNext",void 0),i([p({displayName:"Loading Overlay",type:cc.Node})],e.prototype,"loadingPane",void 0),e=i([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Defines":"Defines","./DialogGift":"DialogGift","./LeaderboardItem":"LeaderboardItem"}],DialogLevelSelection:[function(t,e,n){"use strict";cc._RF.push(e,"69b50MMfGVD3L5JGaJPW0ic","DialogLevelSelection");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=t("../core/EventMgr"),c=cc._decorator,s=c.ccclass,l=c.property,p=cc.Color.WHITE,u=new cc.Color(100,100,100),h=function(){function t(){this.normalSprites=[]}return t.prototype.init=function(t,e){this.node=t.node,this.button=t,this.lockSprites=e,this.previewer=this.node.getChildByName("LevelPreview"),this.background=this.node.getChildByName("Background").getComponent(cc.Sprite),this.iconPlay=cc.find("Background/PlayIcon",this.node).getComponent(cc.Sprite),this.iconLock=this.node.getChildByName("LockIcon"),this.normalSprites.push(this.background.spriteFrame),this.normalSprites.push(this.iconPlay.spriteFrame)},t.prototype.toggleEnable=function(t){this.button.interactable=t,this.background.spriteFrame=t?this.normalSprites[0]:this.lockSprites[0],this.iconPlay.spriteFrame=t?this.normalSprites[1]:this.lockSprites[1],this.iconLock.active=!t,this.previewer.color=t?p:u,this.background.node.color=t?p:u},t}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockSprites=[],e.btnSelectMansion=new h,e}return o(e,t),e.prototype.init=function(){this.btnSelectMansion.init(this.selectMansion,this.lockSprites),r.EventMgr.instance.on(a.GameEvent.UI,this.profileChangeHandler,this)},e.prototype.toggle=function(t){this.node.active=t,this.btnPlay.active=!t},e.prototype.closeDialog=function(){this.toggle(!1)},e.prototype.profileChangeHandler=function(t){t.action==a.UIEventAction.PROFILE_CHANGED&&this.btnSelectMansion.toggleEnable(t.params.profile.clearedLevel1)},i([l({displayName:"Button Play",type:cc.Node})],e.prototype,"btnPlay",void 0),i([l({displayName:"Select Mansion",type:cc.Button})],e.prototype,"selectMansion",void 0),i([l({displayName:"Locked Sprites",type:[cc.SpriteFrame]})],e.prototype,"lockSprites",void 0),e=i([s],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Defines":"Defines","../core/EventMgr":"EventMgr"}],DialogLose:[function(t,e,n){"use strict";cc._RF.push(e,"d0f19vS2MJP+7vHfw9sdT1D","DialogLose");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.quotes=[],e.quoteIndices=[],e}return o(e,t),e.prototype.init=function(){for(var t=0;t<this.quotes.length;t++)this.quoteIndices.push(t)},e.prototype.open=function(){var t=a.RandomInt(0,this.quoteIndices.length-1),e=this.quoteIndices[t];if(this.lblQuote.string=this.quotes[e].replace("%n","\n"),this.quoteIndices.splice(t,1),0==this.quoteIndices.length)for(var n=0;n<this.quotes.length;n++)n!=e&&this.quoteIndices.push(n);this.toggle(!0)},e.prototype.update=function(t){},e.prototype.toggle=function(t){this.node.active=t},i([s({type:[cc.String]})],e.prototype,"quotes",void 0),i([s({displayName:"Label Quote",type:cc.Label})],e.prototype,"lblQuote",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],DialogRegister:[function(t,e,n){"use strict";cc._RF.push(e,"8350c8mNm9FaLddSYmAcYv7","DialogRegister");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtNameChks=[],e.txtEmailChks=[],e}return o(e,t),e.prototype.init=function(){this.sprRegister=this.btnRegister.node.getChildByName("Background").getComponent(cc.Sprite),this.spriteNormal=this.sprRegister.spriteFrame,this.txtNameChks.push(this.txtName.node.getChildByName("CheckYes")),this.txtNameChks.push(this.txtName.node.getChildByName("CheckNo")),this.txtEmailChks.push(this.txtEmail.node.getChildByName("CheckYes")),this.txtEmailChks.push(this.txtEmail.node.getChildByName("CheckNo"))},e.prototype.start=function(){this.checkValid()},e.prototype.getData=function(){return{fullName:this.txtName.string.trim(),email:this.txtEmail.string.trim()}},e.prototype.toggle=function(t){this.node.active=t},e.prototype.nameChanged=function(){this.txtNameChks[0].active=this.txtName.string.length>0,this.txtNameChks[1].active=0==this.txtName.string.length,this.checkValid()},e.prototype.emailChanged=function(){this.txtEmailChks[0].active=this.txtName.string.length>0,this.txtEmailChks[1].active=0==this.txtEmail.string.length,this.checkValid()},e.prototype.checkValid=function(){var t=!0;0==this.txtName.string.length&&(t=!1),0==this.txtEmail.string.length&&(t=!1),this.chkTerm.isChecked||(t=!1),this.chkAge.isChecked||(t=!1),this.btnRegister.interactable=t,this.sprRegister.spriteFrame=t?this.spriteNormal:this.spriteDisable},i([c({displayName:"Name Input",type:cc.EditBox})],e.prototype,"txtName",void 0),i([c({displayName:"Email Input",type:cc.EditBox})],e.prototype,"txtEmail",void 0),i([c({displayName:"Check Terms",type:cc.Toggle})],e.prototype,"chkTerm",void 0),i([c({displayName:"Check Age",type:cc.Toggle})],e.prototype,"chkAge",void 0),i([c({displayName:"Button Register",type:cc.Button})],e.prototype,"btnRegister",void 0),i([c({displayName:"Disabled Sprite",type:cc.SpriteFrame})],e.prototype,"spriteDisable",void 0),e=i([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],DialogScore:[function(t,e,n){"use strict";cc._RF.push(e,"6a9c0hwvCRI5K7ARU/yIf+F","DialogScore");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelScores=[],e.scores=[0,0,0,0],e.currentScores=[0,0,0,0],e.scoreSpeed=[0,0,0,0],e}return o(e,t),e.prototype.open=function(t,e,n,o){this.btnNext.active=t!=a.LevelName.MANSION;var i=Math.floor(n/60);this.labelScores[4].string="Time Left ["+a.StringPadding(i,2)+":"+a.StringPadding(n-60*i,2)+"]",this.labelScores[5].string="HP Left ["+o+"]",this.setScore(e,n,o),this.toggle(!0)},e.prototype.setScore=function(t,e,n){this.scores[0]=t,this.scores[1]=e,this.scores[2]=n,this.scores[3]=t+e+n;for(var o=0;o<this.scoreSpeed.length;o++)this.scoreSpeed[o]=this.scores[o]/2,this.labelScores[o].string="0",this.currentScores[o]=0},e.prototype.update=function(t){if(this.scoreSpeed[0]>0){for(var e=0;e<this.scoreSpeed.length;e++)this.currentScores[e]=Math.min(this.currentScores[e]+this.scoreSpeed[e]*t,this.scores[e]),this.labelScores[e].string=Math.floor(this.currentScores[e])+"";this.currentScores[3]==this.scores[3]&&(this.scoreSpeed[0]=0)}},e.prototype.toggle=function(t){this.node.active=t},e.prototype.closeDialog=function(){this.toggle(!1)},i([s({displayName:"Label Scores",type:[cc.Label]})],e.prototype,"labelScores",void 0),i([s({displayName:"Button Next",type:cc.Node})],e.prototype,"btnNext",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],DialogTerm:[function(t,e,n){"use strict";cc._RF.push(e,"e43d3zFB/dAib8yDdr3EIqy","DialogTerm");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.update=function(t){},e.prototype.toggle=function(t){this.node.active=t},e.prototype.openPrivacyPolicy=function(){var t=this;cc.sys.openURL(a.default.PRIVACY_POLICY_URL),this.buttonPrivacy.interactable=!1,setTimeout(function(){t.buttonPrivacy.interactable=!0}.bind(this),250)},e.prototype.openDisclaimer=function(){var t=this;cc.sys.openURL(a.default.DISCLAIMER_URL),this.buttonDisclaimer.interactable=!1,setTimeout(function(){t.buttonDisclaimer.interactable=!0}.bind(this),250)},e.prototype.acceptTerm=function(){var t=this;this.buttonAccept.interactable=!1,setTimeout(function(){t.buttonAccept.interactable=!0}.bind(this),250)},i([s({type:cc.Button})],e.prototype,"buttonPrivacy",void 0),i([s({type:cc.Button})],e.prototype,"buttonDisclaimer",void 0),i([s({type:cc.Button})],e.prototype,"buttonAccept",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],DialogTutorial:[function(t,e,n){"use strict";cc._RF.push(e,"de035ajwflHr6Zqa7KiVOOF","DialogTutorial");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tutorialTitle=[],e.tutorialContent=[],e.tutorialAnims=[],e.index=0,e}return o(e,t),e.prototype.start=function(){this.displayTutorial()},e.prototype.displayTutorial=function(){this.tutorialMC.setAnimation(0,this.tutorialAnims[this.index],!0),this.labelTitle.string=this.tutorialTitle[this.index],this.labelContent.string=this.tutorialContent[this.index],this.btnPrev.active=this.index>0,this.btnNext.active=this.index<2},e.prototype.toggle=function(t){this.node.active=t},e.prototype.closeDialog=function(){this.toggle(!1)},e.prototype.previousContent=function(){this.index--,this.index<0&&(this.index=2),this.displayTutorial()},e.prototype.nextContent=function(){this.index++,this.index>2&&(this.index=0),this.displayTutorial()},i([c({displayName:"Tutorial Titles",type:[cc.String]})],e.prototype,"tutorialTitle",void 0),i([c({displayName:"Tutorial Titles",type:[cc.String]})],e.prototype,"tutorialContent",void 0),i([c({displayName:"Tutorial Character",type:sp.Skeleton})],e.prototype,"tutorialMC",void 0),i([c({displayName:"Tutorial Animations",type:[cc.String]})],e.prototype,"tutorialAnims",void 0),i([c({displayName:"Box Title",type:cc.Label})],e.prototype,"labelTitle",void 0),i([c({displayName:"Box Text",type:cc.Label})],e.prototype,"labelContent",void 0),i([c({displayName:"Button Previous",type:cc.Node})],e.prototype,"btnPrev",void 0),i([c({displayName:"Button Next",type:cc.Node})],e.prototype,"btnNext",void 0),e=i([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],EnemyMgr:[function(t,e,n){"use strict";cc._RF.push(e,"df53fpoMhZFq4fLKZOH+0gT","EnemyMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GetEnemy=void 0;var a=t("./Defines"),r=t("./enemies/Enemy"),c=t("./enemies/Vald"),s=cc._decorator,l=s.ccclass,p=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemies=[],e.attacker=[null,null],e.character=null,e.boss=null,e}return o(e,t),e.prototype.SetTarget=function(t){this.character=t},e.prototype.SetEnemies=function(t){var e=this;this.attacker=[null,null],this.enemies=t,this.enemies.forEach(function(t){var n=u(t);n.IsBoss()&&(n.target=e.character),n.limitZone=e.character.limitZone,n.Init()})},e.prototype.SetLimitZone=function(t){var e=this;this.limitZone=t,this.enemies.forEach(function(t){u(t).limitZone=e.limitZone})},e.prototype.UpdateChase=function(){var t=this;this.attacker=this.attacker.map(function(t){if(null!=t){var e=u(t);return e.IsDead()||e.IsIdle()?null:t}return null});var e=this.GetEnemiesActive(),n=this.GetEnemiesInRange(this.character.node.position,a.default.ENEMY_CHASE_DISTANCE,this.enemies.concat(e)),o=e.concat(n);(o=o.filter(function(t,e){return o.indexOf(t)==e}).filter(function(t){var e=u(t);return e.IsIdle()&&e.IsInLimitZone()})).forEach(function(e){var n=u(e),o=cc.Vec3.distance(e.position,t.character.node.position);if(o>a.default.ENEMY_SAFE_DISTANCE)n.Patrol(t.character,a.AttackSpot.PATROL,!1);else if(o>a.default.ENEMY_JUMP_DISTANCE)n.IsRanger()?n.Jump(t.character,a.AttackSpot.PATROL):n.Patrol(t.character,a.AttackSpot.PATROL,!1);else if(t.IsAttackSpotAvailable()){var i=t.GetNearestAttackSpot(e);t.attacker[i]=e,n.Chase(t.character,i)}else n.Patrol(t.character,a.AttackSpot.PATROL,!0)})},e.prototype.UpdateAttack=function(){var t=this;this.enemies.filter(function(t){return u(t).IsReadyForAttack()}).forEach(function(e){var n=u(e);t.IsEnemyCanAttack(e)?n.Attack():n.Idle()})},e.prototype.GetEnemiesInRange=function(t,e,n){return void 0===n&&(n=null),null==n&&(n=this.enemies),n.filter(function(t){return!u(t).IsDead()}).map(function(e){return{enemyNode:e,distance:cc.Vec3.distance(e.position,t)}}).filter(function(t){return t.distance<=e}).sort(function(t,e){return t.distance-e.distance}).map(function(t){return t.enemyNode})},e.prototype.GetEnemiesActive=function(){return this.enemies.filter(function(t){var e=u(t);return!e.IsDead()&&e.HasTarget()})},e.prototype.GetNearestAttackSpot=function(t){if(t.position.x<this.character.node.position.x){if(null==this.attacker[a.AttackSpot.LEFT])return a.AttackSpot.LEFT;if(null==this.attacker[a.AttackSpot.RIGHT])return a.AttackSpot.RIGHT}else{if(null==this.attacker[a.AttackSpot.RIGHT])return a.AttackSpot.RIGHT;if(null==this.attacker[a.AttackSpot.LEFT])return a.AttackSpot.LEFT}return a.AttackSpot.PATROL},e.prototype.IsAttackSpotAvailable=function(){return this.attacker.some(function(t){return null==t})},e.prototype.IsEnemyCanAttack=function(t){var e=cc.v3();return cc.Vec3.subtract(e,t.position,this.character.node.position),e.len()<=a.default.ENEMY_ATTACK_DISTANCE+a.default.ENEMY_MOVE_SPEED&&Math.abs(e.y)<=10},e.prototype.IsClear=function(){var t=this;return!this.enemies.some(function(e){return!u(e).IsDead()&&t.limitZone.contains(cc.v2(e.position.x,e.position.y))})},e=i([l],e)}(cc.Component));function u(t){return null!=t.getComponent(r.default)?t.getComponent(r.default):t.getComponent(c.default)?t.getComponent(c.default):null}n.default=p,n.GetEnemy=u,cc._RF.pop()},{"./Defines":"Defines","./enemies/Enemy":"Enemy","./enemies/Vald":"Vald"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"49afc9opr9DeJw/EBnD2l3f","Enemy");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r,c=t("../Defines"),s=t("../core/Timer"),l=t("../core/EventMgr"),p=t("../HealthBar"),u=t("./Stats"),h=cc._decorator,d=h.ccclass,f=h.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.CHASE=2]="CHASE",t[t.PATROL=3]="PATROL",t[t.JUMP=4]="JUMP",t[t.WAITING=5]="WAITING",t[t.ATTACK=6]="ATTACK",t[t.ATTACKING=7]="ATTACKING",t[t.DEAD=8]="DEAD"})(a||(a={})),function(t){t.IDLE="idle",t.WALK="movement",t.JUMP_START="jump1",t.JUMP_LOOP="jump2",t.JUMP_ATTACK="jump3",t.ATTACK_BITE="attack_bite",t.ATTACK_CLAW="attack_claw",t.HURT="get_hit",t.DEAD="fall_off_ground_dead",t.TOMB="die_enemy"}(r||(r={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=c.EnemyType.VAMPIRE1,e.spine=null,e.tomb=null,e.colliders=[],e.body=null,e.stats=null,e.healthBar=null,e.timerWaiting=new s.default,e.timerHit=new s.default,e.target=null,e}return o(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.tomb.setCompleteListener(this.OnAnimationComplete.bind(this)),this.timerHit.SetDuration(.05),this.node.setScale(c.default.ENEMY_SCALE)},e.prototype.update=function(t){switch(this.state){case a.INIT:case a.IDLE:break;case a.CHASE:case a.PATROL:case a.JUMP:this.UpdateMoveToTarget(t);break;case a.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(this.nextState);break;case a.ATTACK:case a.ATTACKING:}this.timerHit.Update(t),this.timerHit.IsDone()&&(this.colliders[c.EnemyCollider.HIT].node.active=!1)},e.prototype.SetState=function(t){switch(this.state=t,this.state){case a.INIT:this.spine.node.active=!0,this.tomb.node.active=!1,this.healthBar.SetHealthMax(this.stats.hp),this.SetState(a.IDLE);break;case a.IDLE:this.velocity=cc.v3(0,0,0),this.SetAnim(r.IDLE,!0);break;case a.CHASE:this.SetAnim(r.WALK,!0);break;case a.PATROL:this.targetSpot=this.GetPatrolSpot(),this.SetAnim(r.WALK,!0);break;case a.JUMP:this.SetAnim(r.JUMP_ATTACK,!1);break;case a.WAITING:this.spine.animation==r.WALK&&this.SetAnim(r.IDLE,!0);break;case a.ATTACK:var e=[r.ATTACK_BITE,r.ATTACK_CLAW];this.SetAnim(e[c.RandomInt(0,e.length-1)],!1,!0),this.SetState(a.ATTACKING);break;case a.ATTACKING:break;case a.DEAD:this.SetAnim(r.DEAD,!1),this.DropItem()}},e.prototype.Init=function(){this.SetState(a.INIT)},e.prototype.Idle=function(){this.SetState(a.IDLE)},e.prototype.Chase=function(t,e){this.target=t,this.attackSpot=e,this.SetState(a.CHASE)},e.prototype.Patrol=function(t,e,n){this.target=t,this.attackSpot=e,this.isRandomPatrol=n,this.SetState(a.PATROL)},e.prototype.Jump=function(t,e){this.target=t,this.attackSpot=e,this.targetSpot=cc.v3(t.node.position),this.spine.animation!=r.JUMP_LOOP&&this.SetAnim(r.JUMP_START,!1);var n=this.node.position.x>this.target.node.position.x?1:-1;this.SetDir(n)},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(a.WAITING)},e.prototype.Attack=function(){var t=this.node.position.x>this.target.node.position.x?1:-1;this.SetDir(t),this.Waiting(this.stats.attackDelay,a.ATTACK)},e.prototype.Hurt=function(t){this.stats.hp-=t,this.stats.hp<=0?(this.stats.hp=0,this.SetState(a.DEAD)):this.SetAnim(r.HURT,!1,!0),this.healthBar.SetHealth(this.stats.hp),l.EventMgr.instance.emit(c.GameEvent.ENEMY,{type:c.EnemyEvent.HURT,damage:t,position:cc.v3(this.node.position.x+c.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+c.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)})},e.prototype.GetAttackSpot=function(t){if(t==c.AttackSpot.LEFT){var e=c.Clamp(this.target.node.position.x-c.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.x,this.limitZone.x+this.limitZone.width);return this.node.position.x>this.target.node.position.x?Math.abs(this.node.position.y-this.target.node.position.y)<c.default.ENEMY_SAFE_DISTANCE?this.target.node.position.y<cc.winSize.height/2?cc.v3(this.node.position.x,this.target.node.position.y+c.default.ENEMY_SAFE_DISTANCE,0):cc.v3(this.node.position.x,this.target.node.position.y-c.default.ENEMY_SAFE_DISTANCE,0):cc.v3(e,this.node.position.y,0):this.node.position.x>e?cc.v3(e,this.node.position.y,0):cc.v3(e,this.target.node.position.y,0)}e=c.Clamp(this.target.node.position.x+c.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.x,this.limitZone.x+this.limitZone.width);return this.node.position.x<this.target.node.position.x?Math.abs(this.node.position.y-this.target.node.position.y)<c.default.ENEMY_SAFE_DISTANCE?this.target.node.position.y<cc.winSize.height/2?cc.v3(this.node.position.x,this.target.node.position.y+c.default.ENEMY_SAFE_DISTANCE,0):cc.v3(this.node.position.x,this.target.node.position.y-c.default.ENEMY_SAFE_DISTANCE,0):cc.v3(e,this.node.position.y,0):this.node.position.x<e?cc.v3(e,this.node.position.y,0):cc.v3(e,this.target.node.position.y,0)},e.prototype.GetPatrolSpot=function(){var t=this.isRandomPatrol?c.RandomInt(0,360):this.GetPatrolAngle(),e=this.target.node.position.x+Math.cos(t*Math.PI/180)*(c.default.ENEMY_SAFE_DISTANCE-10),n=this.target.node.position.y+Math.sin(t*Math.PI/180)*(c.default.ENEMY_SAFE_DISTANCE-10);return cc.v3(e,n,0)},e.prototype.GetPatrolAngle=function(){var t=this.target.node.position,e=this.node.position;return e.x>t.x?e.y>t.y?c.RandomInt(0,15):c.RandomInt(345,360):e.y>t.y?c.RandomInt(165,180):c.RandomInt(180,195)},e.prototype.GetHitDamage=function(t){var e=t.getComponent(u.default);return c.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToCharacter=function(t){var e=this.node.position.x<t.node.position.x?1:-1;this.SetDir(e)},e.prototype.HasTarget=function(){return null!=this.target},e.prototype.IsIdle=function(){return this.state==a.IDLE},e.prototype.IsChasing=function(){return this.state==a.CHASE},e.prototype.IsReadyForAttack=function(){return this.state==a.ATTACK},e.prototype.IsDead=function(){return this.state==a.DEAD},e.prototype.IsInLimitZone=function(){return this.limitZone.contains(cc.v2(this.node.position.x,this.node.position.y))},e.prototype.IsBoss=function(){return this.type==c.EnemyType.VALD},e.prototype.IsRanger=function(){return this.type==c.EnemyType.WEREWOLF},e.prototype.CanAttack=function(){var t=cc.v3();return cc.Vec3.subtract(t,this.target.node.position,this.node.position),t.len()<=c.default.ENEMY_ATTACK_DISTANCE+this.stats.speed&&Math.abs(t.y)<=10},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY),this.tomb.node.setPosition(t*Math.abs(this.tomb.node.position.x),this.tomb.node.position.y),this.colliders[c.EnemyCollider.HIT].offset.x=-t*Math.abs(this.colliders[c.EnemyCollider.HIT].offset.x)},e.prototype.SetLimitZone=function(t){this.limitZone=t},e.prototype.UpdateMoveToTarget=function(t){this.attackSpot!=c.AttackSpot.PATROL&&(this.targetSpot=this.GetAttackSpot(this.attackSpot));var e=new cc.Vec3;cc.Vec3.subtract(e,this.targetSpot,this.node.position),this.velocity=cc.v3(e.x,e.y,0).normalize();var n=this.velocity.x>0?-1:1;this.SetDir(n);var o=cc.Vec3.distance(this.node.position,this.targetSpot),i=c.default.GAME_SPEED_BASE*this.stats.speed*t;i=Math.min(o,i);var r=cc.v3(this.node.position);r=r.add(cc.v3(this.velocity).multiplyScalar(i));var s=cc.misc.clampf(r.x,this.limitZone.x,this.limitZone.xMax),l=cc.misc.clampf(r.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(s,l,0)),(s!=r.x||l!=r.y||o==i||this.CanAttack())&&(this.state==a.CHASE?this.CanAttack()?this.Attack():this.Waiting(this.stats.patrolDelay,a.CHASE):this.Waiting(this.stats.patrolDelay,a.IDLE))},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case r.JUMP_START:this.SetAnim(r.JUMP_LOOP,!0),this.Waiting(this.stats.attackDelay,a.JUMP);break;case r.JUMP_ATTACK:this.SetAnim(r.IDLE,!0);break;case r.ATTACK_CLAW:case r.ATTACK_BITE:this.Waiting(this.stats.attackDelay,a.IDLE);break;case r.HURT:this.Waiting(this.stats.hurtDelay,a.IDLE);break;case r.DEAD:this.spine.node.active=!1,this.tomb.node.active=!0,this.tomb.setAnimation(0,r.TOMB,!1);break;case r.TOMB:this.node.active=!1,l.EventMgr.instance.emit(c.GameEvent.ENEMY,{type:c.EnemyEvent.DEAD})}},e.prototype.OnAnimationEvent=function(t){switch(t.animation.name){case r.ATTACK_CLAW:case r.ATTACK_BITE:case r.JUMP_ATTACK:this.colliders[c.EnemyCollider.HIT].node.active=!0,this.timerHit.Reset()}},e.prototype.onCollisionEnter=function(t,e){switch(t.node.name){case"Hit":this.IsDead()||(t.node.active=!1,this.Hurt(this.GetHitDamage(t.node.parent.parent)));break;case"Burst":this.IsDead()||this.Hurt(this.GetHitDamage(t.node.parent.parent))}},e.prototype.DropItem=function(){for(var t=0;t<this.stats.arrDropItemInfo.length;t++){var e=this.stats.arrDropItemInfo[t];if(Math.random()<e.dropPercent)for(var n=c.RandomInt(e.numberMin,e.numberMax),o=0;o<n;o++)l.EventMgr.instance.emit(c.GameEvent.ITEM,{action:e.event,position:this.node.position})}},e.prototype.IsDisappear=function(){return!1},i([f({type:c.EnemyType})],e.prototype,"type",void 0),i([f({type:sp.Skeleton})],e.prototype,"spine",void 0),i([f({type:sp.Skeleton})],e.prototype,"tomb",void 0),i([f({type:[cc.CircleCollider]})],e.prototype,"colliders",void 0),i([f({type:cc.BoxCollider})],e.prototype,"body",void 0),i([f({type:u.default})],e.prototype,"stats",void 0),i([f({type:p.default})],e.prototype,"healthBar",void 0),e=i([d],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../Defines":"Defines","../HealthBar":"HealthBar","../core/EventMgr":"EventMgr","../core/Timer":"Timer","./Stats":"Stats"}],EventMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.EventMgr=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.instance=null,e}(cc.EventTarget);n.EventMgr=i,i.instance=new i,cc._RF.pop()},{}],GameMgr:[function(t,e,n){"use strict";cc._RF.push(e,"55f20KZDVdKfpOh/lU8Pv6Y","GameMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("./Defines"),c=t("./MapMgr"),s=t("./Character"),l=t("./EnemyMgr"),p=t("./core/EventMgr"),u=t("./core/Input"),h=t("./Damage"),d=t("./ItemMgr"),f=cc._decorator,y=f.ccclass,m=f.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME"})(a||(a={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cameraContainer=null,e.character=null,e.mapContainer=null,e.enemyMgr=null,e.itemMgr=null,e.damagePrefab=null,e.fadeEffect=null,e.damages=[],e.shakeOffset=cc.v2(),e.zoneIndex=0,e}return o(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){p.EventMgr.instance.on(u.default.TOUCH,this.TouchHandler,this),p.EventMgr.instance.on(r.GameEvent.MAP,this.MapEventHandler,this),p.EventMgr.instance.on(r.GameEvent.ENEMY,this.EnemyEventHandler,this),p.EventMgr.instance.on(r.GameEvent.CHARACTER,this.CharacterEventHandler,this),p.EventMgr.instance.on(r.GameEvent.UI,this.UIEventHandler,this),p.EventMgr.instance.on(r.GameEvent.ITEM,this.ItemEventHandler,this),cc.game.on(cc.game.EVENT_SHOW,this.GameResume,this),cc.game.on(cc.game.EVENT_HIDE,this.GamePause,this),this.character.node.active=!1,this.SetState(a.INIT)},e.prototype.update=function(t){switch(this.state){case a.INIT:break;case a.PLAYING:this.UpdateCamera(),this.enemyMgr.UpdateChase(),this.enemyMgr.UpdateAttack()}},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case a.INIT:r.SetTimeScale(1),cc.resources.load("maps/Map_01_01",function(t,n){e.zoneIndex=0,e.mapContainer.childrenCount>0&&e.mapContainer.removeAllChildren();var o=cc.instantiate(n);e.mapMgr=o.getComponent(c.default),e.mapContainer.addChild(o);var i=e.mapMgr.GetLimitZone(e.zoneIndex);e.mapMgr.DisableTrigger(),e.mapMgr.AddObjectIntoMap(e.character.node),e.character.SetLimitZone(i),e.enemyMgr.SetTarget(e.character),e.enemyMgr.SetLimitZone(i),e.enemyMgr.SetEnemies(e.mapMgr.GetEnemies()),e.itemMgr.SetMapMgr(e.mapMgr),e.itemMgr.SetCharacter(e.character),e.itemMgr.Init(),e.character.Init(),e.SetState(a.PLAYING)});break;case a.PLAYING:p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.LOAD_COMPLETE})}},e.prototype.UpdateCamera=function(){var t=cc.Camera.main.node,e=t.position.lerp(this.character.node.position,.05),n=this.mapMgr.GetLimitZone(this.zoneIndex),o=cc.misc.clampf(e.x,n.x+cc.winSize.width/2,n.x+n.width-cc.winSize.width/2);t.setPosition(cc.v3(o,cc.winSize.height/2,0))},e.prototype.NextZone=function(t){this.zoneIndex++,this.zoneIndex==this.mapMgr.GetMaxZone()&&(this.zoneIndex=0);var e=this.mapMgr.GetLimitZone(this.zoneIndex);this.character.SetLimitZone(e),this.character.Idle(),t&&this.character.node.setPosition(e.x+r.default.CHARACTER_ATTACK_DISTANCE/2,cc.winSize.height/2),this.enemyMgr.SetLimitZone(this.character.limitZone)},e.prototype.ExpandZone=function(t){this.NextZone(!1),t()},e.prototype.SwitchZone=function(t){var e=this;cc.tween(this.fadeEffect).to(1,{opacity:255}).call(function(){e.NextZone(!0),e.UpdateCamera(),cc.tween(e.fadeEffect).to(1,{opacity:0}).call(t).start()}).start()},e.prototype.CharacterAttack=function(){null!=this.character.enemyAttack&&((e=l.GetEnemy(this.character.enemyAttack)).IsDead()&&(this.character.enemyAttack=null));if(this.character.IsAttacking())this.character.ContinueAttack();else{var t=this.enemyMgr.GetEnemiesInRange(this.character.node.position,r.default.CHARACTER_ATTACK_DISTANCE);if(t.length>0){var e=t[0];this.character.CanAttack(e)?this.character.Attack(e):this.character.Chase(e)}else{var n=this.enemyMgr.GetEnemiesInRange(this.character.node.position,r.default.CHARACTER_CHASE_DISTANCE);if(n.length>0){e=n[0];this.character.Chase(e)}else this.character.Attack(null)}}},e.prototype.AddDamage=function(t,e){var n,o=this.GetInactiveDamage();null==o?((n=cc.instantiate(this.damagePrefab)).parent=this.node,this.damages.push(n)):n=o,n.getComponent(h.default).Spawn(t,e)},e.prototype.GetInactiveDamage=function(){var t=this.damages.filter(function(t){return!t.active});return t.length>0?t[0]:null},e.prototype.GameResume=function(){cc.game.resume()},e.prototype.GamePause=function(){cc.game.pause()},e.prototype.TouchHandler=function(t){switch(this.state){case a.INIT:break;case a.PLAYING:u.default.instance.IsTouchMove(t)?u.default.instance.delta.len()>r.default.CHARACTER_MOVE_DISTANCE&&this.character.Move():u.default.instance.IsTouchUp(t)&&this.CharacterAttack()}},e.prototype.MapEventHandler=function(t){var e=this;switch(t.type){case r.MapEvent.SWITCH_ZONE:this.SwitchZone(function(){e.mapMgr.DisableTrigger(),e.SetState(a.PLAYING)});break;case r.MapEvent.EXPAND_ZONE:this.ExpandZone(function(){e.mapMgr.DisableTrigger(),e.SetState(a.PLAYING)})}},e.prototype.EnemyEventHandler=function(t){switch(t.type){case r.EnemyEvent.DEAD:this.enemyMgr.IsClear()&&this.mapMgr.EnableTrigger();break;case r.EnemyEvent.HURT:null!=this.shakeTween&&this.shakeTween.stop();this.cameraContainer.setPosition(cc.v3(r.RandomInt(-10,10),r.RandomInt(-10,10),0)),this.shakeTween=cc.tween(this.cameraContainer).to(.5,{position:cc.v3(0,0,0)},{easing:"elasticOut"}).start(),this.AddDamage(t.damage,t.position)}},e.prototype.CharacterEventHandler=function(t){switch(t.type){case r.CharacterEvent.HURT:this.AddDamage(t.damage,t.position)}},e.prototype.UIEventHandler=function(t){switch(t.action){case r.UIEventAction.PLAY:case r.UIEventAction.RESTART:this.SetState(a.INIT)}},e.prototype.ItemEventHandler=function(t){switch(t.action){case r.ItemEvent.MAKE_CROSS_ITEM:this.itemMgr.MakeCrossItem(t.position);break;case r.ItemEvent.MAKE_COFFEE_BEAN_ITEM:this.itemMgr.MakeCoffeBeanItem(t.position)}},i([m({type:cc.Node})],e.prototype,"cameraContainer",void 0),i([m({type:s.default})],e.prototype,"character",void 0),i([m({type:cc.Node})],e.prototype,"mapContainer",void 0),i([m({type:l.default})],e.prototype,"enemyMgr",void 0),i([m({type:d.ItemMgr})],e.prototype,"itemMgr",void 0),i([m({type:cc.Prefab})],e.prototype,"damagePrefab",void 0),i([m({type:cc.Node})],e.prototype,"fadeEffect",void 0),e=i([y],e)}(cc.Component);n.default=g,cc._RF.pop()},{"./Character":"Character","./Damage":"Damage","./Defines":"Defines","./EnemyMgr":"EnemyMgr","./ItemMgr":"ItemMgr","./MapMgr":"MapMgr","./core/EventMgr":"EventMgr","./core/Input":"Input"}],HealthBar:[function(t,e,n){"use strict";cc._RF.push(e,"823eezzajBLno6Q5ehKsASQ","HealthBar");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Defines"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg01=null,e.bg02=null,e.fg=null,e.tweenMain=null,e}return o(e,t),e.prototype.SetHealthMax=function(t){this.health=t,this.healthMax=t,this.node.opacity=0},e.prototype.SetHealth=function(t){var e=this,n=t/this.healthMax,o=this.bg01.width*n;null!=this.tweenMain&&this.tweenMain.stop(),this.health=t,this.fg.width=o,cc.tween(this.bg02).delay(.25).to(.5,{width:o}).call(function(){e.node.active=0!=t}).start(),this.node.opacity=255,this.tweenMain=cc.tween(this.node).delay(1).to(.1,{opacity:0}).start()},e.prototype.GetHealthPercent=function(){return this.health/this.healthMax},e.prototype.AddHealth=function(t){this.health=a.Clamp(this.health+t,0,this.healthMax)},i([s({type:cc.Node})],e.prototype,"bg01",void 0),i([s({type:cc.Node})],e.prototype,"bg02",void 0),i([s({type:cc.Node})],e.prototype,"fg",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./Defines":"Defines"}],HomeMgr:[function(t,e,n){"use strict";cc._RF.push(e,"c0a96U4lmFPwZompSnTMvYk","HomeMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.HomeState=void 0;var a,r=t("./Defines"),c=t("./lib/Utils"),s=t("./ui/PlayerProfile"),l=t("./ui/Leaderboard"),p=t("./core/EventMgr"),u=t("./ui/DialogTerm"),h=t("./ui/DialogLevelSelection"),d=t("./ui/DialogTutorial"),f=t("./ui/DialogLeaderboard"),y=t("./ui/DialogScore"),m=t("./ui/DialogLose"),g=t("./ui/DialogRegister"),A=t("./ui/DialogDisconnect"),T=t("./ui/LoadingOverlay"),v=t("./ui/DialogDebug"),E=cc._decorator,_=E.ccclass,I=E.property;(function(t){t[t.INIT=0]="INIT",t[t.PROFILE=1]="PROFILE",t[t.TERM=2]="TERM",t[t.LEVEL_SELECT=3]="LEVEL_SELECT",t[t.PLAYING=4]="PLAYING",t[t.SCORE=5]="SCORE",t[t.LOSE=6]="LOSE",t[t.REGISTER=7]="REGISTER",t[t.LEADERBOARD=8]="LEADERBOARD",t[t.DISCONNECT=9]="DISCONNECT",t[t.INTRO_01=10]="INTRO_01",t[t.INTRO_02=11]="INTRO_02",t[t.INTRO_03=12]="INTRO_03"})(a=n.HomeState||(n.HomeState={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrIntroScreen=[],e.state=a.INIT,e.playedLevel="",e}return o(e,t),e.prototype.start=function(){this.retrieveStartupAssets()&&(this.leaderboard.init(this.playerProfile.uniqueId,this.playerProfile.fullName||"anonymous"),this.dlgLeaderboard.leaderboard=this.leaderboard,this.dlgLeaderboard.init(),this.dlgLevel.init(),this.dlgRegister.init(),this.dlgLose.init(),this.dlgDebug.init(this.playerProfile,this.leaderboard),this.playerProfile.acceptTerms?this.setState(a.LEVEL_SELECT):this.setState(a.TERM),p.EventMgr.instance.on(r.GameEvent.UI,this.homeUIEventHandler,this),p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.PROFILE_CHANGED,params:{profile:this}}),this.dlgLeaderboard.reload())},e.prototype.update=function(t){switch(this.state){case a.INIT:case a.PROFILE:break;case a.TERM:this.playerProfile.acceptTerms&&(this.dlgTerm.toggle(!1),this.setState(a.LEVEL_SELECT));break;case a.LEVEL_SELECT:case a.PLAYING:break;case a.SCORE:this.dlgScore.update(t);break;case a.REGISTER:break;case a.LEADERBOARD:!this.dlgLeaderboard.isActive()&&this.leaderboard.scorePosted&&(this.dlgLoading.toggle(!1),this.dlgLeaderboard.toggle(!0));break;case a.DISCONNECT:}},e.prototype.setState=function(t){switch(this.state=t,this.state){case a.DISCONNECT:this.dlgLoading.toggle(!1);break;case a.PROFILE:break;case a.TERM:this.dlgLoading.toggle(!1),this.dlgTerm.toggle(!0);break;case a.LEVEL_SELECT:this.dlgLoading.toggle(!1),this.dlgLose.toggle(!1),this.dlgScore.toggle(!1),this.dlgRegister.toggle(!1),this.dlgLevel.toggle(!1),this.homeMenu.active=!0;break;case a.PLAYING:this.dlgLevel.toggle(!1),this.dlgLose.toggle(!1),this.dlgScore.toggle(!1),this.dlgRegister.toggle(!1),this.homeMenu.active=!1;break;case a.SCORE:this.dlgLose.toggle(!1),this.homeMenu.active=!1,this.dlgScore.open(this.playedLevel,this.playerProfile.scoreLevel,this.playerProfile.scoreTime,this.playerProfile.scoreHP),this.leaderboard.scorePosted=!1,this.playerProfile.registered&&this.userPostScore(!1);break;case a.LOSE:this.dlgLose.open();break;case a.REGISTER:this.dlgScore.toggle(!1),this.dlgLose.toggle(!1),this.dlgRegister.toggle(!0);break;case a.LEADERBOARD:this.dlgScore.toggle(!1),this.dlgLose.toggle(!1),this.dlgRegister.toggle(!1),this.dlgLoading.toggle(!0),this.leaderboard.scorePosted&&(this.leaderboard.scorePosted=!1,this.refreshLeaderboard());break;case a.INTRO_01:this.homeMenu.active=!1,this.dlgLevel.node.active=!1,this.arrIntroScreen[0].active=!0;break;case a.INTRO_02:this.homeMenu.active=!1,this.dlgLevel.node.active=!1,this.arrIntroScreen[1].active=!0;break;case a.INTRO_03:this.arrIntroScreen[2].active=!0}},e.prototype.retrieveStartupAssets=function(){var t,e=cc.find("GameAssets");return null!=e&&(t=e.getChildByName("PlayerProfile"),this.playerProfile=t.getComponent(s.default),t=e.getChildByName("Leaderboard"),this.leaderboard=t.getComponent(l.default),!0)},e.prototype.internetCheck=function(){var t=this;c.default.ping(2e3).then(function(){t.dlgDisconnect.isActive()&&t.dlgDisconnect.toggle(!1)}).catch(function(){t.dlgDisconnect.isActive()||t.dlgDisconnect.toggle(!0)})},e.prototype.openDialogDebug=function(){this.dlgDebug.toggle(!0)},e.prototype.openDialogTutorial=function(){this.dlgTutorial.toggle(!0)},e.prototype.openDialogLevel=function(){this.dlgLevel.toggle(!0)},e.prototype.openDialogLeaderboard=function(){this.playerProfile.registered?this.dlgLeaderboard.toggle(!0):this.dlgRegister.toggle(!0)},e.prototype.closeRegister=function(){switch(this.dlgRegister.toggle(!1),this.state){case a.LEVEL_SELECT:break;case a.REGISTER:this.setState(a.LEVEL_SELECT)}},e.prototype.userAcceptTerm=function(){var t=this;this.dlgLoading.toggle(!0,.5),this.playerProfile.save({acceptTerms:!0}).then(function(t){}).catch(function(e){console.log("unable to accept term: "+e),p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.DISCONNECT,params:{state:a.TERM,callback:t.userAcceptTerm.bind(t),data:null}})})},e.prototype.refreshLeaderboard=function(){var t=this;this.dlgLeaderboard.reload().then(function(){t.leaderboard.scorePosted=!0}).catch(function(e){p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.DISCONNECT,params:{state:a.LEADERBOARD,callback:t.refreshLeaderboard.bind(t),data:null}})})},e.prototype.leaderboardClose=function(){this.state==a.LEADERBOARD&&this.setState(a.LEVEL_SELECT)},e.prototype.levelSelected=function(t,e){switch(e){case r.LevelName.FRONT_YARD:this.setState(a.INTRO_01);break;case r.LevelName.MANSION:this.setState(a.INTRO_02)}},e.prototype.scoreDialogHandler=function(t,e){switch(e){case"restart":p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.RESTART,params:{level:this.playedLevel}});break;case"leaderboard":this.playerProfile.registered?this.setState(a.LEADERBOARD):this.setState(a.REGISTER);break;case"menu":this.setState(a.LEVEL_SELECT);break;case"next":switch(this.playedLevel){case r.LevelName.FRONT_YARD:this.setState(a.INTRO_02);break;case r.LevelName.MANSION:}}},e.prototype.userRegisterHandler=function(){var t=this,e=this.dlgRegister.getData();0!=e.fullName.length&&0!=e.email.length?(e.registered=!0,this.dlgLoading.toggle(!0,.5),this.playerProfile.save(e).then(function(e){t.dlgRegister.toggle(!1),t.leaderboard.setName(t.playerProfile.fullName),t.setState(a.LEADERBOARD),0!=t.playerProfile.score?t.userPostScore(!0):t.leaderboard.scorePosted=!0}).catch(function(e){p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.DISCONNECT,params:{state:a.REGISTER,callback:t.userRegisterHandler.bind(t),data:null}})})):alert("Please input all the fields.")},e.prototype.userPostScore=function(t){var e=this;void 0===t&&(t=!1),this.leaderboard.post(this.playerProfile.score).then(function(n){e.leaderboard.scorePosted=!0,t&&e.refreshLeaderboard()}.bind(this)).catch(function(n){console.log("cannot post score: "+n),p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.DISCONNECT,params:{state:e.state,callback:e.userPostScore.bind(e),data:t}})})},e.prototype.homeUIEventHandler=function(t){switch(t.action){case r.UIEventAction.DISCONNECT:this.dlgLoading.toggle(!1),this.dlgDisconnect.open(t.params.state,t.params.callback,t.params.data),this.setState(a.DISCONNECT);break;case r.UIEventAction.RECONNECT:this.dlgDisconnect.toggle(!1),this.state=t.params.state;break;case r.UIEventAction.PLAY:this.setState(a.PLAYING),this.dlgLoading.toggle(!0);break;case r.UIEventAction.SCORE:switch(this.playedLevel=t.params.level,this.playerProfile.setScore(t.params.scoreLevel,t.params.scoreTime,t.params.scoreHp),this.setState(a.SCORE),this.playedLevel){case r.LevelName.FRONT_YARD:this.playerProfile.save({clearedLevel1:!0}).then(function(t){console.log("cleared level 1")}.bind(this)).catch(function(){console.log("unable to save profile")}.bind(this));break;case r.LevelName.MANSION:this.playerProfile.save({clearedLevel2:!0}).then(function(t){console.log("cleared level 2")}.bind(this)).catch(function(){console.log("unable to save profile")}.bind(this))}break;case r.UIEventAction.LOSE:this.leaderboard.scorePosted=!0,this.playedLevel=t.params.level,this.setState(a.LOSE);break;case r.UIEventAction.LOAD_COMPLETE:this.dlgLoading.toggle(!1);break;case r.UIEventAction.RESTART:this.setState(a.PLAYING),this.dlgLoading.toggle(!0);break;case r.UIEventAction.INTRO_END:switch(this.state){case a.INTRO_01:p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.PLAY,params:{level:r.LevelName.FRONT_YARD}});break;case a.INTRO_02:p.EventMgr.instance.emit(r.GameEvent.UI,{action:r.UIEventAction.PLAY,params:{level:r.LevelName.MANSION}});break;case a.INTRO_03:}}},i([I({displayName:"Home Menu",type:cc.Node})],e.prototype,"homeMenu",void 0),i([I({displayName:"Dialog Term",type:u.default})],e.prototype,"dlgTerm",void 0),i([I({displayName:"Dialog Level Selection",type:h.default})],e.prototype,"dlgLevel",void 0),i([I({displayName:"Dialog Tutorial",type:d.default})],e.prototype,"dlgTutorial",void 0),i([I({displayName:"Dialog Leaderboard",type:f.default})],e.prototype,"dlgLeaderboard",void 0),i([I({displayName:"Dialog Score",type:y.default})],e.prototype,"dlgScore",void 0),i([I({displayName:"Dialog Lose",type:m.default})],e.prototype,"dlgLose",void 0),i([I({displayName:"Dialog Register",type:g.default})],e.prototype,"dlgRegister",void 0),i([I({displayName:"Dialog Disconnect",type:A.default})],e.prototype,"dlgDisconnect",void 0),i([I({displayName:"Loading Overlay",type:T.default})],e.prototype,"dlgLoading",void 0),i([I({displayName:"Loading Debug",type:v.default})],e.prototype,"dlgDebug",void 0),i([I({type:[cc.Node]})],e.prototype,"arrIntroScreen",void 0),e=i([_],e)}(cc.Component);n.default=S,cc._RF.pop()},{"./Defines":"Defines","./core/EventMgr":"EventMgr","./lib/Utils":"Utils","./ui/DialogDebug":"DialogDebug","./ui/DialogDisconnect":"DialogDisconnect","./ui/DialogLeaderboard":"DialogLeaderboard","./ui/DialogLevelSelection":"DialogLevelSelection","./ui/DialogLose":"DialogLose","./ui/DialogRegister":"DialogRegister","./ui/DialogScore":"DialogScore","./ui/DialogTerm":"DialogTerm","./ui/DialogTutorial":"DialogTutorial","./ui/Leaderboard":"Leaderboard","./ui/LoadingOverlay":"LoadingOverlay","./ui/PlayerProfile":"PlayerProfile"}],Init:[function(t,e,n){"use strict";cc._RF.push(e,"e85018qF9JMNaq8emoUtLG1","Init");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("./ui/PlayerProfile"),c=t("./ui/Leaderboard"),s=cc._decorator,l=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PROFILE=1]="PROFILE"})(a||(a={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameAssets=[],e.nextScene="main",e.state=a.INIT,e}return o(e,t),e.prototype.start=function(){var t,e=cc.find("GameAssets");null==e?(e=new cc.Node("GameAssets"),cc.game.addPersistRootNode(e),(t=cc.instantiate(this.gameAssets[0])).parent=e,this.playerProfile=t.getComponent(r.default),window.__PLAYER_PROFILE=this.playerProfile,(t=cc.instantiate(this.gameAssets[1])).parent=e,window.__LEADERBOARD=t.getComponent(c.default)):this.gotoMain()},e.prototype.update=function(t){switch(this.state){case a.INIT:this.playerProfile.isReady()&&(this.state=a.PROFILE,this.playerProfile.load().then(this.gotoMain.bind(this)).catch(function(t){console.log("Cannot load profile "+t)}.bind(this)));break;case a.PROFILE:}},e.prototype.gotoMain=function(){cc.director.loadScene(this.nextScene,function(){})},i([p({type:[cc.Prefab]})],e.prototype,"gameAssets",void 0),i([p({type:cc.String})],e.prototype,"nextScene",void 0),e=i([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./ui/Leaderboard":"Leaderboard","./ui/PlayerProfile":"PlayerProfile"}],Input:[function(t,e,n){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./EventMgr"),r=cc._decorator,c=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.movePosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.movePosition=t.touch.getLocation(),a.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),a.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.onTouchMove=function(t){this.movePosition=t.touch.getLocation(),cc.Vec2.subtract(this.delta,this.movePosition,this.position),a.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.prototype.IsTouchUp=function(t){return t.type==cc.Node.EventType.TOUCH_END},e.prototype.IsTouchMove=function(t){return t.type==cc.Node.EventType.TOUCH_MOVE},e.instance=null,e.TOUCH="TouchEvent",e=n=i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./EventMgr":"EventMgr"}],IntroScreen:[function(t,e,n){"use strict";cc._RF.push(e,"3c869SpfDpCwbTbEMreM2dS","IntroScreen");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../core/EventMgr"),c=t("../Defines"),s=cc._decorator,l=s.ccclass,p=s.property;(function(t){t[t.SHOW=0]="SHOW",t[t.HIDE=1]="HIDE"})(a||(a={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mTitle=null,e.mLabel=null,e.mButtonNext=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){this.ShowIntro()},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case a.SHOW:this.node.active=!0,this.node.opacity=255,this.mButtonNext.active=!1,cc.tween(this.mTitle).set({opacity:0}).to(.5,{opacity:255}).start(),cc.tween(this.mLabel.node).set({opacity:0}).delay(.5).to(.5,{opacity:255}).start(),cc.tween(this.mButtonNext).set({opacity:0}).delay(3).set({active:!0}).to(.5,{opacity:255}).start();break;case a.HIDE:cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.node.active=!1,r.EventMgr.instance.emit(c.GameEvent.UI,{action:c.UIEventAction.INTRO_END})}).start()}},e.prototype.update=function(t){switch(this.mState){case a.SHOW:case a.HIDE:}},e.prototype.ShowIntro=function(){this.SetState(a.SHOW)},e.prototype.OnClickButtonNext=function(){switch(this.mState){case a.SHOW:this.SetState(a.HIDE)}},i([p(cc.Node)],e.prototype,"mTitle",void 0),i([p(cc.Label)],e.prototype,"mLabel",void 0),i([p(cc.Node)],e.prototype,"mButtonNext",void 0),e=i([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../Defines":"Defines","../core/EventMgr":"EventMgr"}],ItemMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f5823YL1JNPR7+eCRaQ9yFN","ItemMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemMgr=void 0;var a,r=t("./item/CoffeeBeanItem"),c=t("./item/CrossItem"),s=cc._decorator,l=s.ccclass,p=s.property;(function(t){t[t.INIT=0]="INIT"})(a||(a={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mCoffeeBeanItemPrefab=null,e.mCrossItemPrefab=null,e.mArrItem=[],e}return o(e,t),e.prototype.Init=function(){this.SetState(a.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case a.INIT:this.mArrItem=[]}},e.prototype.update=function(t){switch(this.mState){case a.INIT:}},e.prototype.SetMapMgr=function(t){this.mMapMgr=t},e.prototype.SetCharacter=function(t){this.mCharacter=t},e.prototype.MakeCrossItem=function(t){this.MakeItem(c.CrossItem,this.mCrossItemPrefab,t)},e.prototype.MakeCoffeBeanItem=function(t){this.MakeItem(r.CoffeeBeanItem,this.mCoffeeBeanItemPrefab,t)},e.prototype.GetItem=function(t,e,n){for(var o=0;o<t.length;o++){if(t[o].IsStateInactive()&&t[o].node.getComponent(e))return t[o]}var i=cc.instantiate(n).getComponent(e);return this.mArrItem.push(i),this.mMapMgr.AddObjectIntoMap(i.node),i},e.prototype.MakeItem=function(t,e,n){var o=this.GetItem(this.mArrItem,t,e);o.SetCharacter(this.mCharacter),o.SetPosition(n),o.Init()},i([p(cc.Prefab)],e.prototype,"mCoffeeBeanItemPrefab",void 0),i([p(cc.Prefab)],e.prototype,"mCrossItemPrefab",void 0),e=i([l],e)}(cc.Component);n.ItemMgr=u,cc._RF.pop()},{"./item/CoffeeBeanItem":"CoffeeBeanItem","./item/CrossItem":"CrossItem"}],Item:[function(t,e,n){"use strict";cc._RF.push(e,"07882yH5DFDQo/tMzUUgI5p","Item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Item=void 0;var a,r=t("../Defines"),c=cc._decorator,s=c.ccclass,l=c.property;(function(t){t[t.INACTIVE=0]="INACTIVE",t[t.INIT=1]="INIT",t[t.FLY_OUT=2]="FLY_OUT",t[t.ACTIVE=3]="ACTIVE",t[t.COLLECTED=4]="COLLECTED"})(a||(a={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mAnimIdleName="",e.mAnimCollectedName="",e.mSpine=null,e.mCharacter=null,e.mState=null,e.mIsSpineComplete=!1,e}return o(e,t),e.prototype.start=function(){this.mSpine.setCompleteListener(this.OnSpineComplete.bind(this))},e.prototype.Init=function(){this.SetState(a.INIT)},e.prototype.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case a.INACTIVE:this.node.active=!1;break;case a.INIT:this.node.active=!0;break;case a.FLY_OUT:this.mSpine.setAnimation(0,this.mAnimIdleName,!0),cc.tween(this.node).by(.6,{x:r.RandomFloat(50,200)*r.RandomSign(),y:r.RandomFloat(50,200)*r.RandomSign()}).call(function(){return e.SetState(a.ACTIVE)}).start(),cc.tween(this.mSpine.node).set({x:0,y:0}).by(.2,{y:100},{easing:cc.easing.quadOut}).by(.4,{y:-100},{easing:cc.easing.bounceOut}).start();break;case a.ACTIVE:break;case a.COLLECTED:this.mIsSpineComplete=!1,this.mSpine.setAnimation(0,this.mAnimCollectedName,!1),this.OnCollectItem()}},e.prototype.update=function(t){switch(this.mState){case a.INACTIVE:break;case a.INIT:this.SetState(a.FLY_OUT);break;case a.FLY_OUT:break;case a.ACTIVE:this.UpdateMoveToCharacter(t),this.IsCollisonWithCharacter()&&this.SetState(a.COLLECTED);break;case a.COLLECTED:this.mIsSpineComplete&&this.SetState(a.INACTIVE)}},e.prototype.OnCollectItem=function(){},e.prototype.SetStateInactive=function(){this.SetState(a.INACTIVE)},e.prototype.IsStateInactive=function(){return this.mState==a.INACTIVE},e.prototype.SetPosition=function(t){this.node.x=t.x,this.node.y=t.y,this.node.z=t.z},e.prototype.SetCharacter=function(t){this.mCharacter=t},e.prototype.IsCollisonWithCharacter=function(){return this.mCharacter.node.position.subtract(this.node.position).len()<100},e.prototype.OnSpineComplete=function(){this.mIsSpineComplete=!0},e.prototype.UpdateMoveToCharacter=function(t){var e=this.mCharacter.node.position.subtract(this.node.position).normalize(),n=this.mCharacter.node.position.subtract(this.node.position).len();if(n<300){var o=3*(300-n);this.node.x=r.MoveToTarget(this.node.x,this.mCharacter.node.x,e.x*o,t),this.node.y=r.MoveToTarget(this.node.y,this.mCharacter.node.y,e.y*o,t)}},i([l(cc.String)],e.prototype,"mAnimIdleName",void 0),i([l(cc.String)],e.prototype,"mAnimCollectedName",void 0),i([l(sp.Skeleton)],e.prototype,"mSpine",void 0),e=i([s],e)}(cc.Component);n.Item=p,cc._RF.pop()},{"../Defines":"Defines"}],LeaderboardItem:[function(t,e,n){"use strict";cc._RF.push(e,"c7444rsgtZEWKIYE5IZScEy","LeaderboardItem");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,new cc.Color(75,98,223),new cc.Color(158,158,158),new cc.Color(118,118,118),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){return this.lblRank=cc.find("RankBg/Rank",this.node).getComponent(cc.Label),this.lblName=this.node.getChildByName("Name").getComponent(cc.Label),this.lblPoint=this.node.getChildByName("Point").getComponent(cc.Label),this.background=this.node.getChildByName("Background"),this},e.prototype.setInfo=function(t,e,n){this.lblRank.string=t+"",this.lblName.string=e,this.lblPoint.string=""+n},e=i([r],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Leaderboard:[function(t,e,n){"use strict";cc._RF.push(e,"512caKYIuVOVYGesRlAU4PC","Leaderboard");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.LeaderboardItemData=void 0;var a=t("../Defines"),r=t("../lib/Utils"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){this.display_name="",this.score=0,this.rank=0}return t.prototype.reset=function(){this.display_name="",this.rank=0,this.score=0},t}());n.LeaderboardItemData=l;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boardName="",e.userEntry=new l,e.scorePosted=!1,e}return o(e,t),e.prototype.init=function(t,e){this.userId=t,this.userName=e,this.boardName="255_"+a.default.GAME_NAME,this.dataDate=new Date(a.default.LEADERBOARD_FIRST_DAY.getTime())},e.prototype.setName=function(t){this.userName=t},e.prototype.setDate=function(t){this.dataDate=t},e.prototype.setDayCount=function(t){this.dataDate.setTime(a.default.LEADERBOARD_FIRST_DAY.getTime()),this.dataDate.setDate(this.dataDate.getDate()+(t-1))},e.prototype.getDayCount=function(){var t=this.dataDate.getTime()-a.default.LEADERBOARD_FIRST_DAY.getTime();return Math.ceil(t/1e3/60/60/24)+1},e.prototype.getDayLabel=function(){return"Day "+this.getDayCount()+" - "+this.dataDate.toLocaleString("default",{month:"long",day:"numeric"})},e.prototype.get=function(t,e){var n=this;return void 0===t&&(t=0),void 0===e&&(e=50),new Promise(function(o,i){r.default.request("get",a.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+n.boardName+"/"+t+"/"+e,null).then(function(t){if(null!=t&&void 0!=t&&""!=t.trim()){try{var e=JSON.parse(t);if(!e.statusCode||"404"!=e.statusCode)return void o(e)}catch(t){console.log("Leaderboard data parse error: "+t)}o([])}else o([])}.bind(n)).catch(function(t){i(t)}.bind(n))}.bind(this))},e.prototype.post=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(o,i){var c={userid:n.userId,score:t,name:n.userName,attrs:e};r.default.request("post",a.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+n.boardName,JSON.stringify(c)).then(function(t){o()}.bind(n)).catch(function(t){i(t)}.bind(n))}.bind(this))},e.prototype.myEntry=function(){var t=this;return new Promise(function(e,n){t.userEntry.reset(),r.default.request("get",a.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+t.boardName+"/"+t.userId,null).then(function(n){if(null!=n&&void 0!=n&&""!=n.trim()){try{var o=JSON.parse(n);if(!o.statusCode||"404"!=o.statusCode)return Object.assign(t.userEntry,o),void e()}catch(t){console.log("Leaderboard my entry parse error: "+t)}e()}else e()}.bind(t)).catch(function(t){console.log("cannot get my entry: ",t),e()}.bind(t))}.bind(this))},e.prototype.deleteMyEntry=function(){var t=this;return new Promise(function(e,n){var o={userid:t.userId};r.default.request("post",a.default.REST_API_SERVER+"/api/pri/federation/leaderboard/"+t.boardName+"/delete",JSON.stringify(o)).then(function(t){null==t||void 0==t||""==t||t.indexOf("OK")>-1?e():n("unknown status: "+t)}.bind(t)).catch(function(t){n(t)}.bind(t))}.bind(this))},e=i([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Defines":"Defines","../lib/Utils":"Utils"}],LightBall:[function(t,e,n){"use strict";cc._RF.push(e,"0f908M3owZK56a6k9u/Bygq","LightBall");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../Defines"),c=cc._decorator,s=c.ccclass;c.property;(function(t){t[t.IDLE=0]="IDLE",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(a||(a={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.velocity=cc.v3(),e.perpendicularVelocity=cc.v3(),e}return o(e,t),e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case a.PLAYING:this.UpdatePosition(t),this.IsOutOfScreen()&&this.Destroy()}},e.prototype.SetState=function(t){switch(this.state=t,this.state){case a.PLAYING:this.countTime=0}},e.prototype.IsOutOfScreen=function(){var t=this.node.position,e=cc.Camera.main.node.position;return t.x<e.x-cc.winSize.width/2-200||t.x>e.x+cc.winSize.width/2+200||t.y<-200||t.y>cc.winSize.height+200},e.prototype.Spawn=function(t,e,n,o){switch(this.type=o||r.LightBallType.STRAIGHT,this.speed=n,this.node.setPosition(t),this.node.angle=e,this.velocity=cc.v3(Math.cos(e/180*Math.PI),Math.sin(e/180*Math.PI)),this.type){case r.LightBallType.STRAIGHT:break;case r.LightBallType.SIN:var i=e+90;this.perpendicularVelocity.x=Math.cos(i/180*Math.PI),this.perpendicularVelocity.y=Math.sin(i/180*Math.PI)}this.SetState(a.PLAYING)},e.prototype.Destroy=function(){this.node.active=!1},e.prototype.UpdatePosition=function(t){switch(this.type){case r.LightBallType.STRAIGHT:e=(e=cc.v3(this.node.position)).add(cc.v3(this.velocity).multiplyScalar(r.default.GAME_SPEED_BASE*this.speed*t)),this.node.setPosition(e);break;case r.LightBallType.SIN:this.countTime+=t*r.default.GAME_SPEED_BASE*this.speed*.01;var e,n=cc.v3(this.velocity).multiplyScalar(r.default.GAME_SPEED_BASE*this.speed*t),o=cc.v3(this.perpendicularVelocity).multiplyScalar(.7*r.default.GAME_SPEED_BASE*this.speed*(Math.sin(this.countTime)-Math.sin(this.countTime-t))),i=n.add(o);e=(e=cc.v3(this.node.position)).add(i),this.node.setPosition(e),this.node.angle=180*Math.atan2(i.y,i.x)/Math.PI+180}},e=i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],LoadingOverlay:[function(t,e,n){"use strict";cc._RF.push(e,"019d6yLEa1NsLvln8gKpgjg","LoadingOverlay");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.update=function(t){this.iconLoading.angle-=180*t},e.prototype.toggle=function(t,e){void 0===e&&(e=1),this.node.active=t,this.overlay.opacity=255*e},i([c({displayName:"Loading Icon",type:cc.Node})],e.prototype,"iconLoading",void 0),i([c({displayName:"Overlay",type:cc.Node})],e.prototype,"overlay",void 0),e=i([r],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],MapMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4fa49OSK4JALaejCQuFWEl5","MapMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./enemies/LightBall"),r=t("./enemies/Enemy"),c=t("./enemies/Vald"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zones=[],e.triggers=null,e.enemiesContainer=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this.UpdateRenderOrder()},e.prototype.EnableTrigger=function(){this.triggers.active=!0},e.prototype.DisableTrigger=function(){this.triggers.active=!1},e.prototype.AddObjectIntoMap=function(t){t.parent=this.enemiesContainer},e.prototype.GetEnemies=function(){return this.enemiesContainer.children.filter(function(t){return null!=t.getComponent(r.default)||null!=t.getComponent(c.default)})},e.prototype.GetLimitZone=function(t){void 0===t&&(t=0);var e=this.zones[t];return new cc.Rect(e.offset.x-e.size.width/2,e.offset.y,e.size.width,e.size.height)},e.prototype.GetMaxZone=function(){return this.zones.length},e.prototype.UpdateRenderOrder=function(){for(var t=0;t<this.enemiesContainer.childrenCount;t++){var e=this.enemiesContainer.children[t];null!=e.getComponent(a.default)?e.zIndex=cc.winSize.height:e.zIndex=cc.winSize.height-this.enemiesContainer.children[t].y}},i([p({type:[cc.BoxCollider]})],e.prototype,"zones",void 0),i([p({type:cc.Node})],e.prototype,"triggers",void 0),i([p({type:cc.Node})],e.prototype,"enemiesContainer",void 0),e=i([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./enemies/Enemy":"Enemy","./enemies/LightBall":"LightBall","./enemies/Vald":"Vald"}],PlayerProfile:[function(t,e,n){"use strict";cc._RF.push(e,"486daB6wGNFEZhtBGSnUqi8","PlayerProfile");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=t("../lib/Utils"),c=t("../lib/fingerprint2.min.js"),s=t("../Defines"),l=t("../core/EventMgr"),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userId=null,e.uniqueId=null,e.fullName=null,e.email=null,e.registered=!1,e.finishTutorial=!1,e.acceptTerms=!1,e.receivedPrize=!1,e.highScore=0,e.score=0,e.scoreLevel=0,e.scoreTime=0,e.scoreHP=0,e.playedLevel="",e.clearedLevel1=!1,e.clearedLevel2=!1,e}return o(e,t),e.prototype.start=function(){var t=this;c.get({hasher:!0,canvas:!0,ie_activex:!0},function(e){var n=e.map(function(t){return t.value});t.uniqueId=c.x64hash128(n.join(""),31),t.userId=t.uniqueId,console.log("unique id: "+t.uniqueId)}.bind(this))},e.prototype.update=function(t){},e.prototype.isReady=function(){return null!=this.uniqueId},e.prototype.getApiUrl=function(){return a.default.REST_API_SERVER+"/api/pub/federation/profile/"+a.default.GAME_NAME+"/Player%3A"+this.uniqueId+"%3A"+a.default.PHASE},e.prototype.setScore=function(t,e,n){this.scoreLevel=t,this.scoreTime=e,this.scoreHP=n,this.score=t+e+n},e.prototype.load=function(){var t=this;return new Promise(function(e,n){r.default.request("get",t.getApiUrl(),null).then(function(n){if(null!=n&&void 0!=n&&""!=n.trim()){try{var o=JSON.parse(n);o.statusCode&&"404"==o.statusCode||o.userId&&Object.assign(t,o)}catch(t){console.log("Profile data parse error: "+t)}l.EventMgr.instance.emit(a.GameEvent.UI,{action:s.UIEventAction.PROFILE_CHANGED,params:{profile:t}}),e(t)}else e(t)}).catch(function(t){n(t)}.bind(t))}.bind(this))},e.prototype.save=function(t){var e=this;void 0===t&&(t=null);var n={userId:this.userId,fullName:this.fullName,email:this.email,finishTutorial:this.finishTutorial,registered:this.registered,acceptTerms:this.acceptTerms};return t&&Object.assign(n,t),new Promise(function(t,o){r.default.request("post",e.getApiUrl(),JSON.stringify(n)).then(function(i){if(null!=i&&void 0!=i)return i.indexOf("OK")>-1?(Object.assign(e,n),l.EventMgr.instance.emit(a.GameEvent.UI,{action:s.UIEventAction.PROFILE_CHANGED,params:{profile:e}}),void t()):void o("empty");o("empty")}).catch(function(t){o(t)})})},e.prototype.clear=function(){var t=this,e={fullName:null,email:null,phoneNumber:null,registered:!1,finishTutorial:!1,acceptTerms:!1,score:0,highScore:0};return new Promise(function(n,o){r.default.request("post",t.getApiUrl(),JSON.stringify(e)).then(function(t){n()}).catch(function(t){o(t)})})},e=i([u],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../Defines":"Defines","../core/EventMgr":"EventMgr","../lib/Utils":"Utils","../lib/fingerprint2.min.js":"fingerprint2.min"}],StatsVampire1:[function(t,e,n){"use strict";cc._RF.push(e,"c5775Ue621KE4vXTZc1SZbe","StatsVampire1");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.StatsVampire1=void 0;var a=t("./Stats"),r=t("../Defines"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrDropItemInfo=[{event:r.ItemEvent.MAKE_CROSS_ITEM,dropPercent:1,numberMin:2,numberMax:4},{event:r.ItemEvent.MAKE_COFFEE_BEAN_ITEM,dropPercent:.5,numberMin:1,numberMax:1}],e}return o(e,t),e=i([s],e)}(a.default));n.StatsVampire1=l,cc._RF.pop()},{"../Defines":"Defines","./Stats":"Stats"}],StatsVampire2:[function(t,e,n){"use strict";cc._RF.push(e,"7f86fPKvwhCp7onbi+tqIv9","StatsVampire2");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.StatsVampire2=void 0;var a=t("./Stats"),r=t("../Defines"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrDropItemInfo=[{event:r.ItemEvent.MAKE_CROSS_ITEM,dropPercent:1,numberMin:5,numberMax:7},{event:r.ItemEvent.MAKE_COFFEE_BEAN_ITEM,dropPercent:1,numberMin:1,numberMax:1}],e}return o(e,t),e=i([s],e)}(a.default));n.StatsVampire2=l,cc._RF.pop()},{"../Defines":"Defines","./Stats":"Stats"}],Stats:[function(t,e,n){"use strict";cc._RF.push(e,"a82a3iVCY9CB56pud29ricR","Stats");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Defines"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hp=a.default.ENEMY_HP,e.damageMin=a.default.ENEMY_MIN_DAMAGE,e.damageMax=a.default.ENEMY_MAX_DAMAGE,e.speed=a.default.ENEMY_MOVE_SPEED,e.attackDelay=a.default.ENEMY_ATTACK_DELAY,e.patrolDelay=a.default.ENEMY_PATROL_DELAY,e.hurtDelay=a.default.ENEMY_HURT_DELAY,e.arrDropItemInfo=[{event:a.ItemEvent.MAKE_CROSS_ITEM,dropPercent:0,numberMin:0,numberMax:0},{event:a.ItemEvent.MAKE_COFFEE_BEAN_ITEM,dropPercent:0,numberMin:0,numberMax:0}],e}return o(e,t),e.prototype.update=function(t){},i([s({type:cc.Integer})],e.prototype,"hp",void 0),i([s({type:cc.Integer})],e.prototype,"damageMin",void 0),i([s({type:cc.Integer})],e.prototype,"damageMax",void 0),i([s({type:cc.Float})],e.prototype,"speed",void 0),i([s({type:cc.Float})],e.prototype,"attackDelay",void 0),i([s({type:cc.Float})],e.prototype,"patrolDelay",void 0),i([s({type:cc.Float})],e.prototype,"hurtDelay",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],Test:[function(t,e,n){"use strict";cc._RF.push(e,"a9b3b2jEoxJo7pZBFq7Qq+T","Test");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/Input"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return o(e,t),e.prototype.start=function(){this.crossbow=this.spine.findBone("crosshair"),this.spine.setAnimation(1,"aim",!0)},e.prototype.update=function(t){this.crossbow.x=a.default.instance.position.x-this.node.position.x,this.crossbow.y=a.default.instance.position.y-this.node.position.y},i([s(sp.Skeleton)],e.prototype,"spine",void 0),e=i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./core/Input":"Input"}],TextDefine:[function(t,e,n){"use strict";cc._RF.push(e,"cfc55EMXjdAqokBqYGS33CF","TextDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.TextDefine=void 0;var o=new(function(){return function(){this.INTRO_01="Vampires are real.\nThey\u2019ve been roaming this world for centuries.\nIn the shadows.\n\nGuillermo lives in Staten Island with the vampires Nandor, Lazlo, Nadja and Colin Robinson.\nActing as Nandor\u2019s familiar for more than a decade, Guillermo hopes that one day, he\u2019ll finally be turned.\n\nThere\u2019s just one slight problem: Guillermo is a descendant of the famous vampire hunter Van Helsing and proves to be very skilled at killing bloodsuckers\u2026.unwittingly.\n\nOne day, as Guillermo comes back from an errand for Nandor, he finds the Vampire Residence awfully quiet.",this.INTRO_02="After slaughtering countless vampires and werewolves, Guillermo eventually reaches the mansion\u2019s foyer.\nNandor is still nowhere to be seen.\n\nUpon calling out for his Master, Guillermo bumps into Nadja\u2019s ghost in the form of a little doll.\nShe informs him that he\u2019s currently being detained in his room by a member of the Vampiric Council. \n\nArmed with stakes and a crossbow and hooked on caffeine, Guillermo decides to muster his courage once again and goes on a quest to deliver Nandor.",this.INTRO_03="Congratulations!\nYou\u2019ve beaten the game!\nJust like Guillermo, the blood a worthy Vampire Hunter runs in your veins.\n\nAs Guillermo and his vampire friends go back to a normal life, something tells you that their adventures are far from being over though\u2026\n\nTo be continued.",this.ARR_INTRO=[this.INTRO_01,this.INTRO_02,this.INTRO_03]}}());n.TextDefine=o,cc._RF.pop()},{}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();n.default=o,cc._RF.pop()},{}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"6fbb3EATi1PurSsVcnpONzM","Utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=new(function(){function t(){}return t.prototype.request=function(t,e,n,o){return void 0===o&&(o=null),new Promise(function(i,a){var r=new XMLHttpRequest;r.open(t,e,!0),"post"==t&&r.setRequestHeader("Content-type","application/json"),o&&(r.responseType=o),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||"1"==window.fromCache?i(r.response):a("error"))},r.send(n)})},t.prototype.ping=function(t){return void 0===t&&(t=1e3),new Promise(function(e,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState>=2&&200==o.status&&(o.abort(),e())},o.onerror=function(){n("ping error")},o.ontimeout=function(){n("ping timeout")},o.timeout=t,o.open("GET","https://oms.gameloft.com/ping?time="+(new Date).getTime(),!0),o.send()})},t}()),cc._RF.pop()},{}],Vald:[function(t,e,n){"use strict";cc._RF.push(e,"1d4a8nu4KhM4KIYwnyNjesA","Vald");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../Defines"),c=t("../core/Timer"),s=t("../core/EventMgr"),l=t("./LightBall"),p=t("./Stats"),u=t("../HealthBar"),h=t("./BossStats"),d=t("../Defines"),f=cc._decorator,y=f.ccclass,m=f.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.WAITING=2]="WAITING",t[t.APPEAR=3]="APPEAR",t[t.DISAPPEAR=4]="DISAPPEAR",t[t.CHARGE=5]="CHARGE",t[t.ATTACK=6]="ATTACK",t[t.ULTI_ATTACK=7]="ULTI_ATTACK",t[t.DEAD=8]="DEAD"})(a||(a={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.EnemyType.VALD,e.spine=null,e.tomb=null,e.body=null,e.stats=null,e.bossStats=null,e.healthBar=null,e.hitPoint=null,e.lightball=null,e.timerWaiting=new c.default,e.lightballs=[],e}return o(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.tomb.setCompleteListener(this.OnAnimationComplete.bind(this)),this.node.setScale(r.default.ENEMY_SCALE),this.Init()},e.prototype.update=function(t){switch(this.state){case a.INIT:this.IsDangerous()&&this.SetState(a.IDLE),this.bossStats.Init();break;case a.IDLE:this.timerWaiting.Update(t),this.timerWaiting.IsDone()&&(this.IsDangerous()?this.SetState(a.DISAPPEAR):this.SetState(a.CHARGE));break;case a.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(this.nextState);break;case a.APPEAR:case a.DISAPPEAR:case a.CHARGE:case a.ATTACK:break;case a.ULTI_ATTACK:this.FadeToCharacter(this.target),this.UpdateUltiAttack(t)}},e.prototype.SetState=function(t,e){switch(void 0===e&&(e=null),this.state){case a.ULTI_ATTACK:this.bossStats.UpdateConditionIndex()}switch(this.state=t,this.state){case a.INIT:this.spine.node.active=!0,this.tomb.node.active=!1,this.healthBar.SetHealthMax(this.stats.hp);break;case a.IDLE:this.SetAnim(r.VLAD_ANIM.IDLE,!0);break;case a.APPEAR:this.body.enabled=!0,this.node.setPosition(this.GetTeleportPosition()),this.SetAnim(r.VLAD_ANIM.TELEPORT_APPEAR,!1);break;case a.DISAPPEAR:this.body.enabled=!1,this.SetAnim(r.VLAD_ANIM.TELEPORT_DISAPPEAR,!1),this.Waiting(2,a.APPEAR);break;case a.CHARGE:this.SetAnim(r.VLAD_ANIM.CHARGE,!0),this.bossStats.CheckUltiCondition(this.healthBar.GetHealthPercent())?this.Waiting(.5,a.ULTI_ATTACK):this.Waiting(.5,a.ATTACK);break;case a.ATTACK:this.FadeToCharacter(this.target),this.SetAnim(r.VLAD_ANIM.ATTACK,!1),this.Attack(this.GetAngleToAttackTarget(),r.LightBallType.SIN),this.Waiting(r.default.BOSS_VLAD_ATTACK_COOLDOWN,a.IDLE);break;case a.ULTI_ATTACK:this.ultiAttackcountTime=0,this.ultiAttackcountIndex=0;break;case a.DEAD:this.SetAnim(r.VLAD_ANIM.DEAD,!1)}},e.prototype.Init=function(){this.SetState(a.INIT)},e.prototype.Idle=function(){this.SetState(a.IDLE)},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(a.WAITING)},e.prototype.Attack=function(t,e){void 0===t&&(t=0),void 0===e&&(e=r.LightBallType.STRAIGHT);var n=null,o=this.lightballs.filter(function(t){return!t.active});0==o.length?(n=cc.instantiate(this.lightball),this.lightballs.push(n)):(n=o[0]).active=!0;var i=n.getComponent(l.default);n.parent=this.node.parent,i.Spawn(this.GetLightBallStarPosition(),t,d.default.LIGHT_BALL_SPEED,e)},e.prototype.Hurt=function(t){this.stats.hp-=t,this.stats.hp<=0?(this.stats.hp=0,this.SetState(a.DEAD)):this.SetAnim(r.VLAD_ANIM.HURT,!1),this.healthBar.SetHealth(this.stats.hp),s.EventMgr.instance.emit(r.GameEvent.ENEMY,{type:r.EnemyEvent.HURT,damage:t,position:cc.v3(this.node.position.x+r.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+r.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)})},e.prototype.GetTeleportPosition=function(){var t=cc.Camera.main.node.position,e=cc.v3();cc.Vec3.subtract(e,this.target.node.position,t);var n=180*Math.atan2(e.y,e.x)/Math.PI+180+r.RandomInt(-50,50),o=r.default.BOSS_VLAD_DANGEROUS_DISTANCE+10,i=t.x+Math.cos(n*Math.PI/180)*o,a=t.y+Math.sin(n*Math.PI/180)*o;return cc.v3(i,a,0)},e.prototype.GetHitDamage=function(t){var e=t.getComponent(p.default);return r.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToCharacter=function(t){var e=this.node.position.x<t.node.position.x?-1:1;this.SetDir(e)},e.prototype.IsIdle=function(){return this.state==a.IDLE},e.prototype.IsDead=function(){return this.state==a.DEAD},e.prototype.IsDisappear=function(){return this.nextState==a.APPEAR},e.prototype.IsDangerous=function(){return cc.Vec3.distance(this.target.node.position,this.node.position)<r.default.BOSS_VLAD_DANGEROUS_DISTANCE},e.prototype.IsInLimitZone=function(){return this.limitZone.contains(cc.v2(this.node.position.x,this.node.position.y))},e.prototype.IsBoss=function(){return this.type==r.EnemyType.VALD},e.prototype.IsRanger=function(){return this.type==r.EnemyType.WEREWOLF},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY)},e.prototype.SetLimitZone=function(t){this.limitZone=t},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case r.VLAD_ANIM.TELEPORT_APPEAR:this.SetState(a.IDLE);break;case r.VLAD_ANIM.TELEPORT_DISAPPEAR:break;case r.VLAD_ANIM.ATTACK:case r.VLAD_ANIM.HURT:this.SetAnim(r.VLAD_ANIM.IDLE,!0);break;case r.VLAD_ANIM.DEAD:this.spine.node.active=!1,this.tomb.node.active=!0,this.tomb.setAnimation(0,r.VLAD_ANIM.TOMB,!1);break;case r.VLAD_ANIM.TOMB:this.node.active=!1,s.EventMgr.instance.emit(r.GameEvent.ENEMY,{type:r.EnemyEvent.DEAD})}},e.prototype.OnAnimationEvent=function(t){console.log(t.animation.name)},e.prototype.onCollisionEnter=function(t,e){switch(t.node.name){case"Hit":this.IsDead()||(t.node.active=!1,this.Hurt(this.GetHitDamage(t.node.parent.parent)));break;case"Burst":this.IsDead()||this.Hurt(this.GetHitDamage(t.node.parent.parent))}},e.prototype.Patrol=function(){},e.prototype.Chase=function(){},e.prototype.Jump=function(){},e.prototype.HasTarget=function(){return!0},e.prototype.IsReadyForAttack=function(){return!1},e.prototype.Thinking=function(){},e.prototype.GetLightBallStarPosition=function(){return this.node.position.add(this.hitPoint.position.multiply(cc.v3(Math.sign(this.spine.node.scaleX),1,0)))},e.prototype.GetAngleToAttackTarget=function(){var t=this.GetLightBallStarPosition(),e=this.target.GetCenterPoint().subtract(t);return Math.atan2(e.y,e.x)/Math.PI*180},e.prototype.UpdateUltiAttack=function(t){this.ultiAttackcountTime+=t;for(var e=this.bossStats.GetUltiInfo(),n=e[this.ultiAttackcountIndex],o=this.GetAngleToAttackTarget();n.time<this.ultiAttackcountTime;){switch(n.type){case"ATTACK":this.Attack(o+n.attackAngle,n.attackType);break;case"ANIMATION":this.SetAnim(n.animName,n.animLoop,n.animForce);break;case"END":this.SetState(a.IDLE)}if(this.ultiAttackcountIndex++,!(this.ultiAttackcountIndex<e.length))break;n=e[this.ultiAttackcountIndex]}},i([m({type:r.EnemyType})],e.prototype,"type",void 0),i([m({type:sp.Skeleton})],e.prototype,"spine",void 0),i([m({type:sp.Skeleton})],e.prototype,"tomb",void 0),i([m({type:cc.BoxCollider})],e.prototype,"body",void 0),i([m({type:p.default})],e.prototype,"stats",void 0),i([m({type:h.BossStats})],e.prototype,"bossStats",void 0),i([m({type:u.default})],e.prototype,"healthBar",void 0),i([m({type:cc.Node})],e.prototype,"hitPoint",void 0),i([m({type:cc.Prefab})],e.prototype,"lightball",void 0),e=i([y],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../Defines":"Defines","../HealthBar":"HealthBar","../core/EventMgr":"EventMgr","../core/Timer":"Timer","./BossStats":"BossStats","./LightBall":"LightBall","./Stats":"Stats"}],"fingerprint2.min":[function(t,e,n){"use strict";cc._RF.push(e,"93cf0pkPcpEvrZVLPwpIiy2","fingerprint2.min"),function(t,n,o){"undefined"!=typeof window&&"function"==typeof define&&define.amd?define(o):void 0!==e&&e.exports?e.exports=o():n.exports?n.exports=o():n.Fingerprint2=o()}(0,void 0,function(){var t=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},e=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},o=function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},i=function(t,e){return[t[0]^e[0],t[1]^e[1]]},a=function(t){return t=i(t,[0,t[0]>>>1]),t=e(t,[4283543511,3981806797]),t=i(t,[0,t[0]>>>1]),t=e(t,[3301882366,444984403]),i(t,[0,t[0]>>>1])},r=function(r,c){c=c||0;for(var s=(r=r||"").length%16,l=r.length-s,p=[0,c],u=[0,c],h=[0,0],d=[0,0],f=[2277735313,289559509],y=[1291169091,658871167],m=0;m<l;m+=16)h=[255&r.charCodeAt(m+4)|(255&r.charCodeAt(m+5))<<8|(255&r.charCodeAt(m+6))<<16|(255&r.charCodeAt(m+7))<<24,255&r.charCodeAt(m)|(255&r.charCodeAt(m+1))<<8|(255&r.charCodeAt(m+2))<<16|(255&r.charCodeAt(m+3))<<24],d=[255&r.charCodeAt(m+12)|(255&r.charCodeAt(m+13))<<8|(255&r.charCodeAt(m+14))<<16|(255&r.charCodeAt(m+15))<<24,255&r.charCodeAt(m+8)|(255&r.charCodeAt(m+9))<<8|(255&r.charCodeAt(m+10))<<16|(255&r.charCodeAt(m+11))<<24],h=e(h,f),h=n(h,31),h=e(h,y),p=i(p,h),p=n(p,27),p=t(p,u),p=t(e(p,[0,5]),[0,1390208809]),d=e(d,y),d=n(d,33),d=e(d,f),u=i(u,d),u=n(u,31),u=t(u,p),u=t(e(u,[0,5]),[0,944331445]);switch(h=[0,0],d=[0,0],s){case 15:d=i(d,o([0,r.charCodeAt(m+14)],48));case 14:d=i(d,o([0,r.charCodeAt(m+13)],40));case 13:d=i(d,o([0,r.charCodeAt(m+12)],32));case 12:d=i(d,o([0,r.charCodeAt(m+11)],24));case 11:d=i(d,o([0,r.charCodeAt(m+10)],16));case 10:d=i(d,o([0,r.charCodeAt(m+9)],8));case 9:d=i(d,[0,r.charCodeAt(m+8)]),d=e(d,y),d=n(d,33),d=e(d,f),u=i(u,d);case 8:h=i(h,o([0,r.charCodeAt(m+7)],56));case 7:h=i(h,o([0,r.charCodeAt(m+6)],48));case 6:h=i(h,o([0,r.charCodeAt(m+5)],40));case 5:h=i(h,o([0,r.charCodeAt(m+4)],32));case 4:h=i(h,o([0,r.charCodeAt(m+3)],24));case 3:h=i(h,o([0,r.charCodeAt(m+2)],16));case 2:h=i(h,o([0,r.charCodeAt(m+1)],8));case 1:h=i(h,[0,r.charCodeAt(m)]),h=e(h,f),h=n(h,31),h=e(h,y),p=i(p,h)}return p=i(p,[0,r.length]),u=i(u,[0,r.length]),p=t(p,u),u=t(u,p),p=a(p),u=a(u),p=t(p,u),u=t(u,p),("00000000"+(p[0]>>>0).toString(16)).slice(-8)+("00000000"+(p[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},c={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},s=function(t,e){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e);else if(t.length===+t.length)for(var n=0,o=t.length;n<o;n++)e(t[n],n,t);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},l=function(t,e){var n=[];return null==t?n:Array.prototype.map&&t.map===Array.prototype.map?t.map(e):(s(t,function(t,o,i){n.push(e(t,o,i))}),n)},p=function(t){var e=[window.screen.width,window.screen.height];return t.screen.detectScreenOrientation&&e.sort().reverse(),e},u=function(t){if(window.screen.availWidth&&window.screen.availHeight){var e=[window.screen.availHeight,window.screen.availWidth];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}return t.NOT_AVAILABLE},h=function(t){if(null==navigator.plugins)return t.NOT_AVAILABLE;for(var e=[],n=0,o=navigator.plugins.length;n<o;n++)navigator.plugins[n]&&e.push(navigator.plugins[n]);return f(t)&&(e=e.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})),l(e,function(t){var e=l(t,function(t){return[t.type,t.suffixes]});return[t.name,t.description,e]})},d=function(t){var e=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?e=l(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(e){try{return new window.ActiveXObject(e),e}catch(e){return t.ERROR}}):e.push(t.NOT_AVAILABLE),navigator.plugins&&(e=e.concat(h(t))),e},f=function(t){for(var e=!1,n=0,o=t.plugins.sortPluginsFor.length;n<o;n++){var i=t.plugins.sortPluginsFor[n];if(navigator.userAgent.match(i)){e=!0;break}}return e},y=function(t){try{return!!window.sessionStorage}catch(e){return t.ERROR}},m=function(t){try{return!!window.localStorage}catch(e){return t.ERROR}},g=function(t){try{return!!window.indexedDB}catch(e){return t.ERROR}},A=function(t){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:t.NOT_AVAILABLE},T=function(t){return navigator.cpuClass||t.NOT_AVAILABLE},v=function(t){return navigator.platform?navigator.platform:t.NOT_AVAILABLE},E=function(t){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:t.NOT_AVAILABLE},_=function(){var t,e=0;void 0!==navigator.maxTouchPoints?e=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return[e,t,"ontouchstart"in window]},I=function(t){var e=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var o=n.getContext("2d");return o.rect(0,0,10,10),o.rect(2,2,6,6),e.push("canvas winding:"+(!1===o.isPointInPath(5,5,"evenodd")?"yes":"no")),o.textBaseline="alphabetic",o.fillStyle="#f60",o.fillRect(125,1,62,20),o.fillStyle="#069",t.dontUseFakeFontInCanvas?o.font="11pt Arial":o.font="11pt no-real-font-123",o.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),o.fillStyle="rgba(102, 204, 0, 0.2)",o.font="18pt Arial",o.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),o.globalCompositeOperation="multiply",o.fillStyle="rgb(255,0,255)",o.beginPath(),o.arc(50,50,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(0,255,255)",o.beginPath(),o.arc(100,50,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(255,255,0)",o.beginPath(),o.arc(75,100,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(255,0,255)",o.arc(75,75,75,0,2*Math.PI,!0),o.arc(75,75,25,0,2*Math.PI,!0),o.fill("evenodd"),n.toDataURL&&e.push("canvas fp:"+n.toDataURL()),e},S=function(){var t,e=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"};if(!(t=P()))return null;var n=[],o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o);var i=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),o.itemSize=3,o.numItems=3;var a=t.createProgram(),r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(r);var c=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(c,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(c),t.attachShader(a,r),t.attachShader(a,c),t.linkProgram(a),t.useProgram(a),a.vertexPosAttrib=t.getAttribLocation(a,"attrVertex"),a.offsetUniform=t.getUniformLocation(a,"uniformOffset"),t.enableVertexAttribArray(a.vertexPosArray),t.vertexAttribPointer(a.vertexPosAttrib,o.itemSize,t.FLOAT,!1,0,0),t.uniform2f(a.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,o.numItems);try{n.push(t.canvas.toDataURL())}catch(e){}n.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),n.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),n.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),n.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),n.push("webgl max anisotropy:"+function(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var n=t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(t)),n.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+e(t.getParameter(t.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+t.getParameter(t.RED_BITS)),n.push("webgl renderer:"+t.getParameter(t.RENDERER)),n.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),n.push("webgl vendor:"+t.getParameter(t.VENDOR)),n.push("webgl version:"+t.getParameter(t.VERSION));try{var l=t.getExtension("WEBGL_debug_renderer_info");l&&(n.push("webgl unmasked vendor:"+t.getParameter(l.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+t.getParameter(l.UNMASKED_RENDERER_WEBGL)))}catch(e){}return t.getShaderPrecisionFormat&&s(["FLOAT","INT"],function(e){s(["VERTEX","FRAGMENT"],function(o){s(["HIGH","MEDIUM","LOW"],function(i){s(["precision","rangeMin","rangeMax"],function(a){var r=t.getShaderPrecisionFormat(t[o+"_SHADER"],t[i+"_"+e])[a];"precision"!==a&&(a="precision "+a);var c=["webgl ",o.toLowerCase()," shader ",i.toLowerCase()," ",e.toLowerCase()," ",a,":",r].join("");n.push(c)})})})}),n},C=function(){try{var t=P(),e=t.getExtension("WEBGL_debug_renderer_info");return t.getParameter(e.UNMASKED_VENDOR_WEBGL)+"~"+t.getParameter(e.UNMASKED_RENDERER_WEBGL)}catch(t){return null}},b=function(){var t=document.createElement("div");t.innerHTML="&nbsp;";var e=!(t.className="adsbox");try{document.body.appendChild(t),e=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(t)}catch(t){e=!1}return e},D=function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},O=function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.oscpu,o=navigator.platform.toLowerCase();if(t=0<=e.indexOf("windows phone")?"Windows Phone":0<=e.indexOf("win")?"Windows":0<=e.indexOf("android")?"Android":0<=e.indexOf("linux")||0<=e.indexOf("cros")?"Linux":0<=e.indexOf("iphone")||0<=e.indexOf("ipad")?"iOS":0<=e.indexOf("mac")?"Mac":"Other",("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&"Windows Phone"!==t&&"Android"!==t&&"iOS"!==t&&"Other"!==t)return!0;if(void 0!==n){if(0<=(n=n.toLowerCase()).indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t)return!0;if(0<=n.indexOf("linux")&&"Linux"!==t&&"Android"!==t)return!0;if(0<=n.indexOf("mac")&&"Mac"!==t&&"iOS"!==t)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===t))return!0}return 0<=o.indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t||(0<=o.indexOf("linux")||0<=o.indexOf("android")||0<=o.indexOf("pike"))&&"Linux"!==t&&"Android"!==t||(0<=o.indexOf("mac")||0<=o.indexOf("ipad")||0<=o.indexOf("ipod")||0<=o.indexOf("iphone"))&&"Mac"!==t&&"iOS"!==t||(o.indexOf("win")<0&&o.indexOf("linux")<0&&o.indexOf("mac")<0&&o.indexOf("iphone")<0&&o.indexOf("ipad")<0)!=("Other"===t)||void 0===navigator.plugins&&"Windows"!==t&&"Windows Phone"!==t},R=function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"==(t=0<=e.indexOf("firefox")?"Firefox":0<=e.indexOf("opera")||0<=e.indexOf("opr")?"Opera":0<=e.indexOf("chrome")?"Chrome":0<=e.indexOf("safari")?"Safari":0<=e.indexOf("trident")?"Internet Explorer":"Other")||"Safari"===t||"Opera"===t)&&"20030107"!==n)return!0;var o,i=eval.toString().length;if(37===i&&"Safari"!==t&&"Firefox"!==t&&"Other"!==t)return!0;if(39===i&&"Internet Explorer"!==t&&"Other"!==t)return!0;if(33===i&&"Chrome"!==t&&"Opera"!==t&&"Other"!==t)return!0;try{throw"a"}catch(t){try{t.toSource(),o=!0}catch(t){o=!1}}return o&&"Firefox"!==t&&"Other"!==t},M=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},L=function(){if(!M())return!1;var t=P();return!!window.WebGLRenderingContext&&!!t},N=function(t,e){var n="___fp_swf_loaded";window[n]=function(e){t(e)};var o,i=e.fonts.swfContainerId;(o=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(o);var a={onReady:n};window.swfobject.embedSWF(e.fonts.swfPath,i,"1","1","9.0.0",!1,a,{allowScriptAccess:"always",menu:"false"},{})},P=function(){var t=document.createElement("canvas"),e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){}return e||(e=null),e},k=[{key:"userAgent",getData:function(t){t(navigator.userAgent)}},{key:"webdriver",getData:function(t,e){t(null==navigator.webdriver?e.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(t,e){t(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||e.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(t,e){t(window.screen.colorDepth||e.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(t,e){t(navigator.deviceMemory||e.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(t,e){t(window.devicePixelRatio||e.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(t,e){t(A(e))}},{key:"screenResolution",getData:function(t,e){t(p(e))}},{key:"availableScreenResolution",getData:function(t,e){t(u(e))}},{key:"timezoneOffset",getData:function(t){t((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(t,e){window.Intl&&window.Intl.DateTimeFormat?t((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):t(e.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(t,e){t(y(e))}},{key:"localStorage",getData:function(t,e){t(m(e))}},{key:"indexedDb",getData:function(t,e){t(g(e))}},{key:"addBehavior",getData:function(t){t(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(t){t(!!window.openDatabase)}},{key:"cpuClass",getData:function(t,e){t(T(e))}},{key:"platform",getData:function(t,e){t(v(e))}},{key:"doNotTrack",getData:function(t,e){t(E(e))}},{key:"plugins",getData:function(t,e){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?e.plugins.excludeIE?t(e.EXCLUDED):t(d(e)):t(h(e))}},{key:"canvas",getData:function(t,e){M()?t(I(e)):t(e.NOT_AVAILABLE)}},{key:"webgl",getData:function(t,e){L()?t(S()):t(e.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(t){L()?t(C()):t()}},{key:"adBlock",getData:function(t){t(b())}},{key:"hasLiedLanguages",getData:function(t){t(D())}},{key:"hasLiedResolution",getData:function(t){t(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(t){t(O())}},{key:"hasLiedBrowser",getData:function(t){t(R())}},{key:"touchSupport",getData:function(t){t(_())}},{key:"fonts",getData:function(t,e){var n=["monospace","sans-serif","serif"],o=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];e.fonts.extendedJsFonts&&(o=o.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),o=(o=o.concat(e.fonts.userDefinedFonts)).filter(function(t,e){return o.indexOf(t)===e});var i=document.getElementsByTagName("body")[0],a=document.createElement("div"),r=document.createElement("div"),c={},s={},l=function(){var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="72px",t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML="mmmmmmmmmmlli",t},p=function(t){for(var e=!1,o=0;o<n.length;o++)if(e=t[o].offsetWidth!==c[n[o]]||t[o].offsetHeight!==s[n[o]])return e;return e},u=function(){for(var t=[],e=0,o=n.length;e<o;e++){var i=l();i.style.fontFamily=n[e],a.appendChild(i),t.push(i)}return t}();i.appendChild(a);for(var h=0,d=n.length;h<d;h++)c[n[h]]=u[h].offsetWidth,s[n[h]]=u[h].offsetHeight;var f=function(){for(var t,e,i,a={},c=0,s=o.length;c<s;c++){for(var p=[],u=0,h=n.length;u<h;u++){var d=(t=o[c],e=n[u],i=void 0,(i=l()).style.fontFamily="'"+t+"',"+e,i);r.appendChild(d),p.push(d)}a[o[c]]=p}return a}();i.appendChild(r);for(var y=[],m=0,g=o.length;m<g;m++)p(f[o[m]])&&y.push(o[m]);i.removeChild(r),i.removeChild(a),t(y)},pauseBefore:!0},{key:"fontsFlash",getData:function(t,e){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?e.fonts.swfPath?void N(function(e){t(e)},e):t("missing options.fonts.swfPath"):t("flash not installed"):t("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(t,e){var n=e.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return t(e.EXCLUDED);var o=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==o)return t(e.NOT_AVAILABLE);var i=new o(1,44100,44100),a=i.createOscillator();a.type="triangle",a.frequency.setValueAtTime(1e4,i.currentTime);var r=i.createDynamicsCompressor();s([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(t){void 0!==r[t[0]]&&"function"==typeof r[t[0]].setValueAtTime&&r[t[0]].setValueAtTime(t[1],i.currentTime)}),a.connect(r),r.connect(i.destination),a.start(0),i.startRendering();var c=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),i.oncomplete=function(){},i=null,t("audioTimeout")},n.timeout);i.oncomplete=function(e){var n;try{clearTimeout(c),n=e.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(t,e){return t+Math.abs(e)},0).toString(),a.disconnect(),r.disconnect()}catch(e){return void t(e)}t(n)}}},{key:"enumerateDevices",getData:function(t,e){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return t(e.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(e){t(e.map(function(t){return"id="+t.deviceId+";gid="+t.groupId+";"+t.kind+";"+t.label}))}).catch(function(e){t(e)})}}],w=function(t){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return w.get=function(t,e){e?t||(t={}):(e=t,t={}),function(t,e){var n,o;if(null!=e)for(o in e)null==(n=e[o])||Object.prototype.hasOwnProperty.call(t,o)||(t[o]=n)}(t,c),t.components=t.extraComponents.concat(k);var n={data:[],addPreprocessedComponent:function(e,o){"function"==typeof t.preprocessor&&(o=t.preprocessor(e,o)),n.data.push({key:e,value:o})}},o=-1;(function i(a){if((o+=1)>=t.components.length)e(n.data);else{var r=t.components[o];if(t.excludes[r.key])i(!1);else{if(!a&&r.pauseBefore)return o-=1,void setTimeout(function(){i(!0)},1);try{r.getData(function(t){n.addPreprocessedComponent(r.key,t),i(!1)},t)}catch(a){n.addPreprocessedComponent(r.key,String(a)),i(!1)}}}})(!1)},w.getPromise=function(t){return new Promise(function(e,n){w.get(t,e)})},w.getV18=function(t,e){return null==e&&(e=t,t={}),w.get(t,function(n){for(var o=[],i=0;i<n.length;i++){var a=n[i];if(a.value===(t.NOT_AVAILABLE||"not available"))o.push({key:a.key,value:"unknown"});else if("plugins"===a.key)o.push({key:"plugins",value:l(a.value,function(t){var e=l(t[2],function(t){return t.join?t.join("~"):t}).join(",");return[t[0],t[1],e].join("::")})});else if(-1!==["canvas","webgl"].indexOf(a.key))o.push({key:a.key,value:a.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(a.key)){if(!a.value)continue;o.push({key:a.key,value:1})}else a.value?o.push(a.value.join?{key:a.key,value:a.value.join(";")}:a):o.push({key:a.key,value:a.value})}var c=r(l(o,function(t){return t.value}).join("~~~"),31);e(c,o)})},w.x64hash128=r,w.VERSION="2.1.0",w}),cc._RF.pop()},{}]},{},["Character","Damage","Defines","EnemyMgr","GameMgr","HealthBar","HomeMgr","Init","ItemMgr","MapMgr","Test","TextDefine","EventMgr","Input","Timer","BossStats","Enemy","LightBall","Stats","StatsVampire1","StatsVampire2","Vald","CoffeeBeanItem","CrossItem","Item","Utils","fingerprint2.min","DialogDebug","DialogDisconnect","DialogGift","DialogLeaderboard","DialogLevelSelection","DialogLose","DialogRegister","DialogScore","DialogTerm","DialogTutorial","IntroScreen","Leaderboard","LeaderboardItem","LoadingOverlay","PlayerProfile"]);