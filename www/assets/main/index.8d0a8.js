window.__require=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){return o(e[a][1][t]||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({Character:[function(t,e,n){"use strict";cc._RF.push(e,"90befBZeppB7IcsZrTyShRY","Character");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a,s=t("./core/Input"),c=t("./Defines"),l=t("./core/Timer"),h=t("./core/EventMgr"),u=t("./EnemyMgr"),p=t("./enemies/Stats"),d=t("./HealthBar"),f=cc._decorator,m=f.ccclass,y=f.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.CHASE=2]="CHASE",t[t.MOVE=3]="MOVE",t[t.WAITING=4]="WAITING",t[t.ATTACK=5]="ATTACK",t[t.DEAD=6]="DEAD"})(r||(r={})),function(t){t.IDLE="idle",t.WALK="movement",t.ATTACK_1="attack_01",t.ATTACK_2="attack_02",t.ATTACK_3="attack_03",t.ATTACK_COMBO="attack_combo",t.ATTACK_CROSSBOW="attack_crossbow",t.DEAD="fall_of_ground_dead",t.HURT="get_hit"}(a||(a={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.colliders=[],e.body=null,e.stats=null,e.healthBar=null,e.arrow=null,e.timerWaiting=new l.default,e.timerCombo=new l.default,e.timerHit=new l.default,e.combo=-1,e.hitColliderOffset=0,e}return i(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.timerCombo.SetDuration(1),this.timerHit.SetDuration(.05),this.hitColliderOffset=this.colliders[c.CharaceterCollider.HIT].offset.x,this.Init()},e.prototype.update=function(t){switch(this.state){case r.INIT:case r.IDLE:break;case r.MOVE:this.UpdateMove(t);break;case r.CHASE:this.UpdateMoveToTarget(t);break;case r.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(r.IDLE);case r.ATTACK:}this.timerCombo.Update(t),this.timerCombo.JustFinished()&&(this.combo=-1),this.timerHit.Update(t),this.timerHit.IsDone()&&(this.colliders[c.CharaceterCollider.HIT].node.active=!1)},e.prototype.SetState=function(t){switch(this.state=t,this.state){case r.INIT:this.combo=-1,this.healthBar.SetHealthMax(this.stats.hp),this.node.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.SetState(r.IDLE);break;case r.IDLE:this.velocity=cc.v3(0,0,0),this.arrow.active=!1,this.SetAnim(a.IDLE,!0);break;case r.MOVE:this.arrow.active=!0,this.enemyAttack=null,this.SetAnim(a.WALK,!0);break;case r.CHASE:this.SetAnim(a.WALK,!0);break;case r.ATTACK:var e=[a.ATTACK_1,a.ATTACK_2,a.ATTACK_3];this.combo++,this.combo==e.length&&(this.combo=0),this.timerCombo.Reset(),this.SetAnim(e[this.combo],!1)}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Idle=function(){this.SetState(r.IDLE)},e.prototype.Move=function(){this.state==r.IDLE&&this.SetState(r.MOVE)},e.prototype.Chase=function(t){if(this.state==r.MOVE)this.SetState(r.IDLE);else if(this.state==r.IDLE){u.GetEnemy(t).IsDisappear()?this.Attack(null):(this.enemyTarget=t,this.SetState(r.CHASE))}},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(r.WAITING)},e.prototype.Attack=function(t){this.state==r.IDLE?(this.enemyAttack=t,this.FadeToEnemy(t),this.SetState(r.ATTACK)):this.state==r.MOVE&&this.SetState(r.IDLE)},e.prototype.Hurt=function(t){this.stats.hp-=t,this.stats.hp<=0?(this.stats.hp=0,this.SetState(r.DEAD)):(this.SetAnim(a.HURT,!1),this.Waiting(this.stats.hurtDelay,r.IDLE)),this.healthBar.SetHealth(this.stats.hp),h.EventMgr.instance.emit(c.GameEvent.CHARACTER,{type:c.CharacterEvent.HURT,damage:t,position:cc.v3(this.node.position.x+c.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+c.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)})},e.prototype.ContinueAttack=function(){var t=u.GetEnemy(this.enemyAttack);this.enemyAttack.active&&!t.IsDead()&&this.Attack(this.enemyAttack)},e.prototype.CanAttack=function(t){var e=cc.v3();return cc.Vec3.subtract(e,t.position,this.node.position),e.len()<=c.default.CHARACTER_ATTACK_DISTANCE+c.default.CHARACTER_MOVE_SPEED&&Math.abs(e.y)<=10},e.prototype.IsAttacking=function(){return null!=this.enemyAttack},e.prototype.GetAttackSpot=function(t){return this.node.position.x<t.position.x?cc.v3(t.position.x-c.default.CHARACTER_ATTACK_DISTANCE,t.position.y,0):cc.v3(t.position.x+c.default.CHARACTER_ATTACK_DISTANCE,t.position.y,0)},e.prototype.GetCenterPoint=function(){var t=cc.v3(this.node.position);return cc.v3(t.add(cc.v3(0,this.body.size.height/2,0)))},e.prototype.GetHitDamage=function(t){var e=t.getComponent(p.default);return c.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToEnemy=function(t){if(null!=t){var e=this.node.position.x<t.position.x?1:-1;this.SetDir(e)}},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY),this.colliders[c.CharaceterCollider.HIT].offset.x=t*this.hitColliderOffset},e.prototype.SetLimitZone=function(t){this.limitZone=t,this.limitZone.y=this.limitZone.y-t.height/2,this.limitZone.yMax=this.limitZone.y+this.limitZone.height,this.limitZone.x+=c.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.xMax-=2*c.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.yMax-=c.default.CHARACTER_ATTACK_DISTANCE,t.x>t.width&&this.node.setPosition(t.x+c.default.CHARACTER_ATTACK_DISTANCE/2,cc.winSize.height/2)},e.prototype.UpdateMove=function(t){var e=s.default.instance.delta,n=Math.atan2(e.y,e.x),i=Math.min(e.len(),200),o=cc.v3(Math.cos(n)*i,Math.sin(n)*i,0),r=e.x>0?1:-1;this.arrow.setPosition(o),this.arrow.angle=180*n/Math.PI,this.velocity=cc.v3(e.x,e.y,0).normalize(),this.SetDir(r);var a=cc.v3(this.node.position);a=a.add(cc.v3(this.velocity).multiplyScalar(c.default.GAME_SPEED_BASE*c.default.CHARACTER_MOVE_SPEED*t));var l=cc.misc.clampf(a.x,this.limitZone.x,this.limitZone.xMax),h=cc.misc.clampf(a.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(l,h,0))},e.prototype.UpdateMoveToTarget=function(t){var e=cc.v3(),n=this.GetAttackSpot(this.enemyTarget);cc.Vec3.subtract(e,n,this.node.position),this.velocity=cc.v3(e.x,e.y,0).normalize();var i=cc.Vec3.distance(this.node.position,n),o=this.velocity.x>0?1:-1,a=c.default.GAME_SPEED_BASE*c.default.CHARACTER_MOVE_SPEED*t;if(i>a){var s=cc.v3(this.node.position);s=s.add(cc.v3(this.velocity).multiplyScalar(a));var l=cc.misc.clampf(s.x,this.limitZone.x,this.limitZone.xMax),h=cc.misc.clampf(s.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(l,h,0)),this.SetDir(o)}else o=this.node.position.x<this.enemyTarget.position.x?1:-1,this.SetDir(o),this.node.setPosition(n),this.SetState(r.IDLE)},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case a.ATTACK_1:case a.ATTACK_2:case a.ATTACK_3:this.timerHit.Reset();break;case a.HURT:this.SetAnim(a.IDLE,!1)}},e.prototype.OnAnimationEvent=function(t){t.animation.name!=a.ATTACK_1&&t.animation.name!=a.ATTACK_2&&t.animation.name!=a.ATTACK_3||(this.colliders[c.CharaceterCollider.HIT].node.active=!0,this.Waiting(this.stats.attackDelay,r.IDLE))},e.prototype.onCollisionEnter=function(t,e){switch(t.node.name){case"Hit":this.Hurt(this.GetHitDamage(t.node.parent.parent));break;case"LightBall":this.Hurt(10);break;case"SwitchZone":t.node.active=!1,h.EventMgr.instance.emit(c.GameEvent.MAP,{type:c.MapEvent.SWITCH_ZONE});break;case"ExpandZone":t.node.active=!1,h.EventMgr.instance.emit(c.GameEvent.MAP,{type:c.MapEvent.EXPAND_ZONE})}},o([y({type:sp.Skeleton})],e.prototype,"spine",void 0),o([y({type:[cc.CircleCollider]})],e.prototype,"colliders",void 0),o([y({type:cc.BoxCollider})],e.prototype,"body",void 0),o([y({type:p.default})],e.prototype,"stats",void 0),o([y({type:d.default})],e.prototype,"healthBar",void 0),o([y({type:cc.Node})],e.prototype,"arrow",void 0),e=o([m],e)}(cc.Component);n.default=g,cc._RF.pop()},{"./Defines":"Defines","./EnemyMgr":"EnemyMgr","./HealthBar":"HealthBar","./core/EventMgr":"EventMgr","./core/Input":"Input","./core/Timer":"Timer","./enemies/Stats":"Stats"}],CinematicMgr:[function(t,e,n){"use strict";cc._RF.push(e,"def34XTLWdLw4ywToYVvRHr","CinematicMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.CinematicMgr=void 0;var r,a=t("./CinematicScript"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.FINISH=2]="FINISH"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mCinematicScript=null,e.mObjectContainer=null,e.mSpeechBubble=null,e.mSpeechLabel=null,e.mSpeechBgContainer=null,e.mFaceContainer=null,e.mSpeechIconContainer=null,e.TAKL_SPEED=30,e.mState=null,e.mScript=null,e.mActionIndex=0,e.mAction=null,e.mPercent=0,e.mCountText=0,e.mIsMouseDown=!1,e}return i(e,t),e.prototype.onLoad=function(){console.log("onLoad"),this.node.on(cc.Node.EventType.TOUCH_START,this.OnTouchStart,this),this.getComponent(cc.BlockInputEvents).enabled=!1},e.prototype.start=function(){this.StartScript(this.mCinematicScript.SCRIPT_01_01)},e.prototype.SetState=function(t){switch(this.mState){case r.PLAYING:this.getComponent(cc.BlockInputEvents).enabled=!1}switch(this.mState=t,this.mState){case r.INIT:this.mActionIndex=-1;break;case r.PLAYING:if(this.getComponent(cc.BlockInputEvents).enabled=!0,this.mActionIndex++,this.mActionIndex<this.mScript.length){switch(this.mAction=this.mScript[this.mActionIndex],this.mAction.type){case a.ActionType.MakeObject:(o=cc.instantiate(this.mAction.prefab)).parent=this.mObjectContainer,o.name=this.mAction.objectName;break;case a.ActionType.ClearAllObject:this.mObjectContainer.removeAllChildren();break;case a.ActionType.ClearObjectByName:(o=this.mObjectContainer.getChildByName(this.mAction.objectName))?this.mObjectContainer.removeChild(o):console.log("CINEMATIC: can't find object to clear");break;case a.ActionType.SetAttribute:(o=this.mObjectContainer.getChildByName(this.mAction.objectName))?(null!=this.mAction.position&&(o.x=this.mAction.position.x,o.y=this.mAction.position.y),null!=this.mAction.scale&&(o.scaleX=this.mAction.scale.x,o.scaleY=this.mAction.scale.y),null!=this.mAction.angle&&(o.angle=this.mAction.angle),null!=this.mAction.opacity&&(o.opacity=this.mAction.opacity)):console.log("CINEMATIC: can't find object to set position");break;case a.ActionType.SetTween:if(o=this.mObjectContainer.getChildByName(this.mAction.objectName)){var e={};null!=this.mAction.position&&(e.position=this.mAction.position),null!=this.mAction.scale&&(e.scaleX=this.mAction.scale.x,e.scaleY=this.mAction.scale.y),null!=this.mAction.angle&&(e.angle=this.mAction.angle),null!=this.mAction.opacity&&(e.opacity=this.mAction.opacity),cc.tween(o).to(this.mAction.duration,e).start()}else console.log("CINEMATIC: can't find object to move");break;case a.ActionType.SetSpineAnimation:(o=this.mObjectContainer.getChildByName(this.mAction.objectName))?o.getComponent(sp.Skeleton).setAnimation(0,this.mAction.animationName,this.mAction.isLoop):console.log("CINEMATIC: can't find object to set spine animation");break;case a.ActionType.Delay:this.mPercent=0;break;case a.ActionType.Talking:this.mCountText=0,this.mSpeechLabel.string="",this.mIsMouseDown=!1,this.mFaceContainer.removeAllChildren(),(n=cc.instantiate(this.mAction.facePrefab)).parent=this.mFaceContainer,null!=this.mAction.facePosition&&(n.x=this.mAction.facePosition.x,n.y=this.mAction.facePosition.y),null!=this.mAction.faceScale&&(n.scaleX=this.mAction.faceScale.x,n.scaleY=this.mAction.faceScale.y),null!=this.mAction.faceAngle&&(n.angle=this.mAction.faceAngle),this.mSpeechIconContainer.removeAllChildren(),(i=cc.instantiate(this.mAction.speechIconPrefab)).parent=this.mSpeechIconContainer,null!=this.mAction.speechIconPosition&&(i.x=this.mAction.speechIconPosition.x,i.y=this.mAction.speechIconPosition.y),null!=this.mAction.speechIconScale&&(i.scaleX=this.mAction.speechIconScale.x,i.scaleY=this.mAction.speechIconScale.y),null!=this.mAction.speechIconAngle&&(i.angle=this.mAction.speechIconAngle),this.mSpeechBgContainer.removeAllChildren(),cc.instantiate(this.mAction.speechBgPrefab).parent=this.mSpeechBgContainer;break;case a.ActionType.Talking_02:var n,i,o;this.mCountText=0,this.mSpeechLabel.string="",this.mIsMouseDown=!1,this.mFaceContainer.removeAllChildren(),(n=cc.instantiate(this.mAction.facePrefab)).parent=this.mFaceContainer,this.mSpeechIconContainer.removeAllChildren(),(i=cc.instantiate(this.mAction.speechIconPrefab)).parent=this.mSpeechIconContainer,this.mSpeechBgContainer.removeAllChildren(),cc.instantiate(this.mAction.speechBgPrefab).parent=this.mSpeechBgContainer,(o=this.mObjectContainer.getChildByName(this.mAction.objectName))?(i.x=o.x+100,i.y=o.y+200):console.log("CINEMATIC: can't find object to set spine animation")}switch(this.mAction.type){case a.ActionType.Talking:case a.ActionType.Talking_02:this.mSpeechBubble.active=!0;break;default:this.mSpeechBubble.active=!1}switch(this.mAction.type){case a.ActionType.Delay:case a.ActionType.Talking:case a.ActionType.Talking_02:break;default:this.SetState(r.PLAYING)}}else this.SetState(r.FINISH);break;case r.FINISH:}},e.prototype.update=function(t){switch(this.mState){case r.INIT:this.SetState(r.PLAYING);break;case r.PLAYING:switch(this.mAction.type){case a.ActionType.Delay:this.mPercent=Math.min(this.mPercent+t/this.mAction.duration,1),this.mPercent>=1&&this.SetState(r.PLAYING);break;case a.ActionType.Talking:case a.ActionType.Talking_02:this.mCountText=Math.min(this.mCountText+t*this.TAKL_SPEED,this.mAction.speechText.length),this.mSpeechLabel.string=this.mAction.speechText.slice(0,Math.floor(this.mCountText)),this.mIsMouseDown&&(this.mIsMouseDown=!1,this.mCountText<this.mAction.speechText.length?this.mCountText=this.mAction.speechText.length:this.SetState(r.PLAYING))}break;case r.FINISH:}},e.prototype.OnTouchStart=function(t){switch(this.mState){case r.PLAYING:switch(this.mAction.type){case a.ActionType.Talking:case a.ActionType.Talking_02:this.mIsMouseDown=!0}}},e.prototype.StartScript=function(t){this.mScript=t,this.SetState(r.INIT)},e.prototype.IsFinish=function(){return this.mState==r.FINISH},o([l(a.CinematicScript)],e.prototype,"mCinematicScript",void 0),o([l(cc.Node)],e.prototype,"mObjectContainer",void 0),o([l(cc.Node)],e.prototype,"mSpeechBubble",void 0),o([l(cc.Label)],e.prototype,"mSpeechLabel",void 0),o([l(cc.Node)],e.prototype,"mSpeechBgContainer",void 0),o([l(cc.Node)],e.prototype,"mFaceContainer",void 0),o([l(cc.Node)],e.prototype,"mSpeechIconContainer",void 0),e=o([c],e)}(cc.Component);n.CinematicMgr=h,cc._RF.pop()},{"./CinematicScript":"CinematicScript"}],CinematicScript:[function(t,e,n){"use strict";cc._RF.push(e,"af3830a4otGW75Q0Kc5ioRM","CinematicScript");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.CinematicScript=n.ActionType=void 0;var r,a=t("./CinematicText"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.MakeObject=0]="MakeObject",t[t.ClearAllObject=1]="ClearAllObject",t[t.ClearObjectByName=2]="ClearObjectByName",t[t.SetAttribute=3]="SetAttribute",t[t.SetTween=4]="SetTween",t[t.SetSpineAnimation=5]="SetSpineAnimation",t[t.Delay=6]="Delay",t[t.Talking=7]="Talking",t[t.Talking_02=8]="Talking_02"})(r=n.ActionType||(n.ActionType={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mCinematicText=null,e.mArrPrefab=[],e.mTextScript0101=null,e}return i(e,t),e.prototype.onLoad=function(){console.log(this.mTextScript0101.text),console.log(this.mArrPrefab),this.SCRIPT_01_01=this._AnalysisTextScript(this.mTextScript0101)},e.prototype.start=function(){},e.prototype._MakeObject=function(t,e){return{type:r.MakeObject,objectName:t,prefab:e}},e.prototype._ClearAllObject=function(){return{type:r.ClearAllObject}},e.prototype._ClearObjectByName=function(t){return{type:r.ClearObjectByName,objectName:t}},e.prototype._SetAttribute=function(t,e,n,i,o){return{type:r.SetAttribute,objectName:t,position:e,scale:n,angle:i,opacity:o}},e.prototype._SetTween=function(t,e,n,i,o,a){return{type:r.SetTween,objectName:t,position:e,scale:n,angle:i,opacity:o,duration:a}},e.prototype._SetSpineAnimation=function(t,e,n){return{type:r.SetSpineAnimation,objectName:t,animationName:e,isLoop:n}},e.prototype._Delay=function(t){return{type:r.Delay,duration:t}},e.prototype._Talking=function(t,e,n,i,o,a,s,c,l,h){return{type:r.Talking,speechText:t,facePrefab:e,facePosition:n,faceScale:i,faceAngle:o,speechIconPrefab:a,speechIconPosition:s,speechIconScale:c,speechIconAngle:l,speechBgPrefab:h}},e.prototype._Talking_02=function(t,e,n,i,o){return{type:r.Talking_02,objectName:t,speechText:e,facePrefab:n,speechIconPrefab:i,speechBgPrefab:o}},e.prototype._AnalysisTextScript=function(t){console.time("_AnalysisTextScript");var e=[],n=t.text.split("\n").map(function(t){return t.trim().replace(/\s{1,}/g," ")}).filter(function(t){return!(""==t)}).map(function(t){return t.trim().split(" ")});console.log(n);for(var i=0;i<n.length;i++){var o=n[i];if(o.length>0)switch(o[0]){case"DELAY":e.push(this._Delay(parseFloat(o[1])));break;case"CREATE":e.push(this._MakeObject(o[1],this._GetPrefab(o[2])));break;case"DESTROY_ALL":e.push(this._ClearAllObject());break;case"DESTROY":e.push(this._ClearObjectByName(o[1]));break;case"POSITION":e.push(this._SetAttribute(o[1],new cc.Vec2(parseFloat(o[2]),parseFloat(o[3])),null,null,null));break;case"MOVE":e.push(this._SetTween(o[1],new cc.Vec2(parseFloat(o[2]),parseFloat(o[3])),null,null,null,parseFloat(o[4])));break;case"SPINE_ANIMATION":e.push(this._SetSpineAnimation(o[1],o[2],"true"==o[3]));break;case"TALKING":e.push(this._Talking_02(o[1],this.mCinematicText.GetText(o[3]),this._GetPrefab(o[2]),this._GetPrefab("IconTalking"),this._GetPrefab("BgTalking")));break;case"THINKING":e.push(this._Talking_02(o[1],this.mCinematicText.GetText(o[3]),this._GetPrefab(o[2]),this._GetPrefab("IconThinking"),this._GetPrefab("BgThinking")));break;case"SCALE":e.push(this._SetAttribute(o[1],null,new cc.Vec2(parseFloat(o[2]),parseFloat(o[3])),null,null));break;case"FADE_IN":e.push(this._MakeObject("FadeScreen",this._GetPrefab("FadeScreen"))),e.push(this._SetAttribute("FadeScreen",null,null,null,255)),e.push(this._SetTween("FadeScreen",null,null,null,0,parseFloat(o[1]))),e.push(this._Delay(parseFloat(o[1]))),e.push(this._ClearObjectByName("FadeScreen"));break;case"FADE_OUT":e.push(this._MakeObject("FadeScreen",this._GetPrefab("FadeScreen"))),e.push(this._SetAttribute("FadeScreen",null,null,null,0)),e.push(this._SetTween("FadeScreen",null,null,null,255,parseFloat(o[1]))),e.push(this._Delay(parseFloat(o[1]))),e.push(this._ClearObjectByName("FadeScreen"))}}return console.log(e),console.timeEnd("_AnalysisTextScript"),e},e.prototype._GetPrefab=function(t){for(var e=0;e<this.mArrPrefab.length;e++)if(this.mArrPrefab[e].name==t)return this.mArrPrefab[e];return null},o([l(a.CinematicText)],e.prototype,"mCinematicText",void 0),o([l({type:[cc.Prefab]})],e.prototype,"mArrPrefab",void 0),o([l(cc.TextAsset)],e.prototype,"mTextScript0101",void 0),e=o([c],e)}(cc.Component);n.CinematicScript=h,cc._RF.pop()},{"./CinematicText":"CinematicText"}],CinematicText:[function(t,e,n){"use strict";cc._RF.push(e,"263f5APzU5JYrnG+pzJFBAe","CinematicText");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.CinematicText=void 0;var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TEXT_DEFINE={text_01_01_01:"Thanks for the ride home, guys! Claude, Tanya, great training today. These new stake moves are coming along nicely! And Derek...you've REALLY got to stop obsessing about this intercourse support group you want to enroll us in...",text_01_01_02:"Dark greetings. Who is this delicious looking thing we have here? You look vaguely familiar...Wait! I remember you. You're Nandor's familiar, no?",text_01_01_03:'People have really got to stop with these "familiar" puns...',text_01_01_04:"Ahem...Yes, Nandor's my master. Can I help you with anything?",text_01_01_05:"Not me. But I guess your Master could use some help indeed during his last few hours on this Earth. His fate was sealed by the Vampiric Council some time ago. The same goes for his two perverted, deranged accomplices of course. "},e}return i(e,t),e.prototype.GetText=function(t){return this.TEXT_DEFINE[t]?this.TEXT_DEFINE[t]:"wrong text's name"},e=o([a],e)}(cc.Component));n.CinematicText=s,cc._RF.pop()},{}],Damage:[function(t,e,n){"use strict";cc._RF.push(e,"4716bZwFRNKh4tv3iO+GcXB","Damage");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damage=null,e}return i(e,t),e.prototype.Spawn=function(t,e){var n=this;this.damage.string=""+t,this.node.active=!0,this.node.scale=1.5,this.node.setPosition(e),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).to(1,{position:cc.v3(this.node.position.x,this.node.position.y+200,0)}).call(function(){return n.node.active=!1}).start()},o([s(cc.Label)],e.prototype,"damage",void 0),e=o([a],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],Defines:[function(t,e,n){"use strict";cc._RF.push(e,"17fd1X2q2lIQansLTouiZ+J","Defines"),Object.defineProperty(n,"__esModule",{value:!0}),n.AttackSpot=n.EnemyCollider=n.CharaceterCollider=n.CharacterEvent=n.EnemyEvent=n.MapEvent=n.GameEvent=n.RandomInt=n.Clamp=void 0,n.default=new(function(){return function(){this.GAME_SPEED_BASE=60,this.CHARACTER_MOVE_SPEED=7,this.CHARACTER_ATTACK_OFFSET=20,this.CHARACTER_MOVE_DISTANCE=20,this.CHARACTER_ATTACK_DISTANCE=120,this.CHARACTER_CHASE_DISTANCE=350,this.ENEMY_HP=100,this.ENEMY_MOVE_SPEED=4,this.ENEMY_MIN_DAMAGE=10,this.ENEMY_MAX_DAMAGE=25,this.ENEMY_ATTACK_DELAY=.5,this.ENEMY_PATROL_DELAY=1,this.ENEMY_HURT_DELAY=.5,this.ENEMY_ATTACK_DISTANCE=120,this.ENEMY_SAFE_DISTANCE=200,this.ENEMY_CHASE_DISTANCE=500,this.BOSS_VLAD_DANGEROUS_DISTANCE=300,this.REST_API_SERVER="https://oms.gameloft.com",this.GAME_NAME="WHAT_WE_DO_IN_THE_SHADOWS",this.PHASE="dev",this.PRIVACY_POLICY_URL="https://www.gameloft.com/en/privacy-notice",this.DISCLAIMER_URL="https://www.gameloft.com/en/conditions-of-use",this.LEADERBOARD_TOP_COUNT=50}}()),n.Clamp=function(t,e,n){return Math.min(Math.max(t,e),n)},n.RandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},function(t){t.MAP="map_event",t.ENEMY="enemy_event",t.CHARACTER="character_event"}(n.GameEvent||(n.GameEvent={})),function(t){t.SWITCH_ZONE="switch_zone",t.EXPAND_ZONE="expand_zone"}(n.MapEvent||(n.MapEvent={})),function(t){t.DEAD="enemy_dead",t.HURT="enemy_hurt"}(n.EnemyEvent||(n.EnemyEvent={})),function(t){t.HURT="character_hurt"}(n.CharacterEvent||(n.CharacterEvent={})),function(t){t[t.HIT=0]="HIT"}(n.CharaceterCollider||(n.CharaceterCollider={})),function(t){t[t.HIT=0]="HIT"}(n.EnemyCollider||(n.EnemyCollider={})),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.PATROL=2]="PATROL"}(n.AttackSpot||(n.AttackSpot={})),cc._RF.pop()},{}],EnemyMgr:[function(t,e,n){"use strict";cc._RF.push(e,"df53fpoMhZFq4fLKZOH+0gT","EnemyMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.GetEnemy=void 0;var r=t("./Defines"),a=t("./enemies/Enemy"),s=t("./enemies/Vald"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemies=[],e.attacker=[null,null],e.character=null,e.boss=null,e}return i(e,t),e.prototype.SetTarget=function(t){this.character=t},e.prototype.SetEnemies=function(t){var e=this;this.enemies=t,this.enemies.forEach(function(t){var n=u(t);n.IsBoss()&&(n.target=e.character),n.limitZone=e.character.limitZone,n.Init()})},e.prototype.SetLimitZone=function(t){var e=this;this.limitZone=t,this.enemies.forEach(function(t){u(t).limitZone=e.limitZone})},e.prototype.UpdateChase=function(){var t=this;this.attacker=this.attacker.map(function(t){if(null!=t){var e=u(t);return e.IsDead()||e.IsIdle()?null:t}return null});var e=this.GetEnemiesActive(),n=this.GetEnemiesInRange(this.character.node.position,r.default.ENEMY_CHASE_DISTANCE,this.enemies.concat(e)),i=e.concat(n);(i=i.filter(function(t,e){return i.indexOf(t)==e}).filter(function(t){var e=u(t);return e.IsIdle()&&e.IsInLimitZone()})).forEach(function(e){var n=u(e);if(cc.Vec3.distance(e.position,t.character.node.position)>r.default.ENEMY_SAFE_DISTANCE)n.Patrol(t.character,r.AttackSpot.PATROL,!1);else if(t.IsAttackSpotAvailable()){var i=t.GetNearestAttackSpot(e);t.attacker[i]=e,n.Chase(t.character,i)}else n.Patrol(t.character,r.AttackSpot.PATROL,!0)})},e.prototype.UpdateAttack=function(){var t=this;this.enemies.filter(function(t){return u(t).IsReadyForAttack()}).forEach(function(e){var n=u(e);t.IsEnemyCanAttack(e)?n.Attack():n.Idle()})},e.prototype.GetEnemiesInRange=function(t,e,n){return void 0===n&&(n=null),null==n&&(n=this.enemies),n.filter(function(t){return!u(t).IsDead()}).map(function(e){return{enemyNode:e,distance:cc.Vec3.distance(e.position,t)}}).filter(function(t){return t.distance<=e}).sort(function(t,e){return t.distance-e.distance}).map(function(t){return t.enemyNode})},e.prototype.GetEnemiesActive=function(){return this.enemies.filter(function(t){var e=u(t);return!e.IsDead()&&e.HasTarget()})},e.prototype.GetNearestAttackSpot=function(t){if(t.position.x<this.character.node.position.x){if(null==this.attacker[r.AttackSpot.LEFT])return r.AttackSpot.LEFT;if(null==this.attacker[r.AttackSpot.RIGHT])return r.AttackSpot.RIGHT}else{if(null==this.attacker[r.AttackSpot.RIGHT])return r.AttackSpot.RIGHT;if(null==this.attacker[r.AttackSpot.LEFT])return r.AttackSpot.LEFT}return r.AttackSpot.PATROL},e.prototype.IsAttackSpotAvailable=function(){return this.attacker.some(function(t){return null==t})},e.prototype.IsEnemyCanAttack=function(t){var e=cc.v3();return cc.Vec3.subtract(e,t.position,this.character.node.position),e.len()<=r.default.ENEMY_ATTACK_DISTANCE+r.default.ENEMY_MOVE_SPEED&&Math.abs(e.y)<=10},e.prototype.IsClear=function(){var t=this;return!this.enemies.some(function(e){return t.limitZone.contains(cc.v2(e.position.x,e.position.y))})},e=o([l],e)}(cc.Component));function u(t){return null!=t.getComponent(a.default)?t.getComponent(a.default):t.getComponent(s.default)?t.getComponent(s.default):null}n.default=h,n.GetEnemy=u,cc._RF.pop()},{"./Defines":"Defines","./enemies/Enemy":"Enemy","./enemies/Vald":"Vald"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"49afc9opr9DeJw/EBnD2l3f","Enemy");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a,s=t("../Defines"),c=t("../core/Timer"),l=t("../core/EventMgr"),h=t("../HealthBar"),u=t("./Stats"),p=cc._decorator,d=p.ccclass,f=p.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.CHASE=2]="CHASE",t[t.PATROL=3]="PATROL",t[t.WAITING=4]="WAITING",t[t.ATTACK=5]="ATTACK",t[t.ATTACKING=6]="ATTACKING",t[t.DEAD=7]="DEAD"})(r||(r={})),function(t){t.IDLE="light_ball_idle_loop",t.WALK="light_ball_idle_loop",t.ATTACK_1="light_ball_throw",t.HURT="get_hit",t.DEAD="die",t.TOMB="die_enemy"}(a||(a={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.tomb=null,e.colliders=[],e.body=null,e.stats=null,e.healthBar=null,e.timerWaiting=new c.default,e.timerHit=new c.default,e.target=null,e.hitColliderOffset=0,e}return i(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.tomb.setCompleteListener(this.OnAnimationComplete.bind(this)),this.timerHit.SetDuration(.05),this.hitColliderOffset=this.colliders[s.EnemyCollider.HIT].offset.x},e.prototype.update=function(t){switch(this.state){case r.INIT:case r.IDLE:break;case r.CHASE:case r.PATROL:this.UpdateMoveToTarget(t);break;case r.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(this.nextState);break;case r.ATTACK:case r.ATTACKING:}this.timerHit.Update(t),this.timerHit.IsDone()&&(this.colliders[s.EnemyCollider.HIT].node.active=!1)},e.prototype.SetState=function(t){switch(this.state=t,this.state){case r.INIT:this.spine.node.active=!0,this.tomb.node.active=!1,this.healthBar.SetHealthMax(this.stats.hp),this.SetState(r.IDLE);break;case r.IDLE:this.velocity=cc.v3(0,0,0),this.SetAnim(a.IDLE,!0);break;case r.CHASE:this.SetAnim(a.WALK,!0);break;case r.PATROL:this.targetSpot=this.GetPatrolSpot(),this.SetAnim(a.WALK,!0);break;case r.ATTACK:this.SetAnim(a.ATTACK_1,!1,!0),this.SetState(r.ATTACKING);break;case r.ATTACKING:break;case r.DEAD:this.SetAnim(a.DEAD,!1)}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Idle=function(){this.SetState(r.IDLE)},e.prototype.Chase=function(t,e){this.target=t,this.attackSpot=e,this.SetState(r.CHASE)},e.prototype.Patrol=function(t,e,n){this.target=t,this.attackSpot=e,this.isRandomPatrol=n,this.SetState(r.PATROL)},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(r.WAITING)},e.prototype.Attack=function(){var t=this.node.position.x>this.target.node.position.x?1:-1;this.SetDir(t),this.Waiting(this.stats.attackDelay,r.ATTACK)},e.prototype.Hurt=function(t){this.stats.hp-=t,this.stats.hp<=0?(this.stats.hp=0,this.SetState(r.DEAD)):(this.SetAnim(a.HURT,!1),this.Waiting(this.stats.hurtDelay,r.IDLE)),this.healthBar.SetHealth(this.stats.hp),l.EventMgr.instance.emit(s.GameEvent.ENEMY,{type:s.EnemyEvent.HURT,damage:t,position:cc.v3(this.node.position.x+s.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+s.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)})},e.prototype.GetAttackSpot=function(t){if(t==s.AttackSpot.LEFT){var e=s.Clamp(this.target.node.position.x-s.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.x,this.limitZone.x+this.limitZone.width);return this.node.position.x>e?Math.abs(this.node.position.y-this.target.node.position.y)<s.default.ENEMY_SAFE_DISTANCE?this.target.node.position.y<cc.winSize.height/2?cc.v3(this.node.position.x,this.target.node.position.y+s.default.ENEMY_SAFE_DISTANCE,0):cc.v3(this.node.position.x,this.target.node.position.y-s.default.ENEMY_SAFE_DISTANCE,0):cc.v3(e,this.node.position.y,0):cc.v3(e,this.target.node.position.y,0)}e=s.Clamp(this.target.node.position.x+s.default.CHARACTER_ATTACK_DISTANCE,this.limitZone.x,this.limitZone.x+this.limitZone.width);return this.node.position.x<e?Math.abs(this.node.position.y-this.target.node.position.y)<s.default.ENEMY_SAFE_DISTANCE?this.target.node.position.y<cc.winSize.height/2?cc.v3(this.node.position.x,this.target.node.position.y+s.default.ENEMY_SAFE_DISTANCE,0):cc.v3(this.node.position.x,this.target.node.position.y-s.default.ENEMY_SAFE_DISTANCE,0):cc.v3(e,this.node.position.y,0):cc.v3(e,this.target.node.position.y,0)},e.prototype.GetPatrolSpot=function(){var t=this.isRandomPatrol?s.RandomInt(0,360):this.GetPatrolAngle(),e=this.target.node.position.x+Math.cos(t*Math.PI/180)*(s.default.ENEMY_SAFE_DISTANCE-10),n=this.target.node.position.y+Math.sin(t*Math.PI/180)*(s.default.ENEMY_SAFE_DISTANCE-10);return cc.v3(e,n,0)},e.prototype.GetPatrolAngle=function(){var t=this.target.node.position,e=this.node.position;return e.x>t.x?e.y>t.y?s.RandomInt(0,15):s.RandomInt(345,360):e.y>t.y?s.RandomInt(165,180):s.RandomInt(180,195)},e.prototype.GetHitDamage=function(t){var e=t.getComponent(u.default);return s.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToCharacter=function(t){var e=this.node.position.x<t.node.position.x?1:-1;this.SetDir(e)},e.prototype.HasTarget=function(){return null!=this.target},e.prototype.IsIdle=function(){return this.state==r.IDLE},e.prototype.IsChasing=function(){return this.state==r.CHASE},e.prototype.IsReadyForAttack=function(){return this.state==r.ATTACK},e.prototype.IsDead=function(){return this.state==r.DEAD},e.prototype.IsInLimitZone=function(){return this.limitZone.contains(cc.v2(this.node.position.x,this.node.position.y))},e.prototype.IsBoss=function(){return!1},e.prototype.CanAttack=function(){var t=cc.v3();return cc.Vec3.subtract(t,this.target.node.position,this.node.position),t.len()<=s.default.ENEMY_ATTACK_DISTANCE+this.stats.speed&&Math.abs(t.y)<=10},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY),this.colliders[s.EnemyCollider.HIT].offset.x=t*this.hitColliderOffset},e.prototype.SetLimitZone=function(t){this.limitZone=t},e.prototype.UpdateMoveToTarget=function(t){this.attackSpot!=s.AttackSpot.PATROL&&(this.targetSpot=this.GetAttackSpot(this.attackSpot));var e=new cc.Vec3;cc.Vec3.subtract(e,this.targetSpot,this.node.position),this.velocity=cc.v3(e.x,e.y,0).normalize();var n=this.velocity.x>0?-1:1;this.SetDir(n);var i=cc.Vec3.distance(this.node.position,this.targetSpot),o=s.default.GAME_SPEED_BASE*this.stats.speed*t;o=Math.min(i,o);var a=cc.v3(this.node.position);a=a.add(cc.v3(this.velocity).multiplyScalar(o));var c=cc.misc.clampf(a.x,this.limitZone.x,this.limitZone.xMax),l=cc.misc.clampf(a.y,this.limitZone.y,this.limitZone.yMax);this.node.setPosition(cc.v3(c,l,0)),c==a.x&&l==a.y&&i!=o||(this.state==r.CHASE?this.CanAttack()?this.Attack():this.Waiting(this.stats.patrolDelay,r.CHASE):this.Waiting(this.stats.patrolDelay,r.IDLE))},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case a.ATTACK_1:this.colliders[s.EnemyCollider.HIT].node.active=!0,this.timerHit.Reset(),this.Waiting(this.stats.attackDelay,r.IDLE);break;case a.HURT:this.SetAnim(a.IDLE,!0);break;case a.DEAD:this.spine.node.active=!1,this.tomb.node.active=!0,this.tomb.setAnimation(0,a.TOMB,!1);break;case a.TOMB:this.node.active=!1,l.EventMgr.instance.emit(s.GameEvent.ENEMY,{type:s.EnemyEvent.DEAD})}},e.prototype.OnAnimationEvent=function(t){console.log(t.animation.name)},e.prototype.onCollisionEnter=function(t,e){"Hit"==t.node.name&&(this.IsDead()||(t.node.active=!1,this.Hurt(this.GetHitDamage(t.node.parent.parent))))},e.prototype.IsDisappear=function(){return!1},o([f({type:sp.Skeleton})],e.prototype,"spine",void 0),o([f({type:sp.Skeleton})],e.prototype,"tomb",void 0),o([f({type:[cc.CircleCollider]})],e.prototype,"colliders",void 0),o([f({type:cc.BoxCollider})],e.prototype,"body",void 0),o([f({type:u.default})],e.prototype,"stats",void 0),o([f({type:h.default})],e.prototype,"healthBar",void 0),e=o([d],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../Defines":"Defines","../HealthBar":"HealthBar","../core/EventMgr":"EventMgr","../core/Timer":"Timer","./Stats":"Stats"}],EventMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.EventMgr=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.instance=null,e}(cc.EventTarget);n.EventMgr=o,o.instance=new o,cc._RF.pop()},{}],GameMgr:[function(t,e,n){"use strict";cc._RF.push(e,"55f20KZDVdKfpOh/lU8Pv6Y","GameMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("./Defines"),s=t("./ui/MainMenu"),c=t("./ui/Ingame"),l=t("./MapMgr"),h=t("./Character"),u=t("./EnemyMgr"),p=t("./core/EventMgr"),d=t("./core/Input"),f=t("./Damage"),m=cc._decorator,y=m.ccclass,g=m.property;(function(t){t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME"})(r||(r={}));var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cameraContainer=null,e.character=null,e.mapContainer=null,e.enemyMgr=null,e.damagePrefab=null,e.fadeEffect=null,e.viewMainMenu=null,e.viewIngame=null,e.damages=[],e.shakeOffset=cc.v2(),e.zoneIndex=0,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){p.EventMgr.instance.on(d.default.TOUCH,this.TouchHandler,this),p.EventMgr.instance.on(a.GameEvent.MAP,this.MapEventHandler,this),p.EventMgr.instance.on(a.GameEvent.ENEMY,this.EnemyEventHandler,this),p.EventMgr.instance.on(a.GameEvent.CHARACTER,this.CharacterEventHandler,this),cc.game.on(cc.game.EVENT_SHOW,this.GameResume,this),cc.game.on(cc.game.EVENT_HIDE,this.GamePause,this),this.SetState(r.INIT)},e.prototype.update=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:this.UpdateCamera(),this.enemyMgr.UpdateChase(),this.enemyMgr.UpdateAttack()}},e.prototype.SetState=function(t){var e=this;switch(this.state=t,t){case r.INIT:cc.resources.load("maps/Map_01_01",function(t,n){var i=cc.instantiate(n);e.mapMgr=i.getComponent(l.default),e.mapContainer.addChild(i);var o=e.mapMgr.GetLimitZone(0);e.mapMgr.DisableTrigger(),e.mapMgr.AddCharacter(e.character.node),e.character.SetLimitZone(o),e.enemyMgr.SetTarget(e.character),e.enemyMgr.SetLimitZone(o),e.enemyMgr.SetEnemies(e.mapMgr.GetEnemies()),e.SetState(r.PLAYING)});break;case r.PLAYING:}},e.prototype.UpdateCamera=function(){var t=cc.Camera.main.node,e=t.position.lerp(this.character.node.position,.05),n=this.mapMgr.GetLimitZone(this.zoneIndex),i=cc.misc.clampf(e.x,n.x+cc.winSize.width/2,n.x+n.width-cc.winSize.width/2);t.setPosition(cc.v3(i,cc.winSize.height/2,0))},e.prototype.NextZone=function(){this.zoneIndex++,this.zoneIndex==this.mapMgr.GetMaxZone()&&(this.zoneIndex=0),this.character.SetLimitZone(this.mapMgr.GetLimitZone(this.zoneIndex)),this.character.Idle(),this.enemyMgr.SetLimitZone(this.character.limitZone)},e.prototype.ExpandZone=function(t){this.NextZone(),t()},e.prototype.SwitchZone=function(t){var e=this;cc.tween(this.fadeEffect).to(1,{opacity:255}).call(function(){e.NextZone(),e.UpdateCamera(),cc.tween(e.fadeEffect).to(1,{opacity:0}).call(t).start()}).start()},e.prototype.CharacterAttack=function(){null!=this.character.enemyAttack&&((e=u.GetEnemy(this.character.enemyAttack)).IsDead()&&(this.character.enemyAttack=null));if(this.character.IsAttacking())this.character.ContinueAttack();else{var t=this.enemyMgr.GetEnemiesInRange(this.character.node.position,a.default.CHARACTER_ATTACK_DISTANCE);if(t.length>0){var e=t[0];this.character.CanAttack(e)?this.character.Attack(e):this.character.Chase(e)}else{var n=this.enemyMgr.GetEnemiesInRange(this.character.node.position,a.default.CHARACTER_CHASE_DISTANCE);if(n.length>0){e=n[0];this.character.Chase(e)}else this.character.Attack(null)}}},e.prototype.AddDamage=function(t,e){var n,i=this.GetInactiveDamage();null==i?((n=cc.instantiate(this.damagePrefab)).parent=this.node,this.damages.push(n)):n=i,n.getComponent(f.default).Spawn(t,e)},e.prototype.GetInactiveDamage=function(){var t=this.damages.filter(function(t){return!t.active});return t.length>0?t[0]:null},e.prototype.GameResume=function(){cc.game.resume()},e.prototype.GamePause=function(){cc.game.pause()},e.prototype.TouchHandler=function(t){switch(this.state){case r.INIT:break;case r.PLAYING:d.default.instance.IsTouchMove(t)?d.default.instance.delta.len()>a.default.CHARACTER_MOVE_DISTANCE&&this.character.Move():d.default.instance.IsTouchUp(t)&&this.CharacterAttack()}},e.prototype.MapEventHandler=function(t){var e=this;switch(t.type){case a.MapEvent.SWITCH_ZONE:this.SwitchZone(function(){e.mapMgr.DisableTrigger(),e.SetState(r.PLAYING)});break;case a.MapEvent.EXPAND_ZONE:this.ExpandZone(function(){e.mapMgr.DisableTrigger(),e.SetState(r.PLAYING)})}},e.prototype.EnemyEventHandler=function(t){switch(t.type){case a.EnemyEvent.DEAD:this.enemyMgr.IsClear()||this.mapMgr.EnableTrigger();break;case a.EnemyEvent.HURT:null!=this.shakeTween&&this.shakeTween.stop();this.cameraContainer.setPosition(cc.v3(a.RandomInt(-10,10),a.RandomInt(-10,10),0)),this.shakeTween=cc.tween(this.cameraContainer).to(.5,{position:cc.v3(0,0,0)},{easing:"elasticOut"}).start(),this.AddDamage(t.damage,t.position)}},e.prototype.CharacterEventHandler=function(t){switch(t.type){case a.CharacterEvent.HURT:this.AddDamage(t.damage,t.position)}},o([g({type:cc.Node})],e.prototype,"cameraContainer",void 0),o([g({type:h.default})],e.prototype,"character",void 0),o([g({type:cc.Node})],e.prototype,"mapContainer",void 0),o([g({type:u.default})],e.prototype,"enemyMgr",void 0),o([g({type:cc.Prefab})],e.prototype,"damagePrefab",void 0),o([g({type:cc.Node})],e.prototype,"fadeEffect",void 0),o([g({type:s.default})],e.prototype,"viewMainMenu",void 0),o([g({type:c.default})],e.prototype,"viewIngame",void 0),e=o([y],e)}(cc.Component);n.default=A,cc._RF.pop()},{"./Character":"Character","./Damage":"Damage","./Defines":"Defines","./EnemyMgr":"EnemyMgr","./MapMgr":"MapMgr","./core/EventMgr":"EventMgr","./core/Input":"Input","./ui/Ingame":"Ingame","./ui/MainMenu":"MainMenu"}],HealthBar:[function(t,e,n){"use strict";cc._RF.push(e,"823eezzajBLno6Q5ehKsASQ","HealthBar");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg01=null,e.bg02=null,e.fg=null,e.tweenMain=null,e}return i(e,t),e.prototype.SetHealthMax=function(t){this.health=t,this.healthMax=t,this.node.opacity=0},e.prototype.SetHealth=function(t){var e=t/this.healthMax,n=this.bg01.width*e;null!=this.tweenMain&&this.tweenMain.stop(),this.health=t,this.fg.width=n,cc.tween(this.bg02).delay(.5).to(.5,{width:n}).start(),this.node.opacity=255,this.tweenMain=cc.tween(this.node).delay(1).to(.1,{opacity:0}).start()},o([s({type:cc.Node})],e.prototype,"bg01",void 0),o([s({type:cc.Node})],e.prototype,"bg02",void 0),o([s({type:cc.Node})],e.prototype,"fg",void 0),e=o([a],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],HomeMgr:[function(t,e,n){"use strict";cc._RF.push(e,"c0a96U4lmFPwZompSnTMvYk","HomeMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.HomeState=void 0;var r,a=t("./Defines"),s=t("./Defines"),c=t("./core/PlayerProfile"),l=t("./core/Leaderboard"),h=t("./core/LeaderboardItem"),u=cc._decorator,p=u.ccclass,d=u.property;(function(t){t[t.INIT=0]="INIT",t[t.PROFILE=1]="PROFILE",t[t.TERM=2]="TERM",t[t.STAGE_SELECT=3]="STAGE_SELECT",t[t.PLAYING=4]="PLAYING",t[t.SCORE=5]="SCORE",t[t.REGISTER=6]="REGISTER",t[t.LEADERBOARD=7]="LEADERBOARD"})(r=n.HomeState||(n.HomeState={}));var f=function(){function t(){}return t.prototype.init=function(t){this.node=t,this.btnPP=this.node.getChildByName("LabelPP").getComponent(cc.Button),this.btnPP.node.on("click",this.openPP.bind(this)),this.btnDC=this.node.getChildByName("LabelDC").getComponent(cc.Button),this.btnDC.node.on("click",this.openDC.bind(this)),this.btnAccept=this.node.getChildByName("ButtonAccept").getComponent(cc.Button),this.btnAccept.node.on("click",this.acceptTerm.bind(this))},t.prototype.update=function(t){},t.prototype.toggle=function(t){this.node.active=t},t.prototype.openPP=function(){var t=this;cc.sys.openURL(a.default.PRIVACY_POLICY_URL),this.btnPP.interactable=!1,setTimeout(function(){t.btnPP.interactable=!0}.bind(this),250)},t.prototype.openDC=function(){var t=this;cc.sys.openURL(a.default.DISCLAIMER_URL),this.btnDC.interactable=!1,setTimeout(function(){t.btnDC.interactable=!0}.bind(this),250)},t.prototype.acceptTerm=function(){var t=this;this.node.dispatchEvent(new cc.Event.EventCustom("accept-term",!0)),this.btnAccept.interactable=!1,setTimeout(function(){t.btnAccept.interactable=!0}.bind(this),250)},t}(),m=function(){function t(){}return t.prototype.init=function(t){var e=this;this.node=t;var n=this.node.getChildByName("ButtonStageA").getComponent(cc.Button);n.node.on("click",function(t){e.toggle(!1);var n=new cc.Event.EventCustom("stage-select",!0);n.setUserData("A"),e.node.dispatchEvent(n)}.bind(this),n,!0),(n=this.node.getChildByName("ButtonStageB").getComponent(cc.Button)).node.on("click",function(t){e.toggle(!1);var n=new cc.Event.EventCustom("stage-select",!0);n.setUserData("B"),e.node.dispatchEvent(n)}.bind(this),n,!0),(n=this.node.getChildByName("ButtonBack").getComponent(cc.Button)).node.on("click",function(t){e.toggle(!1)}.bind(this),n,!0)},t.prototype.toggle=function(t){this.node.active=t},t}(),y=function(){function t(){}return t.prototype.init=function(t){var e=this;this.node=t,this.node.getChildByName("ButtonClose").getComponent(cc.Button).node.on("click",function(){e.toggle(!1)}.bind(this))},t.prototype.toggle=function(t){this.node.active=t},t}(),g=function(){function t(){this.isOnLeaderboard=!1,this.currentSelf=null}return t.prototype.isActive=function(){return this.node.active},t.prototype.init=function(t,e){var n=this;this.node=t;var i=this.node.getChildByName("ButtonClose").getComponent(cc.Button);i.node.on("click",function(){n.toggle(!1),n.node.dispatchEvent(new cc.Event.EventCustom("dialog-close",!0))}.bind(this),i,!0),this.leaderboard=cc.find("GameAssets/Leaderboard").getComponent(l.default),this.prefabItem=e,this.itemContainer=cc.find("BoardContent/view/content",this.node),this.selfItem=cc.find("BoardContent/ItemSelf",this.node),this.selfItem.getComponent(h.default).init(),this.node.getChildByName("BoardContent").on("scrolling",this.scrollHandler.bind(this),this)},t.prototype.reload=function(){var t=this;return this.currentSelf=null,this.itemContainer.removeAllChildren(),new Promise(function(e,n){t.leaderboard.myEntry().then(function(){t.isOnLeaderboard=t.leaderboard.userEntry.rank>0,t.leaderboard.get(0,a.default.LEADERBOARD_TOP_COUNT).then(function(n){for(var i,o=!1,r=0;r<n.length;r++)o=n[r].userid==t.leaderboard.userId,(i=cc.instantiate(t.prefabItem)).parent=t.itemContainer,i.getComponent(h.default).init().setInfo(n[r].rank,n[r].display_name,n[r].score,r%2==1,o),o&&(t.currentSelf=i);null!=t.currentSelf?(t.selfItem.active=!0,t.selfItem.getComponent(h.default).setInfo(t.leaderboard.userEntry.rank,t.leaderboard.userEntry.display_name,t.leaderboard.userEntry.score,!1,!0),t.scrollHandler(t.node.getChildByName("BoardContent").getComponent(cc.ScrollView))):t.leaderboard.userEntry.rank>0&&(t.currentSelf=cc.instantiate(t.prefabItem),t.currentSelf.parent=t.itemContainer,t.currentSelf.getComponent(h.default).init().setInfo(t.leaderboard.userEntry.rank,t.leaderboard.userEntry.display_name,t.leaderboard.userEntry.score,!1,!0),t.selfItem.active=!0),e()}.bind(t))}.bind(t))}.bind(this))},t.prototype.toggle=function(t){this.node.active=t},t.prototype.scrollHandler=function(t){if(null!=this.currentSelf){var e=this.itemContainer.getContentSize().height,n=s.Clamp(545+this.currentSelf.position.y-e+t.getScrollOffset().y,-400,500);this.selfItem.y=n}},t}(),A=function(){function t(){this.score=0,this.currentScore=0,this.scoreSpeed=0}return t.prototype.init=function(t){this.node=t,this.labelScore=cc.find("ScoreBox/Score",this.node).getComponent(cc.Label),this.btnRestart=this.node.getChildByName("ButtonRestart").getComponent(cc.Button),this.btnLeaderboard=this.node.getChildByName("ButtonLeaderboard").getComponent(cc.Button),this.btnMenu=cc.find("ScoreBox/ButtonMenu",this.node).getComponent(cc.Button),this.btnNext=cc.find("ScoreBox/ButtonNext",this.node).getComponent(cc.Button),this.btnRestart.node.on("click",this.restartClicked.bind(this)),this.btnLeaderboard.node.on("click",this.leaderboardClicked.bind(this)),this.btnMenu.node.on("click",this.menuClicked.bind(this)),this.btnNext.node.on("click",this.nextClicked.bind(this))},t.prototype.setScore=function(t){this.currentScore=0,this.score=t,this.scoreSpeed=this.score/2,this.labelScore.string=Math.floor(this.currentScore)+"",this.scorePosted=!1},t.prototype.update=function(t){this.scoreSpeed>0&&(this.currentScore=Math.min(this.currentScore+this.scoreSpeed*t,this.score),this.labelScore.string=Math.floor(this.currentScore)+"",this.currentScore==this.score&&(this.scoreSpeed=0))},t.prototype.toggle=function(t){this.node.active=t},t.prototype.restartClicked=function(){this.toggle(!1);var t=new cc.Event.EventCustom("dialog-event",!0);t.setUserData("restart"),this.node.dispatchEvent(t)},t.prototype.leaderboardClicked=function(){this.toggle(!1);var t=new cc.Event.EventCustom("dialog-event",!0);t.setUserData("leaderboard"),this.node.dispatchEvent(t)},t.prototype.menuClicked=function(){this.toggle(!1);var t=new cc.Event.EventCustom("dialog-event",!0);t.setUserData("menu"),this.node.dispatchEvent(t)},t.prototype.nextClicked=function(){this.toggle(!1);var t=new cc.Event.EventCustom("dialog-event",!0);t.setUserData("next"),this.node.dispatchEvent(t)},t}(),v=function(){function t(){}return t.prototype.init=function(t){this.node=t,this.txtName=cc.find("RegisterBox/Form/InputName",this.node).getComponent(cc.EditBox),this.txtEmail=cc.find("RegisterBox/Form/InputEmail",this.node).getComponent(cc.EditBox),this.txtPhone=cc.find("RegisterBox/Form/InputPhone",this.node).getComponent(cc.EditBox),this.btnRegister=cc.find("RegisterBox/ButtonRegister",this.node).getComponent(cc.Button),this.btnRegister.node.on("click",this.registerClicked.bind(this))},t.prototype.getData=function(){return{fullName:this.txtName.string.trim(),email:this.txtEmail.string.trim(),phoneNumber:this.txtPhone.string.trim()}},t.prototype.toggle=function(t){this.node.active=t},t.prototype.registerClicked=function(){var t=this.getData();if(0!=t.fullName.length&&0!=t.email.length&&0!=t.phoneNumber.length){var e=new cc.Event.EventCustom("user-register",!0);e.setUserData(t),this.node.dispatchEvent(e)}else alert("Please input all the fields.")},t}(),E=function(){function t(){}return t.prototype.init=function(t){this.node=t,this.iconLoading=this.node.getChildByName("IconLoading")},t.prototype.update=function(t){this.iconLoading.angle-=180*t},t.prototype.toggle=function(t){this.node.active=t},t}(),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameAssets=[],e.leaderboardItem=null,e.dlgTerm=new f,e.dlgPlay=new m,e.dlgTutorial=new y,e.dlgLeaderboard=new g,e.dlgScore=new A,e.dlgRegister=new v,e.dlgLoading=new E,e.state=r.INIT,e}return i(e,t),e.prototype.start=function(){var t=this;this.createStartupAssets(),this.dlgTerm.init(this.node.getChildByName("DialogTerms")),this.dlgPlay.init(this.node.getChildByName("DialogPlay")),this.dlgTutorial.init(this.node.getChildByName("DialogTutorial")),this.dlgLeaderboard.init(this.node.getChildByName("DialogLeaderboard"),this.leaderboardItem),this.dlgScore.init(this.node.getChildByName("DialogScore")),this.dlgRegister.init(this.node.getChildByName("DialogRegister")),this.dlgLoading.init(this.node.getChildByName("LoadingOverlay")),this.dlgTerm.node.on("accept-term",this.userAcceptTerm.bind(this)),this.dlgPlay.node.on("stage-select",this.stageSelected.bind(this)),this.dlgLeaderboard.node.on("dialog-close",this.leaderboardClose.bind(this)),this.dlgScore.node.on("dialog-event",this.scoreDialogHandler.bind(this)),this.dlgRegister.node.on("user-register",this.userRegisterHandler.bind(this)),this.homeMenu=this.node.getChildByName("HomeMenu"),this.homeMenu.getChildByName("ButtonPlay").on("click",function(){t.dlgPlay.toggle(!0)}.bind(this)),this.homeMenu.getChildByName("ButtonTutorial").on("click",function(){t.dlgTutorial.toggle(!0)}.bind(this)),this.homeMenu.getChildByName("ButtonLeaderboard").on("click",function(){t.dlgLeaderboard.toggle(!0)}.bind(this))},e.prototype.update=function(t){switch(this.dlgLoading.update(t),this.state){case r.INIT:this.playerProfile.isReady()&&(this.leaderboard.init(this.playerProfile.uniqueId,this.playerProfile.fullName||"anonymous"),this.dlgLeaderboard.reload(),this.setState(r.PROFILE));break;case r.PROFILE:break;case r.TERM:this.playerProfile.acceptTerms&&(this.dlgTerm.toggle(!1),this.setState(r.STAGE_SELECT));break;case r.STAGE_SELECT:case r.PLAYING:break;case r.SCORE:this.dlgScore.update(t);break;case r.REGISTER:break;case r.LEADERBOARD:!this.dlgLeaderboard.isActive()&&this.dlgScore.scorePosted&&(this.dlgLoading.toggle(!1),this.dlgLeaderboard.toggle(!0))}},e.prototype.setState=function(t){var e=this;switch(this.state=t,this.state){case r.PROFILE:this.dlgLoading.toggle(!0),this.playerProfile.load().then(function(t){e.playerProfile.acceptTerms?e.setState(r.STAGE_SELECT):e.setState(r.TERM)}.bind(this)).catch(function(t){console.log("Cannot load profile "+t)}.bind(this));break;case r.TERM:this.dlgLoading.toggle(!1),this.dlgTerm.toggle(!0);break;case r.STAGE_SELECT:this.dlgLoading.toggle(!1),this.homeMenu.active=!0;break;case r.PLAYING:this.homeMenu.active=!1;break;case r.SCORE:this.homeMenu.active=!1,this.dlgScore.setScore(this.playerProfile.score),this.dlgScore.toggle(!0),this.playerProfile.registered&&this.leaderboard.post(this.playerProfile.score).then(function(t){e.dlgScore.scorePosted=!0}.bind(this)).catch(function(t){console.log("cannot post score ",t)}.bind(this));break;case r.REGISTER:this.dlgScore.toggle(!1),this.dlgRegister.toggle(!0);break;case r.LEADERBOARD:this.dlgLoading.toggle(!0),this.dlgScore.scorePosted&&(this.dlgScore.scorePosted=!1,this.dlgLeaderboard.reload().then(function(){e.dlgScore.scorePosted=!0}.bind(this)))}},e.prototype.createStartupAssets=function(){var t,e=cc.find("GameAssets");null==e&&(e=new cc.Node("GameAssets"),cc.game.addPersistRootNode(e),(t=cc.instantiate(this.gameAssets[0])).parent=e,this.playerProfile=t.getComponent(c.default),(t=cc.instantiate(this.gameAssets[1])).parent=e,this.leaderboard=t.getComponent(l.default))},e.prototype.userAcceptTerm=function(t){this.dlgLoading.toggle(!0),this.playerProfile.save({acceptTerms:!0}).then(function(t){}.bind(this)).catch(function(t){console.log("unable to save profile")}.bind(this))},e.prototype.leaderboardClose=function(){this.state==r.LEADERBOARD&&this.setState(r.STAGE_SELECT)},e.prototype.stageSelected=function(t){switch(t.detail){case"A":case"B":this.playerProfile.score=30*s.RandomInt(4,9),this.setState(r.SCORE)}},e.prototype.scoreDialogHandler=function(t){switch(t.detail){case"restart":this.setState(r.STAGE_SELECT);break;case"leaderboard":this.playerProfile.registered?this.setState(r.LEADERBOARD):this.setState(r.REGISTER);break;case"menu":case"next":this.setState(r.STAGE_SELECT)}},e.prototype.userRegisterHandler=function(t){var e=this,n=t.detail;n.registered=!0,this.dlgLoading.toggle(!0),this.playerProfile.save(n).then(function(t){alert("register successful"),e.dlgRegister.toggle(!1),e.leaderboard.setName(e.playerProfile.fullName),e.setState(r.LEADERBOARD),e.leaderboard.post(e.playerProfile.score).then(function(t){e.dlgLeaderboard.reload().then(function(){e.dlgScore.scorePosted=!0}.bind(e))}.bind(e)).catch(function(t){console.log("cannot post score ",t)}.bind(e))}.bind(this)).catch(function(t){alert("cannot register"),e.dlgLoading.toggle(!1)}.bind(this))},o([d({type:[cc.Prefab]})],e.prototype,"gameAssets",void 0),o([d({type:cc.Prefab})],e.prototype,"leaderboardItem",void 0),e=o([p],e)}(cc.Component);n.default=T,cc._RF.pop()},{"./Defines":"Defines","./core/Leaderboard":"Leaderboard","./core/LeaderboardItem":"LeaderboardItem","./core/PlayerProfile":"PlayerProfile"}],Ingame:[function(t,e,n){"use strict";cc._RF.push(e,"d57fbMvM2RLv4EaGQvb6+xn","Ingame");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e=o([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],Input:[function(t,e,n){"use strict";cc._RF.push(e,"86a1eETgqhC7LCRoYW35gpp","Input");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./EventMgr"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=new cc.Vec2(0,0),e.movePosition=new cc.Vec2(0,0),e.delta=new cc.Vec2(0,0),e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this.position=t.touch.getLocation(),this.movePosition=t.touch.getLocation(),r.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.onTouchEnd=function(t){this.delta=new cc.Vec2(0,0),r.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.onTouchMove=function(t){this.movePosition=t.touch.getLocation(),cc.Vec2.subtract(this.delta,this.movePosition,this.position),r.EventMgr.instance.emit(n.TOUCH,t)},e.prototype.IsTouchDown=function(t){return t.type==cc.Node.EventType.TOUCH_START},e.prototype.IsTouchUp=function(t){return t.type==cc.Node.EventType.TOUCH_END},e.prototype.IsTouchMove=function(t){return t.type==cc.Node.EventType.TOUCH_MOVE},e.instance=null,e.TOUCH="TouchEvent",e=n=o([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{"./EventMgr":"EventMgr"}],LeaderboardItem:[function(t,e,n){"use strict";cc._RF.push(e,"c7444rsgtZEWKIYE5IZScEy","LeaderboardItem");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,new cc.Color(75,98,223)),c=new cc.Color(158,158,158),l=new cc.Color(118,118,118),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){return this.lblRank=this.node.getChildByName("Rank").getComponent(cc.Label),this.lblName=this.node.getChildByName("Name").getComponent(cc.Label),this.lblPoint=this.node.getChildByName("Point").getComponent(cc.Label),this.background=this.node.getChildByName("Background"),this},e.prototype.setInfo=function(t,e,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),this.lblRank.string=t+"",this.lblName.string=e,this.lblPoint.string=n+"pts",this.background.color=o?s:i?l:c},e=o([a],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],Leaderboard:[function(t,e,n){"use strict";cc._RF.push(e,"512caKYIuVOVYGesRlAU4PC","Leaderboard");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.LeaderboardItemData=void 0;var r=t("../Defines"),a=t("../lib/Utils"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function t(){this.display_name="",this.score=0,this.rank=0}return t.prototype.reset=function(){this.display_name="",this.rank=0,this.score=0},t}());n.LeaderboardItemData=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boardName="",e.userEntry=new l,e}return i(e,t),e.prototype.init=function(t,e){this.userId=t,this.userName=e,this.boardName="255_"+r.default.GAME_NAME},e.prototype.setName=function(t){this.userName=t},e.prototype.get=function(t,e){var n=this;return void 0===t&&(t=0),void 0===e&&(e=50),new Promise(function(i,o){a.default.request("get",r.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+n.boardName+"/"+t+"/"+e,null).then(function(t){if(null!=t&&void 0!=t&&""!=t.trim()){try{var e=JSON.parse(t);if(!e.statusCode||"404"!=e.statusCode)return void i(e)}catch(t){console.log("Leaderboard data parse error: "+t)}i([])}else i([])}.bind(n)).catch(function(t){console.log("cannot get board: ",t),i([])}.bind(n))}.bind(this))},e.prototype.post=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(i,o){var s={userid:n.userId,score:t,name:n.userName,attrs:e};a.default.request("post",r.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+n.boardName,JSON.stringify(s)).then(function(t){i()}.bind(n)).catch(function(t){o(t)}.bind(n))}.bind(this))},e.prototype.myEntry=function(){var t=this;return new Promise(function(e,n){t.userEntry.reset(),a.default.request("get",r.default.REST_API_SERVER+"/api/pub/federation/leaderboard/"+t.boardName+"/"+t.userId,null).then(function(n){if(null!=n&&void 0!=n&&""!=n.trim()){try{var i=JSON.parse(n);if(!i.statusCode||"404"!=i.statusCode)return Object.assign(t.userEntry,i),void e()}catch(t){console.log("Leaderboard my entry parse error: "+t)}e()}else e()}.bind(t)).catch(function(t){console.log("cannot get my entry: ",t),e()}.bind(t))}.bind(this))},e.prototype.deleteMyEntry=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(t,e){var i={userid:n.userId};a.default.request("post",r.default.REST_API_SERVER+"/api/pri/federation/leaderboard/"+n.boardName+"/delete",JSON.stringify(i)).then(function(e){null!=e&&void 0!=e?e.indexOf("OK")>-1&&t():t()}.bind(n)).catch(function(t){e(t)}.bind(n))}.bind(this))},e=o([c],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../Defines":"Defines","../lib/Utils":"Utils"}],LightBall:[function(t,e,n){"use strict";cc._RF.push(e,"0f908M3owZK56a6k9u/Bygq","LightBall");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a=t("../Defines"),s=cc._decorator,c=s.ccclass;s.property;(function(t){t[t.IDLE=0]="IDLE",t[t.PLAYING=1]="PLAYING",t[t.DEAD=2]="DEAD"})(r||(r={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.velocity=cc.v3(),e}return i(e,t),e.prototype.start=function(){},e.prototype.update=function(t){switch(this.state){case r.PLAYING:var e=cc.v3(this.node.position);e=e.add(cc.v3(this.velocity).multiplyScalar(a.default.GAME_SPEED_BASE*this.speed*t)),this.node.setPosition(e),this.IsOutOfScreen()&&this.Destroy()}},e.prototype.SetState=function(t){switch(this.state=t,this.state){case r.PLAYING:}},e.prototype.IsOutOfScreen=function(){var t=this.node.position,e=cc.Camera.main.node.position;return t.x<e.x-cc.winSize.width/2-200||t.x>e.x+cc.winSize.width/2+200||t.y<-200||t.y>cc.winSize.height+200},e.prototype.Spawn=function(t,e,n){var i=cc.v3();cc.Vec3.subtract(i,e,t),this.velocity=i.normalize(),this.speed=n,this.node.setPosition(t),this.node.angle=180*Math.atan2(i.y,i.x)/Math.PI+180,this.SetState(r.PLAYING)},e.prototype.Destroy=function(){this.node.active=!1},e=o([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],MainMenu:[function(t,e,n){"use strict";cc._RF.push(e,"a5902txSatGdbKT5kIXFrQo","MainMenu");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e=o([a],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],MapMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4fa49OSK4JALaejCQuFWEl5","MapMgr");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Character"),a=t("./enemies/LightBall"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zones=[],e.triggers=null,e.enemiesContainer=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this.UpdateRenderOrder()},e.prototype.EnableTrigger=function(){this.triggers.active=!0},e.prototype.DisableTrigger=function(){this.triggers.active=!1},e.prototype.AddCharacter=function(t){t.parent=this.enemiesContainer},e.prototype.GetEnemies=function(){return this.enemiesContainer.children.filter(function(t){return null==t.getComponent(r.default)})},e.prototype.GetLimitZone=function(t){void 0===t&&(t=0);var e=this.zones[t];return new cc.Rect(e.offset.x-e.size.width/2,e.offset.y,e.size.width,e.size.height)},e.prototype.GetMaxZone=function(){return this.zones.length},e.prototype.UpdateRenderOrder=function(){for(var t=0;t<this.enemiesContainer.childrenCount;t++){var e=this.enemiesContainer.children[t];null!=e.getComponent(a.default)?e.zIndex=cc.winSize.height:e.zIndex=cc.winSize.height-this.enemiesContainer.children[t].y}},o([l({type:[cc.BoxCollider]})],e.prototype,"zones",void 0),o([l({type:cc.Node})],e.prototype,"triggers",void 0),o([l({type:cc.Node})],e.prototype,"enemiesContainer",void 0),e=o([c],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./Character":"Character","./enemies/LightBall":"LightBall"}],PlayerProfile:[function(t,e,n){"use strict";cc._RF.push(e,"486daB6wGNFEZhtBGSnUqi8","PlayerProfile");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Defines"),a=t("../lib/Utils"),s=t("../lib/fingerprint2.min.js"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userId=null,e.uniqueId=null,e.fullName=null,e.email=null,e.phoneNumber=null,e.registered=!1,e.finishTutorial=!1,e.acceptTerms=!1,e.score=0,e.highScore=0,e}return i(e,t),e.prototype.start=function(){var t=this;s.get({hasher:!0,screen_resolution:!0,canvas:!0,ie_activex:!0},function(e){var n=e.map(function(t){return t.value});t.uniqueId=s.x64hash128(n.join(""),31),t.userId=t.uniqueId,console.log("unique id: "+t.uniqueId)}.bind(this))},e.prototype.update=function(t){},e.prototype.isReady=function(){return null!=this.uniqueId},e.prototype.getApiUrl=function(){return r.default.REST_API_SERVER+"/api/pub/federation/profile/"+r.default.GAME_NAME+"/Player%3A"+this.uniqueId+"%3A"+r.default.PHASE},e.prototype.load=function(){var t=this;return new Promise(function(e,n){a.default.request("get",t.getApiUrl(),null).then(function(n){if(null!=n&&void 0!=n&&""!=n.trim()){try{var i=JSON.parse(n);i.statusCode&&"404"==i.statusCode||i.userId&&Object.assign(t,i)}catch(t){console.log("Profile data parse error: "+t)}e(t)}else e(t)}.bind(t)).catch(function(t){n(t)}.bind(t))}.bind(this))},e.prototype.save=function(t){var e=this;void 0===t&&(t=null);var n={userId:this.userId,fullName:this.fullName,email:this.email,phoneNumber:this.phoneNumber,finishTutorial:this.finishTutorial,registered:this.registered,acceptTerms:this.acceptTerms};return t&&Object.assign(n,t),new Promise(function(t,i){a.default.request("post",e.getApiUrl(),JSON.stringify(n)).then(function(o){if(null!=o&&void 0!=o)return o.indexOf("OK")>-1?(Object.assign(e,n),void t()):void i("empty");i("empty")}.bind(e)).catch(function(t){i(t)})})},e.prototype.clear=function(){var t=this,e={fullName:null,email:null,phoneNumber:null,registered:!1,finishTutorial:!1,acceptTerms:!1,score:0,highScore:0};return new Promise(function(n,i){a.default.request("post",t.getApiUrl(),JSON.stringify(e)).then(function(t){n()}).catch(function(t){i(t)})})},e=o([l],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../Defines":"Defines","../lib/Utils":"Utils","../lib/fingerprint2.min.js":"fingerprint2.min"}],Stats:[function(t,e,n){"use strict";cc._RF.push(e,"a82a3iVCY9CB56pud29ricR","Stats");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Defines"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hp=r.default.ENEMY_HP,e.damageMin=r.default.ENEMY_MIN_DAMAGE,e.damageMax=r.default.ENEMY_MAX_DAMAGE,e.speed=r.default.ENEMY_MOVE_SPEED,e.attackDelay=r.default.ENEMY_ATTACK_DELAY,e.patrolDelay=r.default.ENEMY_PATROL_DELAY,e.hurtDelay=r.default.ENEMY_HURT_DELAY,e}return i(e,t),e.prototype.update=function(t){},o([c({type:cc.Integer})],e.prototype,"hp",void 0),o([c({type:cc.Integer,min:r.default.ENEMY_MIN_DAMAGE,max:r.default.ENEMY_MAX_DAMAGE})],e.prototype,"damageMin",void 0),o([c({type:cc.Integer,min:r.default.ENEMY_MIN_DAMAGE,max:r.default.ENEMY_MAX_DAMAGE})],e.prototype,"damageMax",void 0),o([c({type:cc.Float})],e.prototype,"speed",void 0),o([c({type:cc.Float})],e.prototype,"attackDelay",void 0),o([c({type:cc.Float})],e.prototype,"patrolDelay",void 0),o([c({type:cc.Float})],e.prototype,"hurtDelay",void 0),e=o([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Defines":"Defines"}],Test:[function(t,e,n){"use strict";cc._RF.push(e,"a9b3b2jEoxJo7pZBFq7Qq+T","Test");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./core/Input"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return i(e,t),e.prototype.start=function(){this.crossbow=this.spine.findBone("crosshair"),this.spine.setAnimation(1,"aim",!0)},e.prototype.update=function(t){this.crossbow.x=r.default.instance.position.x-this.node.position.x,this.crossbow.y=r.default.instance.position.y-this.node.position.y},o([c(sp.Skeleton)],e.prototype,"spine",void 0),e=o([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./core/Input":"Input"}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"6b85cbHB39ATpO/QtAEphQG","Timer"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.AddTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},t.prototype.GetTimePercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0==this.timer},t.prototype.JustFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.Update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();n.default=i,cc._RF.pop()},{}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"6fbb3EATi1PurSsVcnpONzM","Utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=new(function(){function t(){}return t.prototype.request=function(t,e,n,i){return void 0===i&&(i=null),new Promise(function(o,r){var a=new XMLHttpRequest;a.open(t,e,!0),"post"==t&&a.setRequestHeader("Content-type","application/json"),i&&(a.responseType=i),a.onreadystatechange=function(){4==a.readyState&&(200==a.status||"1"==window.fromCache?o(a.response):r("error"))},a.send(n)})},t}()),cc._RF.pop()},{}],Vald:[function(t,e,n){"use strict";cc._RF.push(e,"1d4a8nu4KhM4KIYwnyNjesA","Vald");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r,a,s=t("../Defines"),c=t("../core/Timer"),l=t("../core/EventMgr"),h=t("./LightBall"),u=t("./Stats"),p=t("../HealthBar"),d=cc._decorator,f=d.ccclass,m=d.property;(function(t){t[t.INIT=0]="INIT",t[t.IDLE=1]="IDLE",t[t.WAITING=2]="WAITING",t[t.APPEAR=3]="APPEAR",t[t.DISAPPEAR=4]="DISAPPEAR",t[t.CHARGE=5]="CHARGE",t[t.ATTACK=6]="ATTACK",t[t.DEAD=7]="DEAD"})(r||(r={})),function(t){t.IDLE="idle",t.TELEPORT_APPEAR="teleport_appear",t.TELEPORT_DISAPPEAR="teleport_disappear",t.CHARGE="light_ball_idle_loop",t.ATTACK="light_ball_throw",t.HURT="get_hit",t.DEAD="die",t.TOMB="die_boss"}(a||(a={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.tomb=null,e.body=null,e.stats=null,e.healthBar=null,e.hitPoint=null,e.lightball=null,e.timerWaiting=new c.default,e.lightballs=[],e}return i(e,t),e.prototype.start=function(){this.spine.setCompleteListener(this.OnAnimationComplete.bind(this)),this.spine.setEventListener(this.OnAnimationEvent.bind(this)),this.tomb.setCompleteListener(this.OnAnimationComplete.bind(this)),this.Init()},e.prototype.update=function(t){switch(this.state){case r.INIT:this.IsDangerous()&&this.SetState(r.IDLE);break;case r.IDLE:this.timerWaiting.Update(t),this.timerWaiting.IsDone()&&(this.IsDangerous()?this.SetState(r.DISAPPEAR):this.SetState(r.CHARGE));break;case r.WAITING:this.timerWaiting.Update(t),this.timerWaiting.JustFinished()&&this.SetState(this.nextState);break;case r.APPEAR:case r.DISAPPEAR:case r.CHARGE:case r.ATTACK:}},e.prototype.SetState=function(t,e){switch(void 0===e&&(e=null),this.state=t,this.state){case r.INIT:this.spine.node.active=!0,this.tomb.node.active=!1,this.healthBar.SetHealthMax(this.stats.hp);break;case r.IDLE:this.SetAnim(a.IDLE,!0);break;case r.APPEAR:this.body.enabled=!0,this.node.setPosition(this.GetTeleportPosition()),this.SetAnim(a.TELEPORT_APPEAR,!1);break;case r.DISAPPEAR:this.body.enabled=!1,this.SetAnim(a.TELEPORT_DISAPPEAR,!1),this.Waiting(2,r.APPEAR);break;case r.CHARGE:this.SetAnim(a.CHARGE,!0),this.Waiting(.5,r.ATTACK);break;case r.ATTACK:this.FadeToCharacter(this.target),this.Attack(),this.Waiting(2,r.IDLE);break;case r.DEAD:this.SetAnim(a.DEAD,!1)}},e.prototype.Init=function(){this.SetState(r.INIT)},e.prototype.Idle=function(){this.SetState(r.IDLE)},e.prototype.Waiting=function(t,e){this.timerWaiting.SetDuration(t),this.nextState=e,this.SetState(r.WAITING)},e.prototype.Attack=function(){var t=null,e=this.lightballs.filter(function(t){return!t.active});0==e.length?(t=cc.instantiate(this.lightball),this.lightballs.push(t)):(t=e[0]).active=!0;var n=t.getComponent(h.default);t.parent=this.node.parent,n.Spawn(this.node.position.add(this.hitPoint.position.multiply(cc.v3(Math.sign(this.spine.node.scaleX),1,0))),this.target.GetCenterPoint(),10),this.SetAnim(a.ATTACK,!1)},e.prototype.Hurt=function(t){this.stats.hp-=20,this.stats.hp<=0?(this.stats.hp=0,this.SetState(r.DEAD)):(this.SetAnim(a.HURT,!1),this.Waiting(.5,r.IDLE)),this.healthBar.SetHealth(this.stats.hp),l.EventMgr.instance.emit(s.GameEvent.ENEMY,{type:s.EnemyEvent.HURT,damage:t,position:cc.v3(this.node.position.x+s.RandomInt(-this.body.size.width/2,this.body.size.width/2),this.node.position.y+s.RandomInt(this.body.size.height/2,3*this.body.size.height/4),0)})},e.prototype.GetTeleportPosition=function(){var t=cc.Camera.main.node.position,e=cc.v3();cc.Vec3.subtract(e,this.target.node.position,t);var n=180*Math.atan2(e.y,e.x)/Math.PI+180+s.RandomInt(-50,50),i=cc.winSize.width/2-50,o=t.x+Math.cos(n*Math.PI/180)*i,r=t.y+Math.sin(n*Math.PI/180)*i;return cc.v3(o,r,0)},e.prototype.GetHitDamage=function(t){var e=t.getComponent(u.default);return s.RandomInt(e.damageMin,e.damageMax)},e.prototype.FadeToCharacter=function(t){var e=this.node.position.x<t.node.position.x?-1:1;this.SetDir(e)},e.prototype.IsIdle=function(){return this.state==r.IDLE},e.prototype.IsDead=function(){return this.state==r.DEAD},e.prototype.IsDisappear=function(){return this.nextState==r.APPEAR},e.prototype.IsDangerous=function(){return cc.Vec3.distance(this.target.node.position,this.node.position)<s.default.BOSS_VLAD_DANGEROUS_DISTANCE},e.prototype.IsInLimitZone=function(){return this.limitZone.contains(cc.v2(this.node.position.x,this.node.position.y))},e.prototype.IsBoss=function(){return!0},e.prototype.SetAnim=function(t,e,n){void 0===n&&(n=!1),(n||this.spine.animation!=t)&&this.spine.setAnimation(0,t,e)},e.prototype.SetDir=function(t){this.spine.node.setScale(t*this.spine.node.scaleY,this.spine.node.scaleY)},e.prototype.SetLimitZone=function(t){this.limitZone=t},e.prototype.OnAnimationComplete=function(t){switch(t.animation.name){case a.TELEPORT_APPEAR:this.SetState(r.IDLE);break;case a.TELEPORT_DISAPPEAR:break;case a.ATTACK:case a.HURT:this.SetAnim(a.IDLE,!0);break;case a.DEAD:this.spine.node.active=!1,this.tomb.node.active=!0,this.tomb.setAnimation(0,a.TOMB,!1);break;case a.TOMB:this.node.active=!1,l.EventMgr.instance.emit(s.GameEvent.ENEMY,{type:s.EnemyEvent.DEAD})}},e.prototype.OnAnimationEvent=function(t){console.log(t.animation.name)},e.prototype.onCollisionEnter=function(t,e){"Hit"==t.node.name&&(this.IsDead()||(t.node.active=!1,this.Hurt(this.GetHitDamage(t.node.parent.parent))))},e.prototype.Patrol=function(){},e.prototype.Chase=function(){},e.prototype.HasTarget=function(){return!0},e.prototype.IsReadyForAttack=function(){return!1},e.prototype.Thinking=function(){},o([m({type:sp.Skeleton})],e.prototype,"spine",void 0),o([m({type:sp.Skeleton})],e.prototype,"tomb",void 0),o([m({type:cc.BoxCollider})],e.prototype,"body",void 0),o([m({type:u.default})],e.prototype,"stats",void 0),o([m({type:p.default})],e.prototype,"healthBar",void 0),o([m({type:cc.Node})],e.prototype,"hitPoint",void 0),o([m({type:cc.Prefab})],e.prototype,"lightball",void 0),e=o([f],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../Defines":"Defines","../HealthBar":"HealthBar","../core/EventMgr":"EventMgr","../core/Timer":"Timer","./LightBall":"LightBall","./Stats":"Stats"}],"fingerprint2.min":[function(t,e,n){"use strict";cc._RF.push(e,"93cf0pkPcpEvrZVLPwpIiy2","fingerprint2.min"),function(t,n,i){"undefined"!=typeof window&&"function"==typeof define&&define.amd?define(i):void 0!==e&&e.exports?e.exports=i():n.exports?n.exports=i():n.Fingerprint2=i()}(0,void 0,function(){var t=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},e=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},i=function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},o=function(t,e){return[t[0]^e[0],t[1]^e[1]]},r=function(t){return t=o(t,[0,t[0]>>>1]),t=e(t,[4283543511,3981806797]),t=o(t,[0,t[0]>>>1]),t=e(t,[3301882366,444984403]),o(t,[0,t[0]>>>1])},a=function(a,s){s=s||0;for(var c=(a=a||"").length%16,l=a.length-c,h=[0,s],u=[0,s],p=[0,0],d=[0,0],f=[2277735313,289559509],m=[1291169091,658871167],y=0;y<l;y+=16)p=[255&a.charCodeAt(y+4)|(255&a.charCodeAt(y+5))<<8|(255&a.charCodeAt(y+6))<<16|(255&a.charCodeAt(y+7))<<24,255&a.charCodeAt(y)|(255&a.charCodeAt(y+1))<<8|(255&a.charCodeAt(y+2))<<16|(255&a.charCodeAt(y+3))<<24],d=[255&a.charCodeAt(y+12)|(255&a.charCodeAt(y+13))<<8|(255&a.charCodeAt(y+14))<<16|(255&a.charCodeAt(y+15))<<24,255&a.charCodeAt(y+8)|(255&a.charCodeAt(y+9))<<8|(255&a.charCodeAt(y+10))<<16|(255&a.charCodeAt(y+11))<<24],p=e(p,f),p=n(p,31),p=e(p,m),h=o(h,p),h=n(h,27),h=t(h,u),h=t(e(h,[0,5]),[0,1390208809]),d=e(d,m),d=n(d,33),d=e(d,f),u=o(u,d),u=n(u,31),u=t(u,h),u=t(e(u,[0,5]),[0,944331445]);switch(p=[0,0],d=[0,0],c){case 15:d=o(d,i([0,a.charCodeAt(y+14)],48));case 14:d=o(d,i([0,a.charCodeAt(y+13)],40));case 13:d=o(d,i([0,a.charCodeAt(y+12)],32));case 12:d=o(d,i([0,a.charCodeAt(y+11)],24));case 11:d=o(d,i([0,a.charCodeAt(y+10)],16));case 10:d=o(d,i([0,a.charCodeAt(y+9)],8));case 9:d=o(d,[0,a.charCodeAt(y+8)]),d=e(d,m),d=n(d,33),d=e(d,f),u=o(u,d);case 8:p=o(p,i([0,a.charCodeAt(y+7)],56));case 7:p=o(p,i([0,a.charCodeAt(y+6)],48));case 6:p=o(p,i([0,a.charCodeAt(y+5)],40));case 5:p=o(p,i([0,a.charCodeAt(y+4)],32));case 4:p=o(p,i([0,a.charCodeAt(y+3)],24));case 3:p=o(p,i([0,a.charCodeAt(y+2)],16));case 2:p=o(p,i([0,a.charCodeAt(y+1)],8));case 1:p=o(p,[0,a.charCodeAt(y)]),p=e(p,f),p=n(p,31),p=e(p,m),h=o(h,p)}return h=o(h,[0,a.length]),u=o(u,[0,a.length]),h=t(h,u),u=t(u,h),h=r(h),u=r(u),h=t(h,u),u=t(u,h),("00000000"+(h[0]>>>0).toString(16)).slice(-8)+("00000000"+(h[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},s={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},c=function(t,e){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e);else if(t.length===+t.length)for(var n=0,i=t.length;n<i;n++)e(t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e(t[o],o,t)},l=function(t,e){var n=[];return null==t?n:Array.prototype.map&&t.map===Array.prototype.map?t.map(e):(c(t,function(t,i,o){n.push(e(t,i,o))}),n)},h=function(t){var e=[window.screen.width,window.screen.height];return t.screen.detectScreenOrientation&&e.sort().reverse(),e},u=function(t){if(window.screen.availWidth&&window.screen.availHeight){var e=[window.screen.availHeight,window.screen.availWidth];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}return t.NOT_AVAILABLE},p=function(t){if(null==navigator.plugins)return t.NOT_AVAILABLE;for(var e=[],n=0,i=navigator.plugins.length;n<i;n++)navigator.plugins[n]&&e.push(navigator.plugins[n]);return f(t)&&(e=e.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})),l(e,function(t){var e=l(t,function(t){return[t.type,t.suffixes]});return[t.name,t.description,e]})},d=function(t){var e=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?e=l(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(e){try{return new window.ActiveXObject(e),e}catch(e){return t.ERROR}}):e.push(t.NOT_AVAILABLE),navigator.plugins&&(e=e.concat(p(t))),e},f=function(t){for(var e=!1,n=0,i=t.plugins.sortPluginsFor.length;n<i;n++){var o=t.plugins.sortPluginsFor[n];if(navigator.userAgent.match(o)){e=!0;break}}return e},m=function(t){try{return!!window.sessionStorage}catch(e){return t.ERROR}},y=function(t){try{return!!window.localStorage}catch(e){return t.ERROR}},g=function(t){try{return!!window.indexedDB}catch(e){return t.ERROR}},A=function(t){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:t.NOT_AVAILABLE},v=function(t){return navigator.cpuClass||t.NOT_AVAILABLE},E=function(t){return navigator.platform?navigator.platform:t.NOT_AVAILABLE},T=function(t){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:t.NOT_AVAILABLE},S=function(){var t,e=0;void 0!==navigator.maxTouchPoints?e=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return[e,t,"ontouchstart"in window]},_=function(t){var e=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var i=n.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),e.push("canvas winding:"+(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",t.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),n.toDataURL&&e.push("canvas fp:"+n.toDataURL()),e},C=function(){var t,e=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"};if(!(t=N()))return null;var n=[],i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i);var o=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),i.itemSize=3,i.numItems=3;var r=t.createProgram(),a=t.createShader(t.VERTEX_SHADER);t.shaderSource(a,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(a);var s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(s),t.attachShader(r,a),t.attachShader(r,s),t.linkProgram(r),t.useProgram(r),r.vertexPosAttrib=t.getAttribLocation(r,"attrVertex"),r.offsetUniform=t.getUniformLocation(r,"uniformOffset"),t.enableVertexAttribArray(r.vertexPosArray),t.vertexAttribPointer(r.vertexPosAttrib,i.itemSize,t.FLOAT,!1,0,0),t.uniform2f(r.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,i.numItems);try{n.push(t.canvas.toDataURL())}catch(e){}n.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),n.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),n.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),n.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),n.push("webgl max anisotropy:"+function(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var n=t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(t)),n.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+e(t.getParameter(t.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+t.getParameter(t.RED_BITS)),n.push("webgl renderer:"+t.getParameter(t.RENDERER)),n.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),n.push("webgl vendor:"+t.getParameter(t.VENDOR)),n.push("webgl version:"+t.getParameter(t.VERSION));try{var l=t.getExtension("WEBGL_debug_renderer_info");l&&(n.push("webgl unmasked vendor:"+t.getParameter(l.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+t.getParameter(l.UNMASKED_RENDERER_WEBGL)))}catch(e){}return t.getShaderPrecisionFormat&&c(["FLOAT","INT"],function(e){c(["VERTEX","FRAGMENT"],function(i){c(["HIGH","MEDIUM","LOW"],function(o){c(["precision","rangeMin","rangeMax"],function(r){var a=t.getShaderPrecisionFormat(t[i+"_SHADER"],t[o+"_"+e])[r];"precision"!==r&&(r="precision "+r);var s=["webgl ",i.toLowerCase()," shader ",o.toLowerCase()," ",e.toLowerCase()," ",r,":",a].join("");n.push(s)})})})}),n},b=function(){try{var t=N(),e=t.getExtension("WEBGL_debug_renderer_info");return t.getParameter(e.UNMASKED_VENDOR_WEBGL)+"~"+t.getParameter(e.UNMASKED_RENDERER_WEBGL)}catch(t){return null}},I=function(){var t=document.createElement("div");t.innerHTML="&nbsp;";var e=!(t.className="adsbox");try{document.body.appendChild(t),e=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(t)}catch(t){e=!1}return e},P=function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},M=function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.oscpu,i=navigator.platform.toLowerCase();if(t=0<=e.indexOf("windows phone")?"Windows Phone":0<=e.indexOf("win")?"Windows":0<=e.indexOf("android")?"Android":0<=e.indexOf("linux")||0<=e.indexOf("cros")?"Linux":0<=e.indexOf("iphone")||0<=e.indexOf("ipad")?"iOS":0<=e.indexOf("mac")?"Mac":"Other",("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&"Windows Phone"!==t&&"Android"!==t&&"iOS"!==t&&"Other"!==t)return!0;if(void 0!==n){if(0<=(n=n.toLowerCase()).indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t)return!0;if(0<=n.indexOf("linux")&&"Linux"!==t&&"Android"!==t)return!0;if(0<=n.indexOf("mac")&&"Mac"!==t&&"iOS"!==t)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===t))return!0}return 0<=i.indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t||(0<=i.indexOf("linux")||0<=i.indexOf("android")||0<=i.indexOf("pike"))&&"Linux"!==t&&"Android"!==t||(0<=i.indexOf("mac")||0<=i.indexOf("ipad")||0<=i.indexOf("ipod")||0<=i.indexOf("iphone"))&&"Mac"!==t&&"iOS"!==t||(i.indexOf("win")<0&&i.indexOf("linux")<0&&i.indexOf("mac")<0&&i.indexOf("iphone")<0&&i.indexOf("ipad")<0)!=("Other"===t)||void 0===navigator.plugins&&"Windows"!==t&&"Windows Phone"!==t},O=function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"==(t=0<=e.indexOf("firefox")?"Firefox":0<=e.indexOf("opera")||0<=e.indexOf("opr")?"Opera":0<=e.indexOf("chrome")?"Chrome":0<=e.indexOf("safari")?"Safari":0<=e.indexOf("trident")?"Internet Explorer":"Other")||"Safari"===t||"Opera"===t)&&"20030107"!==n)return!0;var i,o=eval.toString().length;if(37===o&&"Safari"!==t&&"Firefox"!==t&&"Other"!==t)return!0;if(39===o&&"Internet Explorer"!==t&&"Other"!==t)return!0;if(33===o&&"Chrome"!==t&&"Opera"!==t&&"Other"!==t)return!0;try{throw"a"}catch(t){try{t.toSource(),i=!0}catch(t){i=!1}}return i&&"Firefox"!==t&&"Other"!==t},D=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},R=function(){if(!D())return!1;var t=N();return!!window.WebGLRenderingContext&&!!t},w=function(t,e){var n="___fp_swf_loaded";window[n]=function(e){t(e)};var i,o=e.fonts.swfContainerId;(i=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(i);var r={onReady:n};window.swfobject.embedSWF(e.fonts.swfPath,o,"1","1","9.0.0",!1,r,{allowScriptAccess:"always",menu:"false"},{})},N=function(){var t=document.createElement("canvas"),e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){}return e||(e=null),e},x=[{key:"userAgent",getData:function(t){t(navigator.userAgent)}},{key:"webdriver",getData:function(t,e){t(null==navigator.webdriver?e.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(t,e){t(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||e.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(t,e){t(window.screen.colorDepth||e.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(t,e){t(navigator.deviceMemory||e.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(t,e){t(window.devicePixelRatio||e.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(t,e){t(A(e))}},{key:"screenResolution",getData:function(t,e){t(h(e))}},{key:"availableScreenResolution",getData:function(t,e){t(u(e))}},{key:"timezoneOffset",getData:function(t){t((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(t,e){window.Intl&&window.Intl.DateTimeFormat?t((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):t(e.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(t,e){t(m(e))}},{key:"localStorage",getData:function(t,e){t(y(e))}},{key:"indexedDb",getData:function(t,e){t(g(e))}},{key:"addBehavior",getData:function(t){t(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(t){t(!!window.openDatabase)}},{key:"cpuClass",getData:function(t,e){t(v(e))}},{key:"platform",getData:function(t,e){t(E(e))}},{key:"doNotTrack",getData:function(t,e){t(T(e))}},{key:"plugins",getData:function(t,e){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?e.plugins.excludeIE?t(e.EXCLUDED):t(d(e)):t(p(e))}},{key:"canvas",getData:function(t,e){D()?t(_(e)):t(e.NOT_AVAILABLE)}},{key:"webgl",getData:function(t,e){R()?t(C()):t(e.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(t){R()?t(b()):t()}},{key:"adBlock",getData:function(t){t(I())}},{key:"hasLiedLanguages",getData:function(t){t(P())}},{key:"hasLiedResolution",getData:function(t){t(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(t){t(M())}},{key:"hasLiedBrowser",getData:function(t){t(O())}},{key:"touchSupport",getData:function(t){t(S())}},{key:"fonts",getData:function(t,e){var n=["monospace","sans-serif","serif"],i=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];e.fonts.extendedJsFonts&&(i=i.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),i=(i=i.concat(e.fonts.userDefinedFonts)).filter(function(t,e){return i.indexOf(t)===e});var o=document.getElementsByTagName("body")[0],r=document.createElement("div"),a=document.createElement("div"),s={},c={},l=function(){var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="72px",t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML="mmmmmmmmmmlli",t},h=function(t){for(var e=!1,i=0;i<n.length;i++)if(e=t[i].offsetWidth!==s[n[i]]||t[i].offsetHeight!==c[n[i]])return e;return e},u=function(){for(var t=[],e=0,i=n.length;e<i;e++){var o=l();o.style.fontFamily=n[e],r.appendChild(o),t.push(o)}return t}();o.appendChild(r);for(var p=0,d=n.length;p<d;p++)s[n[p]]=u[p].offsetWidth,c[n[p]]=u[p].offsetHeight;var f=function(){for(var t,e,o,r={},s=0,c=i.length;s<c;s++){for(var h=[],u=0,p=n.length;u<p;u++){var d=(t=i[s],e=n[u],o=void 0,(o=l()).style.fontFamily="'"+t+"',"+e,o);a.appendChild(d),h.push(d)}r[i[s]]=h}return r}();o.appendChild(a);for(var m=[],y=0,g=i.length;y<g;y++)h(f[i[y]])&&m.push(i[y]);o.removeChild(a),o.removeChild(r),t(m)},pauseBefore:!0},{key:"fontsFlash",getData:function(t,e){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?e.fonts.swfPath?void w(function(e){t(e)},e):t("missing options.fonts.swfPath"):t("flash not installed"):t("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(t,e){var n=e.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return t(e.EXCLUDED);var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==i)return t(e.NOT_AVAILABLE);var o=new i(1,44100,44100),r=o.createOscillator();r.type="triangle",r.frequency.setValueAtTime(1e4,o.currentTime);var a=o.createDynamicsCompressor();c([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(t){void 0!==a[t[0]]&&"function"==typeof a[t[0]].setValueAtTime&&a[t[0]].setValueAtTime(t[1],o.currentTime)}),r.connect(a),a.connect(o.destination),r.start(0),o.startRendering();var s=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),o.oncomplete=function(){},o=null,t("audioTimeout")},n.timeout);o.oncomplete=function(e){var n;try{clearTimeout(s),n=e.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(t,e){return t+Math.abs(e)},0).toString(),r.disconnect(),a.disconnect()}catch(e){return void t(e)}t(n)}}},{key:"enumerateDevices",getData:function(t,e){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return t(e.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(e){t(e.map(function(t){return"id="+t.deviceId+";gid="+t.groupId+";"+t.kind+";"+t.label}))}).catch(function(e){t(e)})}}],L=function(t){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return L.get=function(t,e){e?t||(t={}):(e=t,t={}),function(t,e){var n,i;if(null!=e)for(i in e)null==(n=e[i])||Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n)}(t,s),t.components=t.extraComponents.concat(x);var n={data:[],addPreprocessedComponent:function(e,i){"function"==typeof t.preprocessor&&(i=t.preprocessor(e,i)),n.data.push({key:e,value:i})}},i=-1;(function o(r){if((i+=1)>=t.components.length)e(n.data);else{var a=t.components[i];if(t.excludes[a.key])o(!1);else{if(!r&&a.pauseBefore)return i-=1,void setTimeout(function(){o(!0)},1);try{a.getData(function(t){n.addPreprocessedComponent(a.key,t),o(!1)},t)}catch(r){n.addPreprocessedComponent(a.key,String(r)),o(!1)}}}})(!1)},L.getPromise=function(t){return new Promise(function(e,n){L.get(t,e)})},L.getV18=function(t,e){return null==e&&(e=t,t={}),L.get(t,function(n){for(var i=[],o=0;o<n.length;o++){var r=n[o];if(r.value===(t.NOT_AVAILABLE||"not available"))i.push({key:r.key,value:"unknown"});else if("plugins"===r.key)i.push({key:"plugins",value:l(r.value,function(t){var e=l(t[2],function(t){return t.join?t.join("~"):t}).join(",");return[t[0],t[1],e].join("::")})});else if(-1!==["canvas","webgl"].indexOf(r.key))i.push({key:r.key,value:r.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(r.key)){if(!r.value)continue;i.push({key:r.key,value:1})}else r.value?i.push(r.value.join?{key:r.key,value:r.value.join(";")}:r):i.push({key:r.key,value:r.value})}var s=a(l(i,function(t){return t.value}).join("~~~"),31);e(s,i)})},L.x64hash128=a,L.VERSION="2.1.0",L}),cc._RF.pop()},{}]},{},["CinematicMgr","CinematicScript","CinematicText","Character","Damage","Defines","EnemyMgr","GameMgr","HealthBar","HomeMgr","MapMgr","Test","EventMgr","Input","Leaderboard","LeaderboardItem","PlayerProfile","Timer","Enemy","LightBall","Stats","Vald","Utils","fingerprint2.min","Ingame","MainMenu"]);