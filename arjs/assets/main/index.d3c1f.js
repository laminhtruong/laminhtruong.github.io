System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ARCocos.ts","./VideoCamera.ts"],(function(e){"use strict";var t,r,a,i,o,n,c,l,s,u,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.defineProperty},function(e){n=e.cclegacy,c=e._decorator,l=e.Camera,s=e.Node,u=e.Component},function(e){p=e.default},function(e){d=e.default}],execute:function(){var f,m,v,y,h,g,M;n._RF.push({},"64116W9IYVC6LO+rO7s9Zh2","GameMgr",void 0);var b=c.ccclass,w=c.property;e("GameMgr",(f=b("GameMgr"),m=w(l),v=w(s),f((g=t((h=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,a(i(t),"camera",g,i(t)),a(i(t),"root",M,i(t)),o(i(t),"videoCamera",new d),o(i(t),"video",void 0),o(i(t),"markerMatrix",new Float64Array(12)),o(i(t),"worldMatrix",new Float64Array(16)),t}r(t,e);var n=t.prototype;return n.start=function(){var e=this;this.videoCamera.Setup().then((function(t){p.Init(t).then((function(t){p.SetMarker(e.camera.node,"test.patt")})),e.video=t,e.video.play()}))},n.update=function(e){p.IsReady()&&this.video&&p.Update(this.video)},t}(u)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(h.prototype,"root",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=h))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/VideoCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,r=e.view}],execute:function(){n._RF.push({},"9578axkwt9GiKmMk2GWznXK","VideoCamera",void 0);e("default",function(){function e(){}var n=e.prototype;return n.Setup=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return t=document.getElementById("video"),n={audio:!1,video:{facingMode:{exact:"environment"},width:{ideal:640},height:{ideal:480}}},e.next=7,navigator.mediaDevices.getUserMedia(n);case 7:return r=e.sent,t.srcObject=r,t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline","playsinline"),t.setAttribute("muted",""),t.style.width="640px",t.style.height="480px",e.abrupt("return",new Promise((function(e,n){t.onloadedmetadata=function(){i.Resize(t),e(t)}})));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.Init=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Setup();case 2:return(t=e.sent).play(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.Resize=function(e){var t=window.innerWidth,n=window.innerHeight,i=e.videoWidth/e.videoHeight;if(t/n<i){var a=i*n;e.style.width=a+"px",e.style.marginLeft=-(a-t)/2+"px",e.style.height=n+"px",e.style.marginTop="0px",r.setFrameSize(a,n)}else{var s=1/(i/t);e.style.height=s+"px",e.style.marginTop=-(s-n)/2+"px",e.style.width=t+"px",e.style.marginLeft="0px",r.setFrameSize(t,s)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ARCocos.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,o,a,n,i,s;return{setters:[function(t){r=t.defineProperty,e=t.asyncToGenerator},function(t){o=t.cclegacy,a=t.Mat4,n=t.Quat,i=t.Vec3,s=t.view}],execute:function(){o._RF.push({},"f6138XDpZJACKkOEsWmI8HI","ARCocos",void 0);t("default",new(function(){function t(){r(this,"arController",void 0),r(this,"projectionAxisTransformMatrix",new a),r(this,"markerCallback",void 0),r(this,"object3d",void 0)}var o=t.prototype;return o.Init=function(t){var r=this;return new Promise((function(t,o){var n=r.GetDefaultMat4(),i=r.GetDefaultMat4();a.rotateY(n,r.GetDefaultMat4(),Math.PI),a.rotateZ(i,r.GetDefaultMat4(),Math.PI),r.projectionAxisTransformMatrix.multiply(n),r.projectionAxisTransformMatrix.multiply(i);var l=new ARCameraParam;l.onload=e(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.arController=new ARController(s.getFrameSize().width,s.getFrameSize().height,l),r.arController.setPatternDetectionMode(window.artoolkit.AR_TEMPLATE_MATCHING_COLOR),r.arController.setMatrixCodeType(window.artoolkit.AR_MATRIX_CODE_3x3),r.arController.setPattRatio(.5),r.arController.addEventListener("getMarker",r.OnMarker.bind(r),!0),t("ok");case 6:case"end":return e.stop()}}),e)}))),l.load("camera_para.dat")}))},o.Update=function(t){this.arController.process(t)},o.SetMarker=function(t,r){this.arController.loadMarker(r,(function(t){})),this.object3d=t},o.IsReady=function(){return this.arController},o.GetDefaultMat4=function(){return new a(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},o.GetProjectionMatrix=function(){var t=this.arController.getCameraMatrix(),r=new a;return a.fromArray(r,t),r.multiply(this.projectionAxisTransformMatrix),r},o.OnMarker=function(t){var r=new a;a.fromArray(r,t.data.matrix),r=this.projectionAxisTransformMatrix.clone().multiply(r);var e=this.GetDefaultMat4();a.rotateX(e,this.GetDefaultMat4(),Math.PI/2),r.multiply(e);var o=new n,s=new i,l=new i,c=new a;a.invert(c,r),a.toRTS(c,o,s,l),this.object3d.setPosition(s),this.object3d.setRotation(o),this.object3d.setScale(l)},t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ARCocos.ts","./VideoCamera.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});