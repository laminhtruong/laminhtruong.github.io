System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./API.ts","./EventMgr.ts","./Loading.ts","./Defines.ts","./Login.ts","./Main.ts"],(function(e){"use strict";var t,n,a,i,o,s,r,c,l,f,u,h,d,g,S,p,I,v,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.defineProperty},function(e){s=e.cclegacy,r=e._decorator,c=e.sys,l=e.Component},function(e){f=e.default},function(e){u=e.default},function(e){h=e.Loading},function(e){d=e.Profiles,g=e.UserInfos,S=e.EventName,p=e.ActionMain,I=e.ActionLogin},function(e){v=e.Login},function(e){G=e.Main}],execute:function(){var T,M,N,O,m,P,b,_,L;s._RF.push({},"2df67cPW6dPX48dJVTWAnOy","GameMgr",void 0);var w,k=r.ccclass,A=r.property;!function(e){e[e.INIT=0]="INIT",e[e.GET_PROGRAMS=1]="GET_PROGRAMS",e[e.GET_USER_INFO=2]="GET_USER_INFO",e[e.GET_TURNS=3]="GET_TURNS",e[e.LOGIN=4]="LOGIN",e[e.MAIN=5]="MAIN",e[e.GIFT=6]="GIFT",e[e.BID=7]="BID"}(w||(w={}));e("GameMgr",(T=k("GameMgr"),M=A({type:G}),N=A({type:v}),O=A({type:h}),T((b=t((P=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,a(i(t),"main",b,i(t)),a(i(t),"login",_,i(t)),a(i(t),"loading",L,i(t)),o(i(t),"state",void 0),o(i(t),"profiles",new d),o(i(t),"userinfos",new g),o(i(t),"programs",null),t}n(t,e);var s=t.prototype;return s.start=function(){u.GetInstance().on(S.LOGIN,this.OnLogin,this),u.GetInstance().on(S.MAIN,this.OnMainAction,this),this.SetState(w.INIT)},s.update=function(e){switch(this.state){case w.INIT:}},s.SetState=function(e){var t=this;switch(this.state=e,this.state){case w.INIT:this.loading.node.active=!0,this.LoadProfile(),this.SetState(w.GET_PROGRAMS);break;case w.GET_PROGRAMS:f.GetPrograms().then((function(e){var n=t.ParseData(e);n instanceof Object?(t.programs=n,""!=t.profiles.token?t.SetState(w.GET_USER_INFO):t.SetState(w.LOGIN)):(t.loading.node.active=!1,t.ShowMessage(n))})).catch((function(e){t.loading.node.active=!1,t.ShowMessage(e)}));break;case w.LOGIN:this.loading.node.active=!1,this.login.node.active=!0;break;case w.GET_USER_INFO:f.GetUserInfo(this.profiles.token).then((function(e){var n=t.ParseData(e);n instanceof Object?(t.userinfos.name=n.name,t.userinfos.email=n.email,t.userinfos.image=n.image,t.SetState(w.GET_TURNS)):(t.loading.node.active=!1,t.ShowMessage(n))})).catch((function(e){t.loading.node.active=!1,t.ShowMessage(e)}));break;case w.GET_TURNS:f.GetTurns(this.profiles.token).then((function(e){var n=t.ParseData(e);n instanceof Object?(t.userinfos.turns=n.currentTurn,t.SetState(w.MAIN)):(t.loading.node.active=!1,t.ShowMessage(n))})).catch((function(e){t.loading.node.active=!1,t.ShowMessage(e)}));break;case w.MAIN:this.login.node.active=!1,this.loading.node.active=!1,this.main.node.active=!0;break;case w.BID:this.Bid(1200)}},s.TakeAttendance=function(){var e=this,t=this.programs.currentProgram.id;this.profiles.attendance.some((function(e){return e==t}))?this.SetState(w.BID):(this.loading.node.active=!0,f.TakeAttendance(t,this.profiles.token).then((function(n){e.ParseData(n)instanceof Object?(e.profiles.attendance.push(t),e.SaveProfiles(),e.SetState(w.GIFT)):(e.profiles.attendance.push(t),e.SaveProfiles(),e.SetState(w.BID)),e.loading.node.active=!1})).catch((function(t){e.loading.node.active=!1})))},s.Bid=function(e){var t=this,n=this.programs.currentProgram.id;f.Bid(n,e,this.profiles.token).then((function(e){var n=t.ParseData(e);n instanceof Object?t.userinfos.turns=n.currentTurn:t.ShowMessage(n)})).catch((function(e){t.ShowMessage(e)}))},s.LoadProfile=function(){try{var e=JSON.parse(c.localStorage.getItem("profiles"));null!=e&&(this.profiles=e)}catch(e){}},s.SaveProfiles=function(){c.localStorage.setItem("profiles",JSON.stringify(this.profiles))},s.ShowMessage=function(e){console.log("Show Message "+e)},s.ParseData=function(e){try{return 200==(e=JSON.parse(e)).code?e.data:e.message}catch(e){return"Data Invalid"}},s.OnMainAction=function(e){switch(e.action){case p.PLAY:this.TakeAttendance();break;case p.LOGIN:}},s.OnLogin=function(e){var t=this;switch(e.action){case I.LOGIN:this.loading.node.active=!0;break;case I.LOGIN_SUCCESS:var n=e.data;f.Login(n.token,n.platform).then((function(e){var n=t.ParseData(e);n instanceof Object?(t.profiles.token=n.token,t.SaveProfiles(),t.SetState(w.GET_USER_INFO)):(t.loading.node.active=!1,t.ShowMessage(n))})).catch((function(e){t.loading.node.active=!1,t.ShowMessage(e)}));break;case I.LOGIN_FAIL:this.loading.node.active=!1}},t}(l)).prototype,"main",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(P.prototype,"login",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(P.prototype,"loading",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts","./Utils.ts"],(function(t){"use strict";var n,e,i,r,o,a,c,s,u,p,l,f,m,d,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.defineProperty},function(t){a=t.cclegacy,c=t._decorator,s=t.Sprite,u=t.Component},function(t){p=t.default},function(t){l=t.EventName,f=t.ActionMain},function(t){m=t.GetSpriteFromUrl,d=t.CopyClipboard,h=t.StringDateFromTimestamp}],execute:function(){var y,g,v,M,b;a._RF.push({},"418ddTz9+lC7bF5livsSJvo","Main",void 0);var A=c.ccclass,D=c.property;t("Main",(y=A("Main"),g=D({type:s}),y((b=n((M=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return n=t.call.apply(t,[this].concat(a))||this,i(r(n),"spriteAuction",b,r(n)),o(r(n),"timeStart",0),o(r(n),"timeEnd",0),n}e(n,t);var a=n.prototype;return a.start=function(){var t=this;m("https://laminhtruong.github.io/flappy-bird/splash.85cfd.png").then((function(n){t.spriteAuction.spriteFrame=n})).catch((function(t){})),d("emtenteo")},a.update=function(t){this.UpdateCountDown()},a.SetInfomation=function(t){this.timeStart=h(t.createdTime),this.timeEnd=h(t.expiredTime)},a.UpdateCountDown=function(){this.timeEnd,(new Date).getTime()},a.Play=function(){p.GetInstance().emit(l.MAIN,{action:f.PLAY})},a.Login=function(){p.GetInstance().emit(l.MAIN,{action:f.LOGIN})},n}(u)).prototype,"spriteAuction",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=M))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,t;return{setters:[function(n){i=n.defineProperty},function(n){t=n.cclegacy}],execute:function(){var e,o,s;n({ActionLogin:void 0,ActionMain:void 0,EventName:void 0}),t._RF.push({},"71218fYhlJHzoDWjLv2DGMl","Defines",void 0),function(n){n.LOGIN="login",n.MAIN="main"}(e||(e=n("EventName",{}))),function(n){n[n.LOGIN=0]="LOGIN",n[n.LOGIN_SUCCESS=1]="LOGIN_SUCCESS",n[n.LOGIN_FAIL=2]="LOGIN_FAIL"}(o||(o=n("ActionLogin",{}))),function(n){n[n.PLAY=0]="PLAY",n[n.LOGIN=1]="LOGIN"}(s||(s=n("ActionMain",{})));n("Profiles",(function(){i(this,"token",""),i(this,"attendance",[])})),n("UserInfos",(function(){i(this,"name",""),i(this,"email",""),i(this,"image",""),i(this,"turns",0)}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Login.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./Defines.ts"],(function(o){"use strict";var t,e,n,i,a,s,c,g,l;return{setters:[function(o){t=o.inheritsLoose,e=o.defineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,a=o._decorator,s=o.Component},function(o){c=o.default},function(o){g=o.EventName,l=o.ActionLogin}],execute:function(){var u;i._RF.push({},"88819R1zIVFQawyuDuWo1i2","Login",void 0);var r=a.ccclass;a.property,o("Login",r("Login")(u=function(o){function i(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=o.call.apply(o,[this].concat(a))||this,e(n(t),"fbSDK",null),e(n(t),"googleApi",null),e(n(t),"googleAuth",null),e(n(t),"googleUser",null),t}t(i,o);var a=i.prototype;return a.onLoad=function(){this.fbSDK=window.FB,this.googleApi=window.gapi,this.googleApi.load("auth2",this.GoogleApiLoaded.bind(this))},a.update=function(o){},a.FacebookLogin=function(){var o=this;this.fbSDK.getLoginStatus((function(t){var e="";"connected"===t.status?(e=t.authResponse.accessToken,c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_SUCCESS,data:{platform:"facebook",token:e}})):(c.GetInstance().emit(g.LOGIN,{action:l.LOGIN,data:{platform:"facebook"}}),o.fbSDK.login((function(o){o.authResponse?(e=o.authResponse.accessToken,c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_SUCCESS,data:{platform:"facebook",token:e}})):c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_FAIL,data:{platform:"facebook"}})})))}))},a.GoogleLogin=function(){this.googleAuth&&(this.googleAuth.signIn().then((function(o){var t=o.getAuthResponse().access_token;c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_SUCCESS,data:{platform:"google",token:t}})})).catch((function(o){c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_FAIL,data:{platform:"google"}})})),c.GetInstance().emit(g.LOGIN,{action:l.LOGIN,data:{platform:"google"}}))},a.GoogleApiLoaded=function(){this.googleAuth=this.googleApi.auth2.init({client_id:"22807595564-aphe2ofiu08oo4aq01dauj5dibstl4pk.apps.googleusercontent.com",scope:"profile"}),1==this.googleAuth.isSignedIn.get()&&this.GoogleLogin()},a.GoogleSigninChanged=function(o){console.log(o)},a.GoogleUserChanged=function(o){var t=o.getAuthResponse().access_token;null!=t&&c.GetInstance().emit(g.LOGIN,{action:l.LOGIN_SUCCESS,data:{platform:"google",token:t}})},i}(s))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(e){"use strict";var t,n,r,a;return{setters:[function(e){t=e.cclegacy,n=e.assetManager,r=e.SpriteFrame,a=e.Texture2D}],execute:function(){function o(e){return e<10?"0"+e:e}e({CopyClipboard:function(e){var t=document.createElement("input");document.body.appendChild(t),t.value=e,t.focus(),t.select(),t.setSelectionRange(0,9999),document.execCommand("copy"),document.removeChild(t)},FormatTime:function(e){var t=Math.floor(e/1e3),n=3600,r=Math.floor(t/n),a=Math.floor((t-r*n)/60),i=t-r*n-60*a;return o(r)+":"+o(a)+":"+o(i)},GetSpriteFromUrl:function(e){return new Promise((function(t,o){n.loadRemote(e,(function(e,n){if(e)o(null);else{var i=new r,c=new a;c.image=n,i.texture=c,t(i)}}))}))},StringDateFromTimestamp:function(e){try{var t=e.split(" "),n=t[0].split(":"),r=t[1].split("-");return new Date(parseInt(r[2]),parseInt(r[1])-1,parseInt(r[0]),parseInt(n[0]),parseInt(n[1]),parseInt(n[2])).getTime()}catch(e){return(new Date).getTime()}},convert2Character:o}),t._RF.push({},"ceaaasKiCFOKJzHWmAeEI8E","Utils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i,r,o,a,c,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,u=t.Component}],execute:function(){var s,l,p,f,d;o._RF.push({},"f2b2fXBSjhBZ4KwKnXZ/HX5","Loading",void 0);var g=a.ccclass,y=a.property;t("Loading",(s=g("Loading"),l=y({type:c}),s((d=n((f=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(r(n),"icon",d,r(n)),n}e(n,t);var o=n.prototype;return o.start=function(){},o.update=function(t){this.icon.angle-=120*t},n}(u)).prototype,"icon",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,r,i,s;return{setters:[function(n){t=n.inheritsLoose,e=n.defineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,s=n.EventTarget}],execute:function(){i._RF.push({},"f8ad5rydN9EIZ62nOSFY4Dg","EventMgr",void 0);n("default",new(function(n){function i(){for(var t,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return t=n.call.apply(n,[this].concat(s))||this,e(r(t),"instance",null),t}return t(i,n),i.prototype.GetInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i}(s)));i._RF.pop()}}}));

System.register("chunks:///_virtual/API.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fbcf8GwQ39CFpEpDpslNfpR","API",void 0);e("default",new(function(){function e(){}var t=e.prototype;return t.Request=function(e,t,n,r){var i=this;void 0===r&&(r=null);return new Promise((function(o,u){var a=new XMLHttpRequest;a.open(e,"https://gate.dev.tripi.vn/tripi-feed"+t,!0),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("version","1.0"),a.setRequestHeader("appId","tripi-feed"),a.setRequestHeader("appHash",i.GetHash()),null!=r&&a.setRequestHeader("ge-token",r),a.onreadystatechange=function(){4==a.readyState&&(200==a.status?o(a.response):u(a.response))},a.send(n)}))},t.GetHash=function(){var e=(new Date).getTime(),t=(e=e/1e3-e/1e3%300)+":AsnasjldknsajalLASASs86876n4oadn5aod3nlNSLA",n=window.CryptoJS;return n.enc.Base64.stringify(n.SHA256(t))},t.Login=function(e,t){var n={accessToken:e,providerName:t,programCode:"auction",referralCode:""};return this.Request("post","/login/oauth2",JSON.stringify(n))},t.Bid=function(e,t,n){var r={programCode:"auction",programId:e,auctionPrice:t};return this.Request("post","/auction/bid",JSON.stringify(r),n)},t.TakeAttendance=function(e,t){return this.Request("get","/auction/take-attendance?programCode=auction&programId="+e,null,t)},t.GetReferralCode=function(e){return this.Request("get","/auction/get-referral-code",null,e)},t.GetUserInfo=function(e){return this.Request("get","/get-user-info",null,e)},t.GetTurns=function(e){return this.Request("get","/auction/get-available-turn?programCode=auction",null,e)},t.GetBiddingHistory=function(e){return this.Request("get","/auction/get-bidding-history?programCode=auction",null,e)},t.GetPrograms=function(){return this.Request("get","/auction/get-program-info?programCode=auction",null)},t.GetWinnerHistory=function(){return this.Request("get","/auction/get-winner-history?programCode=auction",null)},t.GetBiddingRecent=function(){return this.Request("get","/auction/get-recent-bidding?programCode=auction",null)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./API.ts","./EventMgr.ts","./Loading.ts","./Defines.ts","./Login.ts","./Utils.ts","./Main.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});