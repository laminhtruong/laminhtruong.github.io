System.register("chunks:///_virtual/Collectible.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Timer.ts"],(function(t){var e,i,n,s,a,r,o,c,l,p,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,o=t.SpriteFrame,c=t.Vec3,l=t.randomRangeInt,p=t.Sprite,u=t.Component},function(t){h=t.Config},function(t){d=t.Timer}],execute:function(){var f,g,m,y,D;a._RF.push({},"4dd64Mo9YBGm5Xi/+T8V3Yi","Collectible",void 0);var b=r.ccclass,v=r.property,F=function(t){return t[t.Idle=0]="Idle",t[t.Flying=1]="Flying",t}(F||{});t("Collectible",(f=b("Collectible"),g=v({type:[o]}),f((D=e((y=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"rices",D,s(e)),e.state=F.Idle,e.target=null,e.timerDisappear=new d,e}i(e,t);var a=e.prototype;return a.update=function(t){switch(this.state){case F.Idle:this.updateDisappear(t);break;case F.Flying:this.updateFlying(t)}},a.setState=function(t){switch(this.state=t,this.state){case F.Idle:this.timerDisappear.setDuration(5);break;case F.Flying:}},a.updateDisappear=function(t){this.timerDisappear.update(t),this.timerDisappear.isFinish()&&(this.node.active=!1)},a.updateFlying=function(t){var e=this.target.position,i=c.subtract(new c,e,this.node.position).normalize();i=c.multiplyScalar(new c,i,25*h.GAME_BASE_SPEED*t),this.node.setPosition(c.add(new c,this.node.position,i)),this.node.angle+=20*h.GAME_BASE_SPEED*t,c.distance(this.node.position,e)<20&&(this.node.active=!1)},a.spawn=function(t){this.node.setPosition(c.add(new c,t,new c(l(-200,200),l(-50,50),0))),this.node.getComponent(p).spriteFrame=this.rices[Math.floor(Math.random()*this.rices.length)],this.node.angle=0,this.setState(F.Idle)},a.flyTo=function(t){this.target=t,this.setState(F.Flying)},a.getTimePercent=function(){return this.timerDisappear.getTimePercent()},a.isAvailable=function(){return this.node.active&&this.state==F.Idle},e}(u)).prototype,"rices",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=y))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerAsset.ts",["cc"],(function(t){var e,s,r,n;return{setters:[function(t){e=t.cclegacy,s=t.resources,r=t.SpriteFrame,n=t.Texture2D}],execute:function(){e._RF.push({},"5f4d7nEXZVCNKCwkhfzpUoj","ControllerAsset",void 0);t("default",new(function(){function t(){this.assets={}}var e=t.prototype;return e.load=function(t){var e=this;return new Promise((function(r,n){s.load(t,(function(s,o){s?n(s):(e.assets[t]=o,r(o))}))}))},e.loadDir=function(t){var e=this;return this.assets.hasOwnProperty(t)?Promise.resolve(null):new Promise((function(r,n){s.loadDir(t,(function(s,o){if(s)n(s);else{for(var i=0;i<o.length;i++){var a=o[i].name;""==a&&(a=o[i].data.name),e.assets[t+"/"+a]=o[i]}r(o)}}))}))},e.get=function(t){return this.assets[t]?this.assets[t]:(console.error("Asset "+t+" not found"),this.assets["common/bullet_straight"])},e.getSpriteFrame=function(t){var e=new r,s=new n;return s.image=this.get("sprites/skills/"+t),e.texture=s,e},e.hasDir=function(t){return this.assets.hasOwnProperty(t)},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerCollectibles.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ControllerAsset.ts","./EventManager.ts","./Collectible.ts","./Game.ts"],(function(t){var e,n,i,o,l,r,c,s,a,u,f,h,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,c=t.Node,s=t.instantiate,a=t.Component},function(t){u=t.default},function(t){f=t.default,h=t.EventName},function(t){p=t.Collectible},function(t){y=t.Game}],execute:function(){var b,d,v,C,m,g;l._RF.push({},"ce655PmRslOD4n4tz/zCkc+","ControllerCollectibles",void 0);var E=r.ccclass,D=r.property;t("ControllerCollectibles",(b=E("ControllerCollectibles"),d=D({type:c}),b(((g=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"pet",m,o(e)),e.collectibles=[],e.startTime=0,e}n(e,t);var l=e.prototype;return l.onLoad=function(){e.instance=this},l.onEnable=function(){f.instance.on(h.EntityDead,this.onEntityDead,this),f.instance.on(h.EntityCollect,this.onEntityCollect,this)},l.onDisable=function(){f.instance.off(h.EntityDead,this.onEntityDead,this),f.instance.off(h.EntityCollect,this.onEntityCollect,this)},l.onEntityDead=function(t){var e=t.entity,n=y.instance.getParam("heroLevel"),i=n;0==this.startTime||(i=Math.floor((Date.now()-this.startTime)*n/1e3)),this.startTime=Date.now();for(var o=0;o<i;o++)this.spawn(e.node.position)},l.onEntityCollect=function(t){var e=t.entity,n=this.collectibles.filter((function(t){return t.isAvailable()})).sort((function(t,e){return t.getTimePercent()-e.getTimePercent()}));0!=n.length&&n[0].flyTo(e.node)},l.spawn=function(t){var e=this.getPool();if(!e){var n=s(u.get("common/collectible"));n.parent=this.node,e=n.getComponent(p),this.collectibles.push(e)}e.node.active=!0,e.spawn(t)},l.getPool=function(){for(var t=0;t<this.collectibles.length;t++)if(!this.collectibles[t].node.active)return this.collectibles[t];return null},l.isAllCollected=function(){return this.collectibles.every((function(t){return!t.node.active}))},e}(a)).instance=null,m=e((C=g).prototype,"pet",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerDamage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Damage.ts","./ControllerAsset.ts","./EventManager.ts","./Defines.ts"],(function(t){var n,e,o,a,r,i,s,c,u,l,f,g;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,a=t.randomRangeInt,r=t.Vec3,i=t.instantiate,s=t.Component},function(t){c=t.Damage},function(t){u=t.default},function(t){l=t.default,f=t.EventName},function(t){g=t.Config}],execute:function(){var d;e._RF.push({},"050c3jrtBpMm7Y3kf/m0839","ControllerDamage",void 0);var m=o.ccclass;o.property,t("ControllerDamage",m("ControllerDamage")(d=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).damages=[],n}n(e,t);var o=e.prototype;return o.onEnable=function(){l.instance.on(f.EntityHurt,this.onEntityHurt,this)},o.onDisable=function(){l.instance.off(f.EntityHurt,this.onEntityHurt,this)},o.onEntityHurt=function(t){var n=t.target,e=a(5,10),o=r.add(new r,n.node.position,new r(0,g.ENEMY_BODY_OFFSET_Y,0));this.spawn(o,e.toString())},o.spawn=function(t,n){var e=this.getPool();if(!e){var o=i(u.get("common/damage"));o.parent=this.node,e=o.getComponent(c),this.damages.push(e)}var s=a(-50,50),l=a(-25,25);e.node.position=r.add(new r,t,new r(s,l,0)),e.node.active=!0,e.show(n)},o.getPool=function(){for(var t=0;t<this.damages.length;t++)if(!this.damages[t].node.active)return this.damages[t];return null},e}(s))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerEntities.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./ControllerAsset.ts","./EventManager.ts"],(function(t){var n,e,i,o,s,r,a,u,l,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.instantiate,s=t.view,r=t.Component},function(t){a=t.Entity},function(t){u=t.default},function(t){l=t.default,c=t.EventName}],execute:function(){var h,f;e._RF.push({},"328faDGkOZF66oIJRf0YzC3","ControllerEntities",void 0);var d=i.ccclass;i.property,t("ControllerEntities",d("ControllerEntities")(((f=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).entities=[],n.hero=null,n}n(e,t);var i=e.prototype;return i.onLoad=function(){e.instance=this},i.onEnable=function(){l.instance.on(c.GameSpawnEnemy,this.spawn,this)},i.onDisable=function(){l.instance.off(c.GameSpawnEnemy,this.spawn,this)},i.spawn=function(t){var n=this.get(t.id);if(null==n){var e=u.get("common/enemy");(n=o(e).getComponent(a)).load(t.id),n.node.setParent(this.node),this.entities.push(n)}n.node.active=!0,n.setInformation(t.level),n.appear(),this.sorting()},i.setHero=function(t){null==this.hero&&(this.hero=t,this.hero.node.setParent(this.node),this.entities.push(t))},i.get=function(t){for(var n=0;n<this.entities.length;n++)if(this.entities[n].id==t&&0==this.entities[n].node.active)return this.entities[n];return null},i.getEntitiesInAttackRange=function(t){var n=this;return void 0===t&&(t=0),0==t&&(t=s.getDesignResolutionSize().width/2),this.entities.filter((function(e){return e!=n.hero&&!e.isDead&&Math.abs(e.node.position.x-n.node.position.x)<=t})).sort((function(t,n){return t.node.position.x-n.node.position.x}))},i.getEntitiesAlive=function(){var t=this;return this.entities.filter((function(n){return n!=t.hero&&!n.isDead}))},i.isAllDead=function(){return 0==this.getEntitiesAlive().length},i.isAllDisappeared=function(){var t=this;return 0==this.entities.filter((function(n){return n!=t.hero&&n.node.active})).length},i.sorting=function(){for(var t=this.entities.sort((function(t,n){return n.node.position.y-t.node.position.y})),n=0;n<t.length;n++)t[n].node.setSiblingIndex(n)},e}(r)).instance=null,h=f))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerVisualEffects.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ControllerAsset.ts","./EventManager.ts","./VisualEffect.ts","./Defines.ts"],(function(t){var n,e,i,s,o,f,a,r,c,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.instantiate,o=t.Component},function(t){f=t.default},function(t){a=t.default,r=t.EventName},function(t){c=t.VisualEffect},function(t){l=t.VisualEffectType}],execute:function(){var u;e._RF.push({},"fb51aJ9D1FMhZ5IaszrE1RN","ControllerVisualEffects",void 0);var h=i.ccclass;i.property,t("ControllerVisualEffects",h("ControllerVisualEffects")(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).vfxs=[],n}n(e,t);var i=e.prototype;return i.onEnable=function(){a.instance.on(r.VisualEffectSpawn,this.onVisualEffect,this),a.instance.on(r.EntityDead,this.onEntityDead,this)},i.onDisable=function(){a.instance.off(r.VisualEffectSpawn,this.onVisualEffect,this),a.instance.off(r.EntityDead,this.onEntityDead,this)},i.onVisualEffect=function(t){var n=t.owner,e=t.target,i=t.effectType;i!=l.None&&this.spawn("entities/"+n.id+"/"+n.id+"_"+i).show(n,e)},i.onEntityDead=function(t){this.spawn("common/explosion").show(null,t.entity)},i.spawn=function(t){var n=this.get(t);if(null==n){var e=f.get(t);(n=s(e).getComponent(c)).node.setParent(this.node),this.vfxs.push(n)}return n.id=t,n.node.active=!0,n},i.get=function(t){for(var n=0;n<this.vfxs.length;n++)if(this.vfxs[n].id==t&&!this.vfxs[n].node.active)return this.vfxs[n];return null},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Damage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,a,o,r,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Label,l=e.Vec3,c=e.tween,u=e.Component}],execute:function(){var p,g,h,v,f;o._RF.push({},"b01abu1jlxITbxL5h1xfJ2Y","Damage",void 0);var y=r.ccclass,d=r.property;e("Damage",(p=y("Damage"),g=d({type:s}),p((f=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"value",f,a(t)),t}return n(t,e),t.prototype.show=function(e){var t=this;this.value.string=e.toString(),this.value.node.position=l.ZERO,c(this.value.node).to(.2,{scale:new l(2,2,1)},{easing:"sineIn"}).to(.2,{scale:new l(1,1,1)},{easing:"sineOut"}).delay(.25).to(.25,{position:new l(0,50,0)},{easing:"sineOut",onComplete:function(){t.node.active=!1}}).start()},t}(u)).prototype,"value",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=v))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(_){var e;return{setters:[function(_){e=_.cclegacy}],execute:function(){e._RF.push({},"5c42ehAwQpGaZxCMvbZ+g0Y","Defines",void 0);var E=_("Config",(function(){}));E.GAME_BASE_SPEED=60,E.GAME_TURN_MAX=10,E.HERO_ATTACK_COUNT=5,E.HERO_LEVEL_SKILL_UNLOCK=10,E.ENEMY_SPAWN_MIN_Y=-10,E.ENEMY_SPAWN_MAX_Y=-320,E.ENEMY_SPAWN_MIN=5,E.ENEMY_SPAWN_MAX=15,E.ENEMY_SPAWN_DELAY_MIN=.1,E.ENEMY_SPAWN_DELAY_MAX=.35,E.ENEMY_BODY_OFFSET_Y=50;_("VisualEffectType",function(_){return _[_.None=0]="None",_.Projectile="projectile",_.ProjectileHit="projectile_hit",_.Skill="skill",_.SkillHit="skill_hit",_}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ControllerAsset.ts","./Defines.ts","./EventManager.ts"],(function(t){var e,n,o,i,r,s,l,a,u,c,p,f,h,d,v,y,k,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,a=t.instantiate,u=t.sp,c=t.Vec3,p=t.Tween,f=t.Color,h=t.tween,d=t.Component},function(t){v=t.default},function(t){y=t.Config},function(t){k=t.default,g=t.EventName}],execute:function(){var m,E,w,_,C;r._RF.push({},"673541IBARLdZrEoNKJnb0s","Entity",void 0);var b=s.ccclass,A=s.property;t("Entity",(m=b("Entity"),E=A({type:l}),m((C=e((_=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"pivot",C,i(e)),e.id=0,e.level=1,e.hp=0,e.attackRange=0,e.moveSpeed=0,e.skeleton=null,e.tweenHurt=null,e.isDead=!1,e}n(e,t);var r=e.prototype;return r.load=function(t){null!=this.skeleton&&(this.skeleton.node.removeFromParent(),this.skeleton=null);var e=v.get("entities/"+t+"/"+t+"_skeleton"),n=a(e);n.setParent(this.pivot),this.id=t,this.skeleton=n.getComponent(u.Skeleton),null==this.skeleton&&(this.skeleton=n.getComponentInChildren(u.Skeleton))},r.setAnimation=function(t,e){this.skeleton.setAnimation(0,t,e)},r.getBodyPosition=function(){return c.add(new c,this.node.position,new c(0,y.ENEMY_BODY_OFFSET_Y,0))},r.hurt=function(t,e,n){void 0===n&&(n=null),p.stopAllByTarget(this.skeleton),this.skeleton.color=new f(255,0,0,255),h(this.skeleton).to(.25,{color:{r:255,g:255,b:255,a:255}}).call((function(){null!=n&&n()})).start(),k.instance.emit(g.EntityHurt,{owner:t,target:this})},r.appear=function(){},r.setInformation=function(t){},r.dead=function(){},e}(d)).prototype,"pivot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=_))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/EntityData.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"711b2q72k1GBJBqytsOb7Ni","EntityData",void 0);t("EntityData",{1001:{hp:1,attack_range:0,move_speed:3,drop:1},1002:{hp:3,attack_range:300,move_speed:3,drop:3},1003:{hp:10,attack_range:0,move_speed:1.5,drop:5},1004:{hp:1,attack_range:0,move_speed:6,drop:1}});e._RF.pop()}}}));

System.register("chunks:///_virtual/EntityEnemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./Defines.ts","./VisualEffect.ts","./EventManager.ts","./ControllerEntities.ts","./EntityData.ts"],(function(t){var e,n,i,s,o,a,c,h,r,d,u,l,f,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Vec3,o=t.view,a=t.randomRangeInt},function(t){c=t.Entity},function(t){h=t.VisualEffectType,r=t.Config},function(t){d=t.VisualEffect},function(t){u=t.default,l=t.EventName},function(t){f=t.ControllerEntities},function(t){p=t.EntityData}],execute:function(){var v;n._RF.push({},"4b333NTZJVAH5DorrUGPbuA","EntityEnemy",void 0);var E=i.ccclass,y=(i.property,function(t){return t.Idle="idle",t.Move="move",t.Hit="hit",t.Attack="attack",t}(y||{})),k=function(t){return t[t.Move=0]="Move",t[t.Attack=1]="Attack",t[t.Dead=2]="Dead",t}(k||{});t("EntityEnemy",E("EntityEnemy")(v=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).state=void 0,e}e(n,t);var i=n.prototype;return i.onEnable=function(){this.skeleton.setEventListener(this.onSkeletonEvent.bind(this))},i.onDisable=function(){for(var t=this.node.getComponentsInChildren(d),e=0;e<t.length;e++)t[e].node.active=!1;this.skeleton.setEventListener(null)},i.update=function(t){switch(this.state){case k.Move:var e=new s(this.attackRange,this.node.position.y,this.node.position.z),n=s.subtract(new s,e,this.node.position).normalize();n=s.multiplyScalar(new s,n,this.moveSpeed*t),this.node.setPosition(s.add(new s,this.node.position,n)),this.node.position.x<=this.attackRange&&(this.node.setPosition(this.attackRange,this.node.position.y,this.node.position.z),this.setState(k.Attack))}},i.setState=function(t){switch(this.state=t,this.state){case k.Move:this.skeleton.paused=!1,this.setAnimation(y.Move,!0);break;case k.Attack:this.setAnimation(y.Attack,!0);break;case k.Dead:this.skeleton.paused=!0,this.isDead=!0}},i.onSkeletonEvent=function(t,e){if(t.animation.name==y.Attack&&"attack"==e.data.name){var n=f.instance.hero;this.attackRange>0?u.instance.emit(l.VisualEffectSpawn,{owner:this,target:n,effectType:h.Projectile}):n.hurt(this)}},i.appear=function(){var t=o.getDesignResolutionSize().width/2,e=a(r.ENEMY_SPAWN_MIN_Y,r.ENEMY_SPAWN_MAX_Y),n=new s(t,e,0);this.isDead=!1,this.node.setPosition(n),this.setState(k.Move)},i.hurt=function(e,n){var i=this;void 0===n&&(n=0),this.hp-=n,this.hp<=0&&this.dead(),t.prototype.hurt.call(this,e,n,(function(){i.isDead&&(i.node.active=!1,u.instance.emit(l.EntityDead,{entity:i}))}))},i.setInformation=function(t){var e=[1,1.5,2];this.node.scale=new s(e[t-1],e[t-1],1),this.level=t,this.attackRange=p[this.id].attack_range,this.moveSpeed=p[this.id].move_speed*r.GAME_BASE_SPEED,1==this.level?this.hp=p[this.id].hp:this.hp=p[this.id].hp*Math.pow(5,t-1)},i.dead=function(){this.setState(k.Dead)},n}(c))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./EventManager.ts","./ControllerEntities.ts","./Defines.ts","./SkillActionHero01.ts","./SkillActionHero02.ts","./SkillActionHero03.ts","./SkillActionHero04.ts","./SkillActionHero05.ts"],(function(t){var e,n,i,a,o,s,c,l,r,h,u,k,f,A;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){a=t.Entity},function(t){o=t.default,s=t.EventName},function(t){c=t.ControllerEntities},function(t){l=t.Config,r=t.VisualEffectType},function(t){h=t.SkillActionHero01},function(t){u=t.SkillActionHero02},function(t){k=t.SkillActionHero03},function(t){f=t.SkillActionHero04},function(t){A=t.SkillActionHero05}],execute:function(){var S;n._RF.push({},"abd27AyVCBIXL03w/re1vxK","EntityHero",void 0);var m=i.ccclass,v=(i.property,function(t){return t.Idle="idle",t.Move="move",t.Attack="attack",t.AttackSkill="attack_skill",t}(v||{})),d=function(t){return t[t.None=0]="None",t[t.Idle=1]="Idle",t[t.Move=2]="Move",t[t.Scan=3]="Scan",t[t.Attack=4]="Attack",t}(d||{});t("EntityHero",m("EntityHero")(S=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).state=d.None,e.skillAction=void 0,e.targets=[],e.attackCount=0,e.attackTimeScale=1,e}e(n,t);var i=n.prototype;return i.onLoad=function(){},i.onEnable=function(){o.instance.on(s.GameMove,this.onMove,this),o.instance.on(s.GameAttack,this.onScan,this)},i.onDisable=function(){var t,e;null==(t=this.skeleton)||t.setEventListener(null),null==(e=this.skeleton)||e.setCompleteListener(null),o.instance.off(s.GameMove,this.onMove,this),o.instance.off(s.GameAttack,this.onScan,this)},i.update=function(t){switch(this.state){case d.Scan:this.targets=c.instance.getEntitiesInAttackRange(),this.targets.length>0&&this.setState(d.Attack)}},i.setState=function(t){switch(this.state=t,this.state){case d.Idle:this.setAnimation(v.Idle,!0);break;case d.Move:this.setAnimation(v.Move,!0);break;case d.Scan:this.setAnimation(v.Idle,!0);break;case d.Attack:this.attackCount<l.HERO_ATTACK_COUNT?(this.level>=l.HERO_LEVEL_SKILL_UNLOCK&&this.attackCount++,this.setAnimation(v.Attack,!1)):(this.attackCount=0,this.setAnimation(v.AttackSkill,!1))}},i.onEvent=function(t,e){if(t.animation.name==v.Attack){if("attack"==e.data.name){var n=this.targets.filter((function(t){return!t.isDead}));n.length>0&&o.instance.emit(s.VisualEffectSpawn,{owner:this,target:n[0],effectType:r.Projectile})}}else t.animation.name==v.AttackSkill&&null!=this.skillAction&&this.skillAction.execute(this,this.targets)},i.onComplete=function(t){t.animation.name!=v.Attack&&t.animation.name!=v.AttackSkill||(this.setState(d.Scan),this.setAnimation(v.Idle,!0))},i.onMove=function(){this.setState(d.Move)},i.onScan=function(){this.setState(d.Scan)},i.load=function(e){t.prototype.load.call(this,e),this.skeleton.setEventListener(this.onEvent.bind(this)),this.skeleton.setCompleteListener(this.onComplete.bind(this)),this.skillAction=this.getSkillAction(e),this.state==d.None?this.setState(d.Idle):this.state!=d.Move&&this.setState(d.Scan)},i.setAnimation=function(e,n){e==v.Attack||e==v.AttackSkill?this.skeleton.timeScale=this.attackTimeScale:this.skeleton.timeScale=1,t.prototype.setAnimation.call(this,e,n)},i.setLevel=function(t){var e=this.skeleton.findAnimation(v.Attack);if(null!=e){var n=Math.pow(1.03,t-1),i=1/e.duration;this.attackTimeScale=n/i}this.level=t},i.getSkillAction=function(t){switch(t){case 2001:return new h;case 2002:return new u;case 2003:return new k;case 2004:return new f;case 2005:return new A}return null},n}(a))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityPet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./Timer.ts","./Defines.ts","./EventManager.ts"],(function(t){var e,i,n,s,o,a,h,r,l,c,d,p,u,f,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,h=t.Node,r=t.Vec3,l=t.tween,c=t.randomRangeInt},function(t){d=t.Entity},function(t){p=t.Timer},function(t){u=t.Config},function(t){f=t.default,I=t.EventName}],execute:function(){var v,m,y,E,g;o._RF.push({},"1b4974OoOpEUqIuYMRqmkd8","EntityPet",void 0);var x=a.ccclass,M=a.property,P=function(t){return t.Idle="idle",t.Move="move",t}(P||{}),w=function(t){return t[t.Idle=0]="Idle",t[t.Move=1]="Move",t}(w||{});t("EntityPet",(v=x("EntityPet"),m=M({type:[h]}),v((g=e((E=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"paths",g,s(e)),e.state=void 0,e.tween=null,e.timerIdle=new p,e.timerCollect=new p,e.pathIndex=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){for(var t=0;t<this.paths.length;t++)this.paths[t].active=!1},o.update=function(t){switch(this.state){case w.Idle:this.updateIdle(t)}this.timerCollect.update(t),this.timerCollect.isFinish()&&(this.timerCollect.reset(),f.instance.emit(I.EntityCollect,{entity:this}))},o.setState=function(t){var e=this;switch(this.state=t,this.state){case w.Idle:this.timerIdle.setDuration(c(3,5)),this.randomPathIndex(),this.setAnimation(P.Idle,!0);break;case w.Move:var i=r.distance(this.node.position,this.paths[this.pathIndex].position);this.setAnimation(P.Move,!0),this.tween=l(this.node).to(i/2/u.GAME_BASE_SPEED,{position:this.paths[this.pathIndex].position},{easing:"linear"}).call((function(){e.setState(w.Idle)})).start()}},o.updateIdle=function(t){this.timerIdle.update(t),this.timerIdle.isFinish()&&this.setState(w.Move)},o.randomPathIndex=function(){var t=c(0,this.paths.length);t==this.pathIndex&&(t=(t+1)%this.paths.length),this.pathIndex=t},o.load=function(e){t.prototype.load.call(this,e),this.pathIndex=c(0,this.paths.length),this.node.setPosition(this.paths[this.pathIndex].position),this.setState(w.Idle)},o.setLevel=function(t){this.level=t,this.node.active=t>0,this.timerCollect.setDuration(1/t)},e}(d)).prototype,"paths",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=E))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,a,i;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){a=n.cclegacy,i=n.EventTarget}],execute:function(){a._RF.push({},"d1200p6dndOSL1x7FfcEcse","EventManager",void 0);var c=function(n){function a(){return n.apply(this,arguments)||this}return t(a,n),e(a,[{key:"instance",get:function(){return null==a.instance&&(a.instance=new a),a.instance}}]),a}(i);c.instance=null;n("default",new c),n("EventName",function(n){return n[n.GameMove=0]="GameMove",n[n.GameAttack=1]="GameAttack",n[n.GameSpawnEnemy=2]="GameSpawnEnemy",n[n.VisualEffectSpawn=3]="VisualEffectSpawn",n[n.EntityHurt=4]="EntityHurt",n[n.EntityDead=5]="EntityDead",n[n.EntityCollect=6]="EntityCollect",n}({})),n("SpAnimationEvent",function(n){return n.Finish="Finish",n}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenLoading.ts","./ScreenBattle.ts","./ControllerAsset.ts"],(function(e){var t,a,n,i,r,s,o,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Component},function(e){c=e.ScreenLoading},function(e){l=e.ScreenBattle},function(e){d=e.default}],execute:function(){var p,u,h,f,v,m,g,w;r._RF.push({},"a53b6e/kulLnrCZaDuAae1D","Game",void 0);var L=s.ccclass,B=s.property,b=function(e){return e[e.None=0]="None",e[e.Loading=1]="Loading",e[e.Battle=2]="Battle",e}(b||{});e("Game",(p=L("Game"),u=B({type:c}),h=B({type:l}),p(((w=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"screenLoading",m,i(t)),n(t,"screenBattle",g,i(t)),t.state=b.None,t}a(t,e);var r=t.prototype;return r.onLoad=function(){t.instance=this},r.start=function(){var e=this;this.screenLoading.node.active=!1,this.screenBattle.node.active=!1,window.onmessage=function(t){"battle"==t.data.eventName?(window.params=t.data.params,e.setState(b.Loading)):"update"==t.data.eventName&&e.updateBattleInfo(t.data.params)},window.parent.postMessage({eventName:"start"},"*"),CC_PREVIEW&&(this.parseParams(),window.parent.postMessage({eventName:"battle",params:window.params},"*"))},r.setState=function(e){var t=this;switch(this.state=e,this.state){case b.Loading:this.screenLoading.node.active=!0,this.screenLoading.load((function(){t.screenLoading.node.active=!1,t.setState(b.Battle)}));break;case b.Battle:this.screenBattle.node.active=!0,this.screenBattle.init()}},r.updateBattleInfo=function(e){var t=this;void 0===e&&(e=null),Object.keys(e).forEach((function(a){t.updateParams(a,e[a])}))},r.parseParams=function(){var e=window.location.href.split("?");if(2==e.length){for(var t=e[1].split("&"),a={},n=0;n<t.length;n++){var i=t[n].split("=");a[i[0]]=i[1]}window.params=a}},r.getParam=function(e,t){void 0===t&&(t=0);var a=window.params&&window.params[e]||t;return parseInt(a)},r.updateParams=function(e,t){var a=this;switch(e){case"heroId":this.getParam("heroId")!=t&&d.loadDir("entities/"+t).then((function(){a.screenBattle.hero.load(t)}));break;case"heroLevel":this.screenBattle.hero.setLevel(t);break;case"petId":this.getParam("petId")!=t&&d.loadDir("entities/"+t).then((function(){a.screenBattle.pet.load(t)}));break;case"petLevel":this.screenBattle.pet.setLevel(t)}var n=window.params;n||(n={}),n[e]=t},t}(o)).instance=null,m=t((v=w).prototype,"screenLoading",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(v.prototype,"screenBattle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Defines.ts","./Game.ts","./Collectible.ts","./Damage.ts","./Scrollable.ts","./ControllerAsset.ts","./ControllerCollectibles.ts","./ControllerDamage.ts","./ControllerEntities.ts","./ControllerVisualEffects.ts","./EventManager.ts","./Timer.ts","./Entity.ts","./EntityEnemy.ts","./EntityHero.ts","./EntityPet.ts","./SkillAction.ts","./SkillActionHero01.ts","./SkillActionHero02.ts","./SkillActionHero03.ts","./SkillActionHero04.ts","./SkillActionHero05.ts","./EntityData.ts","./ScreenBattle.ts","./ScreenLoading.ts","./VisualEffect.ts","./VisualEffectExplosion.ts","./VisualEffectHit.ts","./Projectile.ts","./SkillHero01.ts","./SkillHero02.ts","./SkillHero04.ts","./SkillHero05.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Projectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts","./Defines.ts"],(function(t){var e,i,n,o,s,a,r,c,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.CCBoolean,c=t.Vec3},function(t){l=t.VisualEffect},function(t){u=t.VisualEffectType,h=t.Config}],execute:function(){var p,f,y,d,g;s._RF.push({},"05c9aElOcNISaFwD7ymWmiR","Projectile",void 0);var w=a.ccclass,P=a.property,v=function(t){return t[t.None=0]="None",t[t.Flying=1]="Flying",t[t.Hit=2]="Hit",t}(v||{});t("Projectile",(p=w("Projectile"),f=P({type:r}),p((g=e((d=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"rotate",g,o(e)),e.state=v.None,e}i(e,t);var s=e.prototype;return s.update=function(t){switch(this.state){case v.Flying:this.updateFlying(t)}},s.setState=function(t){switch(this.state=t,this.state){case v.None:break;case v.Flying:this.node.position=this.owner.getBodyPosition();break;case v.Hit:this.node.active=!1,this.emit(this.owner,this.target,u.ProjectileHit)}},s.updateFlying=function(t){var e=this.target.getBodyPosition(),i=c.subtract(new c,e,this.node.position).normalize();if(i=c.multiplyScalar(new c,i,25*h.GAME_BASE_SPEED*t),this.node.setPosition(c.add(new c,this.node.position,i)),this.rotate){var n=180*Math.atan2(i.y,i.x)/Math.PI;this.node.angle=n}c.distance(this.node.position,e)<20&&this.setState(v.Hit)},s.show=function(e,i){t.prototype.show.call(this,e,i),this.setState(v.Flying)},e}(l)).prototype,"rotate",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenBattle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityHero.ts","./Timer.ts","./EventManager.ts","./Defines.ts","./ControllerEntities.ts","./EntityPet.ts","./Game.ts","./ControllerCollectibles.ts"],(function(e){var t,n,i,a,r,s,o,l,h,u,c,p,f,m,v,d,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.randomRange,l=e.Component},function(e){h=e.EntityHero},function(e){u=e.Timer},function(e){c=e.default,p=e.EventName},function(e){f=e.Config},function(e){m=e.ControllerEntities},function(e){v=e.EntityPet},function(e){d=e.Game},function(e){M=e.ControllerCollectibles}],execute:function(){var S,w,y,E,g,_,A;r._RF.push({},"f3e76CmtrdF36mgwEfvq85Z","ScreenBattle",void 0);var I=s.ccclass,b=s.property,C=function(e){return e[e.Idle=0]="Idle",e[e.Move=1]="Move",e[e.Spawn=2]="Spawn",e}(C||{});e("ScreenBattle",(S=I("ScreenBattle"),w=b({type:h}),y=b({type:v}),S((_=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"hero",_,a(t)),i(t,"pet",A,a(t)),t.state=C.Idle,t.timerMove=new u,t.timerSpawn=new u,t.turn=1,t.wave=0,t.enemies=[],t.enemyIds=[1001,1004,1002,1003],t.enemyIndex=0,t}n(t,e);var r=t.prototype;return r.update=function(e){switch(this.state){case C.Move:this.updateMove(e);break;case C.Spawn:this.updateSpawn(e)}},r.setState=function(e){switch(this.state=e,this.state){case C.Idle:break;case C.Move:this.turn=1,this.wave=this.wave<this.getMaxWave()?this.wave+1:1,this.timerMove.reset(),c.instance.emit(p.GameMove);break;case C.Spawn:this.enemies=this.getEnemyCount(this.turn),this.enemyIndex=0,c.instance.emit(p.GameAttack)}},r.updateMove=function(e){this.timerMove.update(e),this.timerMove.isFinish()&&this.setState(C.Spawn)},r.updateSpawn=function(e){if(this.enemyIndex<this.enemies.length){if(this.timerSpawn.update(e),this.timerSpawn.isFinish()){var t=this.enemyIds[this.wave-1];this.timerSpawn.setDuration(o(f.ENEMY_SPAWN_DELAY_MIN,f.ENEMY_SPAWN_DELAY_MAX)),c.instance.emit(p.GameSpawnEnemy,{id:t,level:this.enemies[this.enemyIndex++]})}}else m.instance.isAllDisappeared()&&(this.turn<f.GAME_TURN_MAX?(this.turn++,this.setState(C.Spawn)):M.instance.isAllCollected()&&(this.turn=0,this.setState(C.Move)))},r.getEnemyCount=function(e){for(var t=2*this.hero.level+8,n=Math.floor(t/10*e),i=Math.floor(n/100),a=Math.floor((n-100*i)/10),r=n-100*i-10*a,s=[],o=0;o<i;o++)s.push(3);for(var l=0;l<a;l++)s.push(2);for(var h=0;h<r;h++)s.push(1);return this.shuffle(s)},r.shuffle=function(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t--),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}return e},r.init=function(){this.hero.load(d.instance.getParam("heroId",2001)),this.hero.setLevel(d.instance.getParam("heroLevel",1)),this.pet.load(d.instance.getParam("petId",3001)),this.pet.setLevel(d.instance.getParam("petLevel",1)),m.instance.setHero(this.hero),this.timerMove.setDuration(3),this.timerSpawn.setDuration(o(f.ENEMY_SPAWN_DELAY_MIN,f.ENEMY_SPAWN_DELAY_MAX)),this.setState(C.Move)},r.getMaxWave=function(){var e=this.hero.level;return e<10?1:e<15?2:e<20?3:4},t}(l)).prototype,"hero",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(g.prototype,"pet",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=g))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ControllerAsset.ts","./Game.ts"],(function(e){var t,n,i,o,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Component},function(e){r=e.default},function(e){s=e.Game}],execute:function(){var a;n._RF.push({},"f868d+ng59HmLBy2u6lKOWa","ScreenLoading",void 0);var u=i.ccclass;i.property,e("ScreenLoading",u("ScreenLoading")(a=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.load=function(e){this.loadAssets().then((function(){e()}))},i.loadAssets=function(){var e=[];return e.push(r.loadDir("common")),e.push(r.loadDir("entities/1001")),e.push(r.loadDir("entities/1002")),e.push(r.loadDir("entities/1003")),e.push(r.loadDir("entities/1004")),e.push(r.loadDir("entities/"+s.instance.getParam("heroId",2001))),e.push(r.loadDir("entities/"+s.instance.getParam("petId",3001))),Promise.all(e)},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Scrollable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventManager.ts"],(function(t){var e,i,s,o,n,a,l,r,c,h,p,b,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.CCFloat,r=t.Node,c=t.UITransform,h=t.Component},function(t){p=t.Config},function(t){b=t.default,u=t.EventName}],execute:function(){var f,d,v,y,O,S,g,M,j;n._RF.push({},"fd8aa7MbolAz6pVYW018Pdc","Scrollable",void 0);var m=a.ccclass,w=a.property,A=function(t){return t[t.Init=0]="Init",t[t.Move=1]="Move",t[t.Attack=2]="Attack",t}(A||{});t("Scrollable",(f=m("Scrollable"),d=w({type:l}),v=w({type:l}),y=w({type:[r]}),f((g=e((S=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,s(e,"speed",g,o(e)),s(e,"overlap",M,o(e)),s(e,"scrollableObjects",j,o(e)),e.state=void 0,e.width=0,e.lastIndex=0,e}i(e,t);var n=e.prototype;return n.onLoad=function(){this.width=this.node.getComponent(c).width,this.SetState(A.Init)},n.onEnable=function(){b.instance.on(u.GameMove,this.OnMove,this),b.instance.on(u.GameAttack,this.OnAttack,this)},n.onDisable=function(){b.instance.off(u.GameMove,this.OnMove,this),b.instance.off(u.GameAttack,this.OnAttack,this)},n.update=function(t){switch(this.state){case A.Move:for(var e=0;e<this.scrollableObjects.length;e++)this.scrollableObjects[e].position.x+this.node.position.x<-this.width+this.overlap&&(this.scrollableObjects[e].setPosition(this.scrollableObjects[this.lastIndex].position.x+this.width-this.overlap,this.scrollableObjects[e].position.y),this.lastIndex++,this.lastIndex==this.scrollableObjects.length&&(this.lastIndex=0));this.node.setPosition(this.node.position.x-this.speed*p.GAME_BASE_SPEED*t,this.node.position.y)}},n.SetState=function(t){switch(this.state=t,t){case A.Init:for(var e=0,i=0;i<this.scrollableObjects.length;i++)this.scrollableObjects[i].setPosition(e,this.scrollableObjects[i].position.y),e+=this.width-this.overlap;this.lastIndex=this.scrollableObjects.length-1,this.node.setPosition(0,this.node.position.y);break;case A.Move:}},n.OnMove=function(){this.SetState(A.Move)},n.OnAttack=function(){this.SetState(A.Attack)},e}(h)).prototype,"speed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(S.prototype,"overlap",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(S.prototype,"scrollableObjects",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=S))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillAction.ts",["cc","./EventManager.ts"],(function(t){var n,e,c;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default,c=t.EventName}],execute:function(){n._RF.push({},"852bfBb5GZHyoeczD6Tmk8T","SkillAction",void 0);t("SkillAction",function(){function t(){}return t.prototype.spawnVisualEffect=function(t,n,i){e.instance.emit(c.VisualEffectSpawn,{owner:t,target:n,effectType:i})},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillActionHero01.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./SkillAction.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.VisualEffectType},function(t){o=t.SkillAction}],execute:function(){n._RF.push({},"212280Uv0tCYqos+Ge3x7tf","SkillActionHero01",void 0);t("SkillActionHero01",function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.execute=function(t,i){this.spawnVisualEffect(t,null,e.Skill)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillActionHero02.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./SkillAction.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.VisualEffectType},function(t){o=t.SkillAction}],execute:function(){n._RF.push({},"42636MXhT9JrJckAF1+jCpb","SkillActionHero02",void 0);t("SkillActionHero02",function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.execute=function(t,i){this.spawnVisualEffect(t,i[0],e.Skill)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillActionHero03.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./SkillAction.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.VisualEffectType},function(t){o=t.SkillAction}],execute:function(){n._RF.push({},"a22dfsjfxNOKKuHwds11STQ","SkillActionHero03",void 0);t("SkillActionHero03",function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.execute=function(t,i){for(var n=0;n<i.length;n++)this.spawnVisualEffect(t,i[n],e.SkillHit)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillActionHero04.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./SkillAction.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.VisualEffectType},function(t){o=t.SkillAction}],execute:function(){n._RF.push({},"1f065trBpRDPYKJev4DeGW7","SkillActionHero04",void 0);t("SkillActionHero04",function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.execute=function(t,i){this.spawnVisualEffect(t,null,e.Skill)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillActionHero05.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./SkillAction.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.VisualEffectType},function(t){o=t.SkillAction}],execute:function(){n._RF.push({},"5a84aCF2ehP9bKRcCj42HN6","SkillActionHero05",void 0);t("SkillActionHero05",function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.execute=function(t,i){this.spawnVisualEffect(t,null,e.Skill)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillHero01.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts","./Defines.ts","./ControllerEntities.ts"],(function(t){var i,e,n,s,o,a,c,r,l,h;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.view,o=t.Vec3,a=t.UITransform},function(t){c=t.VisualEffect},function(t){r=t.Config,l=t.VisualEffectType},function(t){h=t.ControllerEntities}],execute:function(){var u;e._RF.push({},"873a04ZhodKnaitiRbkr6rb","SkillHero01",void 0);var d=n.ccclass,p=(n.property,function(t){return t[t.None=0]="None",t[t.Flying=1]="Flying",t[t.Hit=2]="Hit",t}(p||{}));t("SkillHero01",d("SkillHero01")(u=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).state=p.None,i.attackEntities=[],i.attackedEntities=[],i}i(e,t);var n=e.prototype;return n.update=function(t){switch(this.state){case p.Flying:this.updateHit(),this.updateFlying(t)}},n.setState=function(t){switch(this.state=t,this.state){case p.None:break;case p.Flying:this.attackEntities=h.instance.getEntitiesAlive(),this.node.position=this.owner.node.position;break;case p.Hit:this.attackedEntities=[],this.node.active=!1}},n.updateFlying=function(t){var i=s.getDesignResolutionSize(),e=new o(i.width,this.owner.node.position.y,0),n=o.subtract(new o,e,this.node.position).normalize();n=o.multiplyScalar(new o,n,30*r.GAME_BASE_SPEED*t),this.node.setPosition(o.add(new o,this.node.position,n)),o.distance(this.node.position,e)<20&&this.setState(p.Hit)},n.updateHit=function(){for(var t=this.node.getComponent(a).width,i=0;i<this.attackEntities.length;i++)-1==this.attackedEntities.indexOf(this.attackEntities[i])&&this.node.worldPosition.x+t/2>this.attackEntities[i].node.worldPosition.x&&(this.attackedEntities.push(this.attackEntities[i]),this.emit(this.owner,this.attackEntities[i],l.SkillHit))},n.show=function(i,e){t.prototype.show.call(this,i,e),this.setState(p.Flying)},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillHero02.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts","./Defines.ts","./ControllerEntities.ts"],(function(t){var i,e,n,s,o,a,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Vec3},function(t){o=t.VisualEffect},function(t){a=t.VisualEffectType,r=t.Config},function(t){c=t.ControllerEntities}],execute:function(){var l;e._RF.push({},"5ac4bh8HgJJO7OwT74DhVbA","SkillHero02",void 0);var h=n.ccclass,u=(n.property,function(t){return t[t.None=0]="None",t[t.Flying=1]="Flying",t[t.Hit=2]="Hit",t[t.Chase=3]="Chase",t}(u||{}));t("SkillHero02",h("SkillHero02")(l=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).state=u.None,i.entities=[],i}i(e,t);var n=e.prototype;return n.update=function(t){switch(this.state){case u.Flying:this.updateFlying(t)}},n.setState=function(t){var i=this;switch(this.state=t,this.state){case u.Hit:var e=c.instance.getEntitiesAlive();this.entities.push(this.target);var n=e.filter((function(t){return t!=i.target&&-1==i.entities.indexOf(t)})).sort((function(t,e){return s.distance(i.node.position,t.node.position)-s.distance(i.node.position,e.node.position)}));this.emit(this.owner,this.target,a.SkillHit),n.length>0?(this.target=n[0],this.setState(u.Flying)):(this.entities=[],this.node.active=!1)}},n.updateFlying=function(t){var i=this.target.getBodyPosition(),e=s.subtract(new s,i,this.node.position).normalize();e=s.multiplyScalar(new s,e,25*r.GAME_BASE_SPEED*t),this.node.setPosition(s.add(new s,this.node.position,e));var n=180*Math.atan2(e.y,e.x)/Math.PI;this.node.angle=n,s.distance(this.node.position,i)<20&&this.setState(u.Hit)},n.show=function(i,e){t.prototype.show.call(this,i,e),this.node.position=this.owner.node.position,this.setState(u.Flying)},e}(o))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillHero04.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts","./Defines.ts","./ControllerEntities.ts"],(function(t){var i,e,n,s,o,r,h,c,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Vec3,o=t.view},function(t){r=t.VisualEffect},function(t){h=t.VisualEffectType,c=t.Config},function(t){a=t.ControllerEntities}],execute:function(){var l;e._RF.push({},"b0353qcMlRACJJ0yQyhO5ZE","SkillHero04",void 0);var u=n.ccclass,p=(n.property,function(t){return t[t.None=0]="None",t[t.Flying=1]="Flying",t[t.Hit=2]="Hit",t}(p||{}));t("SkillHero04",u("SkillHero04")(l=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).state=p.None,i.entities=void 0,i.center=void 0,i}i(e,t);var n=e.prototype;return n.update=function(t){switch(this.state){case p.Flying:this.updateFlying(t)}},n.setState=function(t){switch(this.state=t,this.state){case p.Flying:this.node.position=new s(this.owner.node.position.x,this.owner.node.position.y+200,0),this.updateTargets();break;case p.Hit:for(var i=0;i<this.entities.length;i++)this.emit(this.owner,this.entities[i],h.SkillHit);this.node.active=!1}},n.updateFlying=function(t){var i=s.subtract(new s,this.center,this.node.position).normalize();i=s.multiplyScalar(new s,i,25*c.GAME_BASE_SPEED*t),this.node.setPosition(s.add(new s,this.node.position,i)),s.distance(this.node.position,this.center)<20&&this.setState(p.Hit)},n.updateTargets=function(){var t=o.getDesignResolutionSize(),i=t.width/2,e=t.height/2,n=-t.width/2,r=-t.height/2;this.entities=a.instance.getEntitiesAlive();for(var h=0;h<this.entities.length;h++)this.entities[h].node.position.x<i&&(i=this.entities[h].node.position.x),this.entities[h].node.position.x>n&&(n=this.entities[h].node.position.x),this.entities[h].node.position.y<e&&(e=this.entities[h].node.position.y),this.entities[h].node.position.y>r&&(r=this.entities[h].node.position.y);this.center=new s((i+n)/2,(e+r)/2,0)},n.show=function(i,e){t.prototype.show.call(this,i,e),this.setState(p.Flying)},e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillHero05.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts","./ControllerEntities.ts"],(function(t){var i,e,n,o,s,r,l,a,h,u,c,p,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.sp,a=t.CCString,h=t.CCInteger,u=t.view,c=t.Vec3},function(t){p=t.VisualEffect},function(t){f=t.ControllerEntities}],execute:function(){var d,g,y,v,b,m,k,w,C,E,S;s._RF.push({},"2e0d1BkxYlO05CTF7i7nkTP","SkillHero05",void 0);var z=r.ccclass,H=r.property,x=function(t){return t[t.None=0]="None",t[t.Fire=1]="Fire",t[t.Hit=2]="Hit",t}(x||{});t("SkillHero05",(d=z("SkillHero05"),g=H({type:l.Skeleton}),y=H({type:a}),v=H({type:h}),b=H({type:h}),d((w=i((k=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(i,"skeleton",w,o(i)),n(i,"animation",C,o(i)),n(i,"hits",E,o(i)),n(i,"damage",S,o(i)),i.state=x.None,i.entities=void 0,i.hitCount=void 0,i}e(i,t);var s=i.prototype;return s.onEnable=function(){this.hitCount=this.hits,this.skeleton.setEventListener(this.onSkeletonEvent.bind(this))},s.onDisable=function(){this.skeleton.setEventListener(null)},s.onSkeletonEvent=function(t,i){t.animation.name==this.animation&&"hit"==i.data.name&&(this.hitCount--,0==this.hitCount?this.hit(this.damage):this.hit())},s.updateTargets=function(){var t=u.getDesignResolutionSize(),i=t.width/2,e=t.height/2,n=-t.width/2,o=-t.height/2;this.entities=f.instance.getEntitiesAlive();for(var s=0;s<this.entities.length;s++)this.entities[s].node.position.x<i&&(i=this.entities[s].node.position.x),this.entities[s].node.position.x>n&&(n=this.entities[s].node.position.x),this.entities[s].node.position.y<e&&(e=this.entities[s].node.position.y),this.entities[s].node.position.y>o&&(o=this.entities[s].node.position.y);this.node.setPosition(new c((i+n)/2,(e+o)/2,0))},s.hit=function(t){void 0===t&&(t=0);for(var i=0;i<this.entities.length;i++)this.entities[i].hurt(this.owner,t)},s.show=function(i,e){t.prototype.show.call(this,i,e),this.updateTargets(),this.skeleton.setAnimation(0,this.animation,!1)},i}(p)).prototype,"skeleton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(k.prototype,"animation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(k.prototype,"hits",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(k.prototype,"damage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=k))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"82c292D/TpGmpCMRph0UYMg","Timer",void 0);t("Timer",function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}var i=t.prototype;return i.setDuration=function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1},i.addTime=function(t){this.timer+=t,this.overhead=0,this.isDone=!1},i.getTimePercent=function(){return this.timer/this.duration},i.reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},i.isFinish=function(){return 0==this.timer},i.justFinish=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},i.update=function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/VisualEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts"],(function(t){var e,n,r,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component},function(t){c=t.default,i=t.EventName}],execute:function(){var a;n._RF.push({},"34ac7EA4rdFsabzJ6Y3ECly","VisualEffect",void 0);var s=r.ccclass;r.property,t("VisualEffect",s("VisualEffect")(a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).id=void 0,e.owner=void 0,e.target=void 0,e}e(n,t);var r=n.prototype;return r.show=function(t,e){this.owner=t,this.target=e},r.emit=function(t,e,n){c.instance.emit(i.VisualEffectSpawn,{owner:t,target:e,effectType:n})},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/VisualEffectExplosion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts"],(function(t){var e,n,i,o,s,l,a,r,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,a=t.sp,r=t.randomRangeInt},function(t){c=t.VisualEffect}],execute:function(){var u,p,f,h,m;s._RF.push({},"c0235uPvTpNzbRER75wKOll","VisualEffectExplosion",void 0);var d=l.ccclass,y=l.property;t("VisualEffectExplosion",(u=d("VisualEffectExplosion"),p=y({type:a.Skeleton}),u((m=e((h=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"skeleton",m,o(e)),e.animation=void 0,e}n(e,t);var s=e.prototype;return s.onEnable=function(){this.skeleton.setCompleteListener(this.onComplete.bind(this))},s.onDisable=function(){this.skeleton.setCompleteListener(null)},s.onComplete=function(t){t.animation.name==this.animation&&(this.node.active=!1)},s.show=function(e,n){t.prototype.show.call(this,e,n),this.node.setPosition(n.node.position),this.animation="enemy_dead_"+(r(1,4)+1),this.skeleton.setAnimation(0,this.animation,!1)},e}(c)).prototype,"skeleton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/VisualEffectHit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisualEffect.ts"],(function(t){var e,i,n,o,s,a,l,r,h,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,l=t.sp,r=t.CCString,h=t.CCInteger,u=t.CCBoolean},function(t){c=t.VisualEffect}],execute:function(){var p,f,b,m,d,g,y,w,v,C,E,k,z,L,V;s._RF.push({},"01a6b9cIhxLZZJGmuYVfRUv","VisualEffectHit",void 0);var H=a.ccclass,P=a.property;t("VisualEffectHit",(p=H("VisualEffectHit"),f=P({type:l.Skeleton}),b=P({type:r}),m=P({type:h}),d=P({type:h}),g=P({type:u}),y=P({type:u}),p((C=e((v=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"skeleton",C,o(e)),n(e,"animation",E,o(e)),n(e,"hits",k,o(e)),n(e,"damage",z,o(e)),n(e,"follow",L,o(e)),n(e,"behind",V,o(e)),e.hitCount=void 0,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.hitCount=this.hits,this.hits>0&&this.skeleton.setEventListener(this.onEvent.bind(this)),this.skeleton.setCompleteListener(this.onComplete.bind(this))},s.onDisable=function(){this.skeleton.setEventListener(null),this.skeleton.setCompleteListener(null)},s.show=function(e,i){t.prototype.show.call(this,e,i),0==this.hits&&i.hurt(this.owner,this.damage),this.follow?(this.node.setParent(this.target.node),this.node.setPosition(0,0,0)):this.node.position=this.target.getBodyPosition(),this.behind&&this.node.setSiblingIndex(0),this.skeleton.setAnimation(0,this.animation,!1)},s.onEvent=function(t,e){t.animation.name==this.animation&&"hit"==e.data.name&&(this.hitCount--,0==this.hitCount?this.target.hurt(this.owner,this.damage):this.target.hurt(this.owner))},s.onComplete=function(t){t.animation.name==this.animation&&(this.node.active=!1)},e}(c)).prototype,"skeleton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"animation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(v.prototype,"hits",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(v.prototype,"damage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(v.prototype,"follow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(v.prototype,"behind",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});