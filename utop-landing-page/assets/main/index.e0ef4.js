window.__require=function t(e,o,n){function r(i,a){if(!o[i]){if(!e[i]){var s=i.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({Help:[function(t,e,o){"use strict";cc._RF.push(e,"fdb6cUAn+9CMK4OtdcbT0N2","Help");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t.node.active=!1}).start()},e=r([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"aa71dc8Py5ACL0THxilhTNp","Loading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this.icon.angle-=120*t},r([a(cc.Node)],e.prototype,"icon",void 0),e=r([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"fc3ed9adlFAJYE+FTOQxGkD","Main");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Message"),i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewHelp=null,e.viewLoading=null,e.viewMessage=null,e.buttonPlay=null,e.buttonHelp=null,e.baseURL="https://gameapiutop.azurewebsites.net/api",e}return n(e,t),e.prototype.start=function(){this.userParams=this.GetParams(location&&location.href||"")},e.prototype.OnHelp=function(){this.viewHelp.active=!0},e.prototype.OnPlay=function(){this.SendDataToGame()},e.prototype.HttpRequest=function(t,e,o){return new Promise(function(n,r){var c=new XMLHttpRequest;c.open(t,e,!0),c.setRequestHeader("Content-type","application/json"),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?n(c.response):r(c.response))},c.send(o)})},e.prototype.ParseUrl=function(t){for(var e,o=/[?&]([^=#]+)=([^&#]*)/g,n={};e=o.exec(t);)n[e[1]]=decodeURIComponent(e[2]);return n},e.prototype.GetParams=function(t){var e=this,o=this.ParseUrl(t);return Object.keys(o).forEach(function(t){"initCustomParams"==t?(o.custom=e.ParseUrl(o[t]),delete o[t]):"d"==t&&(o[t]=JSON.parse(o[t]))}),o},e.prototype.CanStartGame=function(){var t={IDChannel:this.userParams.channel||1,IDUser:this.userParams.c||1,GameCode:this.userParams.gamecode||1,sessionID:this.userParams.b||1};return this.HttpRequest("post",this.baseURL+"/TestStartGame",JSON.stringify(t))},e.prototype.SendDataToGame=function(){var t=this;this.viewLoading.active=!0,this.CanStartGame().then(function(e){try{if("OK"==JSON.parse(e).Result){var o={channel:"utop",event:"start-game",message:{IDChannel:t.userParams.channel,IDUser:t.userParams.c,GameCode:t.userParams.gamecode,sessionID:t.userParams.b}};t.HttpRequest("post","https://utop-pusher.herokuapp.com/push",JSON.stringify(o)).then(function(e){t.viewLoading.active=!1}).catch(function(e){t.viewLoading.active=!0})}else t.viewMessage.getComponent(c.default).SetDescription("AAAAAAAAAA"),t.viewMessage.active=!0,t.viewLoading.active=!0}catch(e){t.viewMessage.getComponent(c.default).SetDescription("Json invalid"),t.viewMessage.active=!0,t.viewLoading.active=!0}}).catch(function(e){t.viewMessage.getComponent(c.default).SetDescription("BBBBBBBBBB"),t.viewMessage.active=!0,t.viewLoading.active=!0})},e.prototype.CloseGame=function(){try{window.ReactNativeWebView.postMessage(JSON.stringify({name:"redirect",body:"UTop"}))}catch(t){}},r([s({type:cc.Node})],e.prototype,"viewHelp",void 0),r([s({type:cc.Node})],e.prototype,"viewLoading",void 0),r([s({type:cc.Node})],e.prototype,"viewMessage",void 0),r([s({type:cc.Node})],e.prototype,"buttonPlay",void 0),r([s({type:cc.Node})],e.prototype,"buttonHelp",void 0),e=r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Message":"Message"}],Message:[function(t,e,o){"use strict";cc._RF.push(e,"99ab3KIaslMA4mRFor2th1b","Message");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.description=null,e}return n(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.SetDescription=function(t){this.description=t},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t.node.active=!1}).start()},r([a({type:cc.Label})],e.prototype,"description",void 0),e=r([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["Help","Loading","Main","Message"]);