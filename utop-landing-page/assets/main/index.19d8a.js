window.__require=function t(e,o,n){function r(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({Help:[function(t,e,o){"use strict";cc._RF.push(e,"fdb6cUAn+9CMK4OtdcbT0N2","Help");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.help=null,e}return r(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.SetInfo=function(t){this.help.string=t},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t.node.active=!1}).start()},i([a({type:cc.RichText})],e.prototype,"help",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"aa71dc8Py5ACL0THxilhTNp","Loading");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this.icon.angle-=180*t},i([a(cc.Node)],e.prototype,"icon",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"fc3ed9adlFAJYE+FTOQxGkD","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Message"),s=t("./Help"),a=cc._decorator,p=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewHelp=null,e.viewLoading=null,e.viewMessage=null,e.buttonPlay=null,e.buttonHelp=null,e.baseURL="",e}return r(e,t),e.prototype.start=function(){this.baseURL=window.userParams.api,this.userParams=this.GetParams(location&&location.href||""),this.buttonHelp.setPosition(-cc.winSize.width/4,this.buttonHelp.position.y,0),this.buttonPlay.setPosition(cc.winSize.width/4,this.buttonHelp.position.y,0),this.userParams.t||this.ShowErrorMessage("Vui l\xf2ng c\u1eadp nh\u1eadt phi\xean b\u1ea3n app Utop m\u1edbi nh\u1ea5t \u0111\u1ec3 ch\u01a1i game!!!",!0)},e.prototype.OnHelp=function(){var t=(this.userParams.location||"vanhanhmall").toLowerCase();if("vanhanhmall"==t){var e=window.userParams;this.viewHelp.getComponent(s.default).SetInfo(e.helpVanHanhMall)}else"bitexco"==t&&(e=window.userParams,this.viewHelp.getComponent(s.default).SetInfo(e.helpBitexco));this.viewHelp.active=!0},e.prototype.OnPlay=function(){this.SendDataToGame()},e.prototype.OnClose=function(){try{window.ReactNativeWebView.postMessage(JSON.stringify({name:"redirect",body:"UTop"}))}catch(t){}},e.prototype.HttpRequest=function(t,e,o){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open(t,e,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?n(i.response):r(i.response))},i.send(o)})},e.prototype.ParseUrl=function(t){for(var e,o=/[?&]([^=#]+)=([^&#]*)/g,n={};e=o.exec(t);)n[e[1]]=decodeURIComponent(e[2]);return n},e.prototype.GetParams=function(t){var e=this,o=this.ParseUrl(t);return Object.keys(o).forEach(function(t){if("initCustomParams"==t){var n=e.ParseUrl(o[t]);Object.keys(n).forEach(function(t){o[t]=n[t]}),delete o[t]}else"d"==t&&(o[t]=JSON.parse(o[t]))}),o},e.prototype.VerifyQRCode=function(){},e.prototype.CanStartGame=function(){var t=this;return new Promise(function(e,o){t.HttpRequest("post",t.baseURL+"/GetTimeStamp",null).then(function(n){var r=JSON.parse(n);if(parseInt(r.timeStamp)-parseInt(t.userParams.t||0)<300){var i={idChannel:t.userParams.ch||1,gamecode:t.userParams.gc||1,sessionID:t.userParams.b};t.HttpRequest("post",t.baseURL+"/TestStartGame",JSON.stringify(i)).then(function(t){e(t)}).catch(function(){o("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})}else o("QRCode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng qu\xe9t l\u1ea1i t\u1eeb m\xe0n h\xecnh TV")}).catch(function(){o("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})})},e.prototype.SendDataToGame=function(){var t=this;this.viewLoading.active=!0,this.CanStartGame().then(function(e){try{var o=JSON.parse(e);if(0==o.code){var n="utop";t.userParams.ch&&(n="utop-"+t.userParams.ch);var r={channel:n,_event:"start-game",message:{sessionID:t.userParams.b}};t.HttpRequest("post",t.baseURL+"/Pusher",JSON.stringify(r)).then(function(){t.ShowInfoMessage("Game b\u1eaft \u0111\u1ea7u! M\u1eddi b\u1ea1n \u0111\u1ee9ng v\xe0o v\u1ecb tr\xed tr\u01b0\u1edbc m\xe0n h\xecnh Tivi \u0111\u1ec3 ch\u01a1i.")}).catch(function(){t.ShowErrorMessage("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})}else t.ShowErrorMessage(o.result)}catch(i){t.ShowErrorMessage("D\u1eef li\u1ec7u kh\xf4ng \u0111\xfang c\u1ea5u tr\xfac.")}}).catch(function(e){t.ShowErrorMessage(e)})},e.prototype.ShowErrorMessage=function(t,e){void 0===e&&(e=!1),this.viewMessage.getComponent(c.default).SetError(t,e),this.viewMessage.active=!0,this.viewLoading.active=!1},e.prototype.ShowInfoMessage=function(t,e){void 0===e&&(e=!1),this.viewMessage.getComponent(c.default).SetInfo(t,e),this.viewMessage.active=!0,this.viewLoading.active=!1},i([u({type:cc.Node})],e.prototype,"viewHelp",void 0),i([u({type:cc.Node})],e.prototype,"viewLoading",void 0),i([u({type:cc.Node})],e.prototype,"viewMessage",void 0),i([u({type:cc.Node})],e.prototype,"buttonPlay",void 0),i([u({type:cc.Node})],e.prototype,"buttonHelp",void 0),i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Help":"Help","./Message":"Message"}],Message:[function(t,e,o){"use strict";cc._RF.push(e,"99ab3KIaslMA4mRFor2th1b","Message");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.description=null,e.isQuit=!1,e}return r(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.SetError=function(t,e){void 0===e&&(e=!1),this.description.string=t,this.isQuit=e},e.prototype.SetInfo=function(t,e){void 0===e&&(e=!1),this.description.string=t,this.isQuit=e},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){if(t.node.active=!1,t.isQuit)try{window.ReactNativeWebView.postMessage(JSON.stringify({name:"redirect",body:"UTop"}))}catch(e){}}).start()},i([a({type:cc.Label})],e.prototype,"description",void 0),i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["Help","Loading","Main","Message"]);