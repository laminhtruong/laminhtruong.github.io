window.__require=function t(e,n,o){function r(c,s){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({Help:[function(t,e,n){"use strict";cc._RF.push(e,"fdb6cUAn+9CMK4OtdcbT0N2","Help");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t.node.active=!1}).start()},e=r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"aa71dc8Py5ACL0THxilhTNp","Loading");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this.icon.angle-=180*t},r([s(cc.Node)],e.prototype,"icon",void 0),e=r([c],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"fc3ed9adlFAJYE+FTOQxGkD","Main");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Message"),c=cc._decorator,s=c.ccclass,a=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewHelp=null,e.viewLoading=null,e.viewMessage=null,e.buttonPlay=null,e.buttonHelp=null,e.baseURL="https://utop-app-game-qa.azurewebsites.net/GamePlay",e}return o(e,t),e.prototype.start=function(){this.userParams=this.GetParams(location&&location.href||""),this.buttonHelp.setPosition(-cc.winSize.width/4,this.buttonHelp.position.y,0),this.buttonPlay.setPosition(cc.winSize.width/4,this.buttonHelp.position.y,0)},e.prototype.OnHelp=function(){this.viewHelp.active=!0},e.prototype.OnPlay=function(){this.SendDataToGame()},e.prototype.OnClose=function(){try{window.ReactNativeWebView.postMessage(JSON.stringify({name:"redirect",body:"UTop"}))}catch(t){}},e.prototype.HttpRequest=function(t,e,n){return new Promise(function(o,r){var i=new XMLHttpRequest;i.open(t,e,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?o(i.response):r(i.response))},i.send(n)})},e.prototype.ParseUrl=function(t){for(var e,n=/[?&]([^=#]+)=([^&#]*)/g,o={};e=n.exec(t);)o[e[1]]=decodeURIComponent(e[2]);return o},e.prototype.GetParams=function(t){var e=this,n=this.ParseUrl(t);return Object.keys(n).forEach(function(t){if("initCustomParams"==t){var o=e.ParseUrl(n[t]);Object.keys(o).forEach(function(t){n[t]=o[t]}),delete n[t]}else"d"==t&&(n[t]=JSON.parse(n[t]))}),n},e.prototype.VerifyQRCode=function(){},e.prototype.CanStartGame=function(){var t=this;return new Promise(function(e,n){t.HttpRequest("post",t.baseURL+"/GetTimeStamp",null).then(function(o){var r=JSON.parse(o);if(parseInt(r.timeStamp)-parseInt(t.userParams.t||0)<300){var i={idChannel:t.userParams.ch||1,gamecode:t.userParams.gc||1,sessionID:t.userParams.b};t.HttpRequest("post",t.baseURL+"/TestStartGame",JSON.stringify(i)).then(function(t){e(t)}).catch(function(t){n("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})}else n("QRCode \u0111\xe3 h\u1ebft h\u1ea1n, vui l\xf2ng qu\xe9t l\u1ea1i t\u1eeb m\xe0n h\xecnh TV")}).catch(function(t){n("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})})},e.prototype.SendDataToGame=function(){var t=this;this.viewLoading.active=!0,this.CanStartGame().then(function(e){try{var n=JSON.parse(e);if(0==n.code){var o={channel:"utop",_event:"start-game",message:{sessionID:t.userParams.b}};t.HttpRequest("post",t.baseURL+"/Pusher",JSON.stringify(o)).then(function(e){t.viewLoading.active=!1}).catch(function(e){t.ShowErrorMessage("Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng v\xe0 th\u1eed l\u1ea1i.")})}else t.ShowErrorMessage(n.result)}catch(e){t.ShowErrorMessage("D\u1eef li\u1ec7u kh\xf4ng \u0111\xfang c\u1ea5u tr\xfac.")}}).catch(function(e){t.ShowErrorMessage(e)})},e.prototype.ShowErrorMessage=function(t){this.viewMessage.getComponent(i.default).SetDescription(t),this.viewMessage.active=!0,this.viewLoading.active=!1},r([a({type:cc.Node})],e.prototype,"viewHelp",void 0),r([a({type:cc.Node})],e.prototype,"viewLoading",void 0),r([a({type:cc.Node})],e.prototype,"viewMessage",void 0),r([a({type:cc.Node})],e.prototype,"buttonPlay",void 0),r([a({type:cc.Node})],e.prototype,"buttonHelp",void 0),e=r([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./Message":"Message"}],Message:[function(t,e,n){"use strict";cc._RF.push(e,"99ab3KIaslMA4mRFor2th1b","Message");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.description=null,e}return o(e,t),e.prototype.onEnable=function(){this.node.setScale(.01),cc.tween(this.node).to(.5,{scale:1},{easing:"elasticOut"}).start()},e.prototype.start=function(){},e.prototype.SetDescription=function(t){this.description.string=t},e.prototype.OnClose=function(){var t=this;cc.tween(this.node).to(.5,{scale:0},{easing:"elasticIn"}).call(function(){t.node.active=!1}).start()},r([s({type:cc.Label})],e.prototype,"description",void 0),e=r([c],e)}(cc.Component);n.default=a,cc._RF.pop()},{}]},{},["Help","Loading","Main","Message"]);